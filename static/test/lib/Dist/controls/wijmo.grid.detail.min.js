/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){!function(t){!function(t){"use strict";var i=function(e){function t(t){var i=e.call(this)||this;return i.isReadOnly=!0,i}return __extends(t,e),Object.defineProperty(t.prototype,"detail",{get:function(){return this._detail},set:function(e){this._detail=e},enumerable:!0,configurable:!0}),t}(e.grid.Row);t.DetailRow=i}(t.detail||(t.detail={}))}(e.grid||(e.grid={}))}(wijmo||(wijmo={})),function(e){var t;(function(t){"use strict";var i=function(i){function n(e){return i.call(this,e)||this}return __extends(n,i),n.prototype.getMergedRange=function(n,o,r,l){switch(void 0===l&&(l=!0),n.cellType){case e.grid.CellType.Cell:if(n.rows[o]instanceof t.DetailRow){var a=n.columns,s=Math.min(a.length,a.frozen);return r<s?new e.grid.CellRange(o,0,o,s-1):new e.grid.CellRange(o,s,o,a.length-1)}break;case e.grid.CellType.RowHeader:if(n.rows[o]instanceof t.DetailRow)return new e.grid.CellRange(o-1,r,o,r);if(o<n.rows.length-1&&n.rows[o+1]instanceof t.DetailRow)return new e.grid.CellRange(o,r,o+1,r)}return i.prototype.getMergedRange.call(this,n,o,r,l)},n}(e.grid.MergeManager);t.DetailMergeManager=i})((t=e.grid||(e.grid={})).detail||(t.detail={}))}(wijmo||(wijmo={})),function(e){var t;(function(t){"use strict";var i,n;e._addCultureInfo("FlexGridDetailProvider",{ariaLabels:{toggleDetail:"Toggle Row Detail"}}),function(e){e[e.None=0]="None",e[e.ToggleDetail=1]="ToggleDetail"}(i=t.KeyAction||(t.KeyAction={})),function(e){e[e.Code=0]="Code",e[e.Selection=1]="Selection",e[e.ExpandSingle=2]="ExpandSingle",e[e.ExpandMulti=3]="ExpandMulti"}(n=t.DetailVisibilityMode||(t.DetailVisibilityMode={}));var o=function(){function o(o,r){var l=this;this._mode=n.ExpandSingle,this._animated=!1,this._keyActionEnter=i.None,this._g=o,o.mergeManager=new t.DetailMergeManager(o),o.rowHeaders.hostElement.addEventListener("click",this._hdrClick.bind(this)),o.rowHeaders.hostElement.addEventListener("mousedown",function(e){var t=o.editableCollectionView;(o.activeEditor||t&&t.currentEditItem)&&(l._hdrClick(e),e.preventDefault())}),o.formatItem.addHandler(this._formatItem,this),o.selectionChanged.addHandler(this._selectionChanged,this),o.resizedRow.addHandler(this._resizedRow,this),o.loadingRows.addHandler(function(){l.hideDetail()}),o.updatedView.addHandler(function(){l._handleFixedCells()}),o.draggingRow.addHandler(function(e,i){i.row<e.rows.length-1&&e.rows[i.row+1]instanceof t.DetailRow&&(i.cancel=!0,l.hideDetail(i.row))}),o.hostElement.addEventListener("keydown",function(t){if(t.keyCode==e.Key.Enter&&l._keyActionEnter==i.ToggleDetail){var n=l._g.selection.row;l._toggleRowDetail(n)&&t.preventDefault()}},!0),o._root.addEventListener("scroll",function(){e.Control.refreshAll(o._root)}),r&&e.copy(this,r)}return Object.defineProperty(o.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"detailVisibilityMode",{get:function(){return this._mode},set:function(t){(t=e.asEnum(t,n))!=this._mode&&(this._mode=t,this.hideDetail(),this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){this._maxHeight=e.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isAnimated",{get:function(){return this._animated},set:function(t){t!=this._animated&&(this._animated=e.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"keyActionEnter",{get:function(){return this._keyActionEnter},set:function(t){this._keyActionEnter=e.asEnum(t,i)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"createDetailCell",{get:function(){return this._createDetailCellFn},set:function(t){this._createDetailCellFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"disposeDetailCell",{get:function(){return this._disposeDetailCellFn},set:function(t){this._disposeDetailCellFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowHasDetail",{get:function(){return this._rowHasDetailFn},set:function(t){this._rowHasDetailFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0}),o.prototype.getDetailRow=function(e){var i=this._g.rows;return i[e=this._toIndex(e)]instanceof t.DetailRow?i[e]:e<i.length-1&&i[e+1]instanceof t.DetailRow?i[e+1]:null},o.prototype.isDetailVisible=function(e){return null!=this.getDetailRow(e)},o.prototype.isDetailAvailable=function(e){return e=this._toIndex(e),this._hasDetail(e)},o.prototype.hideDetail=function(i){var n=this._g.rows;if(null!=i){!(n[i=this._toIndex(i)]instanceof t.DetailRow)&&i<n.length-1&&n[i+1]instanceof t.DetailRow&&i++;var o=n[i];o instanceof t.DetailRow&&(this.disposeDetailCell&&this.disposeDetailCell(o),e.Control.disposeAll(o.detail),n.removeAt(i))}else for(var r=0;r<n.length;r++)n[r]instanceof t.DetailRow&&this.hideDetail(r)},o.prototype.showDetail=function(i,n){void 0===n&&(n=!1);var o=this._g,r=o.rows;if((i=this._toIndex(i))>0&&r[i]instanceof t.DetailRow&&i--,n){for(var l=o.selection,a=!1,s=0;s<r.length-1;s++)s!=i&&r[s+1]instanceof t.DetailRow&&(this.hideDetail(s),s<i&&i--,s<l.row&&(l.row--,l.row2--,a=!0));a&&o.select(l,!1)}if(!this.isDetailVisible(i)&&this._hasDetail(i)){var d=new t.DetailRow(r[i]),c=this._createDetailCell(r[i]);if(d.detail=c,c){r.insert(i+1,d);var u=o.containsFocus();if(this._animated){var h=c.style;h.transform="translateY(-100%)",h.opacity="0",e.animate(function(t){t<1?(h.transform="translateY("+(100*-(1-t)).toFixed(0)+"%)",h.opacity=(t*t).toString()):(h.transform="",h.opacity="",e.Control.invalidateAll(c),u&&o.scrollIntoView(i+1,-1))})}else u&&o.scrollIntoView(i+1,-1,!0)}}},o.prototype._sizeDetailRow=function(t){var i=this._g,n=t.detail;e.Control.refreshAll(n);var o=n.scrollHeight+i._cellPadVert,r=this._maxHeight;e.isNumber(r)&&r>0&&o>r&&(o=r),t.height=o,n.style.height||(n.style.height="100%");var l=n.querySelector(".wj-flexgrid");l&&!l.style.height&&(l.style.height="100%")},o.prototype._handleFixedCells=function(){var t=this._g,i=t.hostElement;if(t.frozenRows||t.frozenColumns){var n=e.Control.getControl(i.querySelector(".wj-flexgrid"));if(n instanceof e.grid.FlexGrid&&(n.frozenRows||n.frozenColumns)){e.setCss([t._eTL,t._eBL,t._eCHdr,t._eCFtr,t._eRHdr,t._eMarquee],{zIndex:"6"});for(var o=t.hostElement.querySelectorAll(".wj-frozen"),r=0;r<o.length;r++){var l=o[r];if(e.closest(l,".wj-flexgrid")==t.hostElement){var a=parseInt(l.style.zIndex);l.style.zIndex=(a%3+3).toString()}}}}},o.prototype._toIndex=function(t){return t instanceof e.grid.Row&&(t=t.index),e.asNumber(t,!1,!0)},o.prototype._hdrClick=function(t){if(!t.defaultPrevented&&0==t.button&&e.closestClass(t.target,o._WJC_DETAIL))switch(this._mode){case n.ExpandMulti:case n.ExpandSingle:var i=this._g,r=i.hitTest(t.target);r.panel||(r=i.hitTest(t)),r.panel&&this._toggleRowDetail(r.row)&&t.preventDefault()}},o.prototype._toggleRowDetail=function(t){if(t>-1){if(this.isDetailVisible(t))return this.hideDetail(t),!0;if(this._hasDetail(t)){var i=this._g;return i.select(new e.grid.CellRange(t,0,t,i.columns.length-1)),this.showDetail(t,this._mode==n.ExpandSingle),!0}}return!1},o.prototype._selectionChanged=function(e,t){var i=this;this._mode==n.Selection&&(this._toSel&&clearTimeout(this._toSel),this._toSel=setTimeout(function(){e.selection.row>-1?i.showDetail(e.selection.row,!0):i.hideDetail()},300))},o.prototype._formatItem=function(i,r){var l=this._g,a=r.cell,s=r.panel.rows[r.row];if(r.panel==l.cells&&s instanceof t.DetailRow&&null!=s.detail&&r.col==l.cells.columns.frozen&&(e.addClass(a,"wj-detail"),a.textContent="",a.style.textAlign="",a.className=a.className.replace(/wj\-align\-[\S]+/g,""),a.appendChild(s.detail),null==s.height&&this._sizeDetailRow(s)),r.panel==l.rowHeaders&&0==r.col&&this._hasDetail(r.row))switch(a.style.cursor="",this._mode){case n.ExpandMulti:case n.ExpandSingle:var d=l.rows[r.row+1]instanceof t.DetailRow,c=d?"minus":"plus",u=o._WJC_DETAIL;a.innerHTML='<div class="wj-btn wj-btn-glyph '+u+'" role="button" tabindex="-1"><span class="wj-glyph-'+c+'"></span></div>';var h=a.children[0],f=e.culture.FlexGridDetailProvider.ariaLabels.toggleDetail;e.setAriaLabel(h,f),e.setAttribute(h,"aria-expanded",d)}},o.prototype._resizedRow=function(i,n){var o=n.panel.rows[n.row];o instanceof t.DetailRow&&o.detail&&e.Control.refreshAll(o.detail)},o.prototype._hasDetail=function(t){var i=this._g.rows[t];return e.isFunction(this._rowHasDetailFn)?this._rowHasDetailFn(i):this._isRegularRow(i)},o.prototype._isRegularRow=function(t){return!(t instanceof e.grid.GroupRow||t instanceof e.grid._NewRowTemplate)},o.prototype._createDetailCell=function(e,t){return this.createDetailCell?this.createDetailCell(e,t):null},o._WJC_DETAIL="wj-elem-detail",o}();t.FlexGridDetailProvider=o})((t=e.grid||(e.grid={})).detail||(t.detail={}))}(wijmo||(wijmo={})),function(e){!function(t){t.detail||(t.detail={}),e._registerModule("wijmo.grid.detail",e.grid.detail)}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));