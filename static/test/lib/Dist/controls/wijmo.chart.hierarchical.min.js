/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();!function(t){!function(e){!function(e){"use strict";var i=function(){function e(){}return e.parseDataToHierarchical=function(i,r,a,o){var n,s=[];return i instanceof t.collections.CollectionView&&i.groups.length>0?s=e.parseGroupCV(i,r):i.length>0&&(t.isString(a)&&a.indexOf(",")>-1&&(a=a.split(",")),o?s=e.parseItems(i,r,a,o):(n=e.convertFlatData(i,r,a),s=e.parseItems(n,"value",a,"items"))),s},e.parseGroupCV=function(t,e){for(var i=[],r=0,a=t.groups.length;r<a;r++){var o=this.parseGroups(t.groups[r],e);i.push(o)}return i},e.parseGroups=function(e,i){var r={};if(r.name=e.name,r.nameField=e.groupDescription.propertyName,r.item=e.items,e.groups&&e.groups.length){r.items=[];for(var a=0,o=e.groups.length;a<o;a++){var n=this.parseGroups(e.groups[a],i);r.items.push(n)}}else e.isBottomLevel&&(r.value=e.getAggregate(t.Aggregate.Sum,i));return r},e.parseItems=function(t,i,r,a){var o,n=[],s=t.length;for(o=0;o<s;o++)n.push(e.parseItem(t[o],i,r,a));return n},e.isFlatItem=function(e,i){return!t.isArray(e[i])},e.convertFlatData=function(i,r,a){var o,n,s=[],l={},h=i.length;for(o=0;o<h;o++)n=i[o],e.convertFlatItem(l,n,r,t.isArray(a)?a:[a]);return e.convertFlatToHierarchical(s,l),s},e.convertFlatToHierarchical=function(t,i){var r=i.flatDataOrder;r&&r.forEach(function(r){var a,o={},n=i[r];o[i.field]=r,n.flatDataOrder?(a=[],e.convertFlatToHierarchical(a,n),o.items=a):o.value=n,t.push(o)})},e.convertFlatItem=function(i,r,a,o){var n,s,l,h;return s=(n=o.slice()).shift(),null!=(l=null==(s=t.isString(s)?s.trim():s)?a:r[s])&&(0===n.length?(i[l]=r[a]||0,i.flatDataOrder?i.flatDataOrder.push(l):i.flatDataOrder=[l],i.field=s):(null==i[l]&&(i[l]={},i.flatDataOrder?i.flatDataOrder.push(l):i.flatDataOrder=[l],i.field=s),h=i[l],e.convertFlatItem(h,r,a,n)||(i[l]=r[a])),!0)},e.parseItem=function(i,r,a,o){var n,s,l,h,c,u={};return t.isArray(o)?h=(c=o.slice()).length?c.shift().trim():"":(c=o,h=o),t.isArray(a)?(s=null==(s=(n=a.slice()).shift())?s:s.trim(),u.nameField=null==s?r:s,u.name=null==s?i[r]:i[s],l=i[h],0===n.length?u.value=i[r]:l&&t.isArray(l)&&l.length>0?u.items=e.parseItems(l,r,n,c):u.value=i[r]||0):(u.nameField=null==a?r:a,u.name=null==a?i[r]:i[a],null!=(l=i[h])&&t.isArray(l)&&l.length>0?u.items=e.parseItems(l,r,a,c):u.value=i[r]),u.item=i,u},e.parseFlatItem=function(t,e,i,r){t.items||(t.items=[])},e}();e.HierarchicalUtil=i}(e.hierarchical||(e.hierarchical={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={})),function(t){!function(e){!function(e){"use strict";var i;!function(t){t[t.Squarified=0]="Squarified",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(i=e.TreeMapType||(e.TreeMapType={}));var r=function(r){function s(e,i){var a=r.call(this,e,null,!0)||this;return a._values=[],a._labels=[],a._areas=[],a._sum=0,a._keywords=new t.chart._KeyWords,a._processedData=[],a._depth=1,a._itemIndex=0,a._processedItem=[],a._maxDepth=-1,a._tmItems=[],a._colRowLens=[],a._defPalette=[{titleColor:"#033884",maxColor:"#1450a7",minColor:"#83b3f9"},{titleColor:"#a83100",maxColor:"#dc4a0d",minColor:"#ffb190"},{titleColor:"#006658",maxColor:"#008d7a",minColor:"#7deddf"},{titleColor:"#a10046",maxColor:"#df0061",minColor:"#ff8cbe"},{titleColor:"#784d08",maxColor:"#99681a",minColor:"#efc989"},{titleColor:"#54156f",maxColor:"#722a90",minColor:"#cf95e7"},{titleColor:"#998605",maxColor:"#c2ac19",minColor:"#ffef8b"},{titleColor:"#9a0005",maxColor:"#c80c14",minColor:"#ff888d"}],a.applyTemplate("wj-control wj-flexchart wj-treemap",null,null),a._currentRenderEngine=new t.chart._SvgRenderEngine(a.hostElement),a._legend=new t.chart.Legend(a),a._legend.position=t.chart.Position.None,a._tooltip=new t.chart.ChartTooltip,a._tooltip.content="<b>{name}</b><br/>{value}",a._tooltip.showDelay=0,a._lbl=new t.chart.DataLabel,a._lbl.position=t.chart.LabelPosition.Center,a._lbl._chart=a,a.hostElement.addEventListener("mousemove",function(t){a.isTouching||a._toogleTooltip(t)}),a.hostElement.addEventListener("click",function(e){var i=!0;if(a.maxDepth>0){var r=a.hitTest(e),o=t.chart.FlexChart._SELECTION_THRESHOLD;if(a.tooltip&&a.tooltip.threshold&&(o=a.tooltip.threshold),r.distance<=o&&r.pointIndex>=-1&&r.pointIndex<a._areas.length){var n=a._areas[r.pointIndex];a._currentItem!=n.item&&(a._currentItem=n.item,a._refreshChart(),i=!1)}}i&&a.isTouching&&a._toogleTooltip(e)}),a.hostElement.addEventListener("contextmenu",function(e){if(a.maxDepth>0){var i=a.hitTest(e),r=t.chart.FlexChart._SELECTION_THRESHOLD;a.tooltip&&a.tooltip.threshold&&(r=a.tooltip.threshold),i.distance<=r&&a._rollUp()}return e.preventDefault(),!1}),a.hostElement.addEventListener("mouseleave",function(){a._hideToolTip()}),a.initialize(i),a.refresh(),a}return __extends(s,r),s.prototype._rollUp=function(){this._currentItem=this._currentItem&&this._currentItem.parent?this._currentItem.parent:null,this._refreshChart()},s.prototype._toogleTooltip=function(e){var i=this._tooltip;if(i.content){var r=this.hitTest(e);if(r.distance<=i.threshold){var a=this._getLabelContent(r,this.tooltip.content);this._showToolTip(a,new t.Rect(e.clientX,e.clientY,5,5))}else this._hideToolTip()}},Object.defineProperty(s.prototype,"selectionMode",{get:function(){return t.chart.SelectionMode.None},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_treeMapItems",{get:function(){return this._tmItems},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"binding",{get:function(){return this._binding},set:function(e){e!=this._binding&&(this._binding=t.asString(e,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return null==this._type?i.Squarified:this._type},set:function(e){(e=t.asEnum(e,i))!=this._type&&(this._type=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bindingName",{get:function(){return this._bindingName},set:function(e){e!=this._bindingName&&(t.assert(null==e||t.isArray(e)||t.isString(e),"bindingName should be an array or a string."),this._bindingName=e,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=t,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(e){e!=this._childItemsPath&&(t.assert(null==e||t.isArray(e)||t.isString(e),"childItemsPath should be an array or a string."),this._childItemsPath=e,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxDepth",{get:function(){return this._maxDepth},set:function(e){e!=this._maxDepth&&(this._maxDepth=t.asNumber(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"palette",{get:function(){return this._palette},set:function(e){e!=this._palette&&(this._palette=t.asArray(e),this._tmItems&&this._tmItems.length>0&&this._calculateColorForItems(this._tmItems),this.invalidate())},enumerable:!0,configurable:!0}),s.prototype._initData=function(){this._sum=0,this._tmItems=[],this._currentItem=null,this._values=[],this._labels=[],this._processedData=[],this._depth=1,this._processedItem=[]},s.prototype._performBind=function(){var t;this._initData(),this._cv&&(t=this._cv.items,this._cv.groups&&this._cv.groups.length?this._processedData=e.HierarchicalUtil.parseDataToHierarchical(this._cv,this.binding,this.bindingName,this.childItemsPath):t&&(this._processedData=e.HierarchicalUtil.parseDataToHierarchical(t,this.binding,this.bindingName,this.childItemsPath)),this._processedData&&this._processedData.length&&(this._sum=this._calculateValueAndDepth(this._processedData,1),this._sortData(this._processedData),this._values=[],this._getTMItemsAndLabelsAndValues(this._processedData,this._tmItems,1,null),this._calculateColorForItems(this._tmItems)))},s.prototype._sortData=function(t){var e=this;t.forEach(function(t){t.items&&e._sortData(t.items)}),t.sort(function(t,e){return e.value-t.value})},s.prototype._getTMItemsAndLabelsAndValues=function(t,e,i,r,o){var n=this;t&&t.length>0&&t.forEach(function(t,o){var s,l=new a;l.items=[],l.parent=r,l.depth=i,t.items&&n._getTMItemsAndLabelsAndValues(t.items,l.items,i+1,l),s=t.name?t.name:t.value.toString(),l.label=s,l.value=t.value,null!=r&&(t.value>r.maxValue&&(r.maxValue=t.value),t.value<r.minValue&&(r.minValue=t.value)),e.push(l),n._labels.push(s),n._values.push(t.value)})},s.prototype._calculateColorForItems=function(e,i,r){var a=this,n=r;e.forEach(function(e,r){var s=i;1===e.depth&&(s=a._getColor(r)),e.palette=s;var l=e.palette;if(t.isString(l)){var h=l,c=a._getLightColor(h);e.titleFill=h,e.titleStroke=h,e.fill=c,e.stroke=h}else if(l.maxColor&&l.minColor&&l.titleColor)if(e.titleFill=l.titleColor,e.titleStroke=l.titleColor,null==e.parent)e.fill=l.maxColor,e.stroke=l.maxColor;else{null==n&&(n=new o(l.minColor,e.minValue,l.maxColor,e.maxValue));var u=n._calculateColorByVal(e.value,!0).toString();e.fill=u,e.stroke=u}if(e.items&&e.items.length>0){var _=new o(l.minColor,e.minValue,l.maxColor,e.maxValue);a._calculateColorForItems(e.items,s,_)}})},s.prototype._getBindData=function(e,i,r){var a,o=0;r&&(a=e[r]);o=0;return t.isNumber(a)?o=t.asNumber(a):a&&(o=parseFloat(a.toString())),!isNaN(o)&&isFinite(o)?i.push(o):(o=0,i.push(o)),o},s.prototype._calculateValueAndDepth=function(t,e){var i=this,r=0,a=this._values;return this._depth<e&&(this._depth=e),t.forEach(function(t){var o;t.items?(o=i._calculateValueAndDepth(t.items,e+1),t.value=o,a.push(o)):(o=i._getBindData(t,a,"value"),t.value=o),r+=o}),r},s.prototype._prepareRender=function(){this._areas=[]},s.prototype._renderChart=function(e,i,r){var a,o,n,l=this._rectChart.clone();new t.Size(l.width,l.height);this.onRendering(new t.chart.RenderEventArgs(e));var h=i.width,c=i.height;this._tmGroup=e.startGroup(null,null,!0);var u=this._parseMargin(this.plotMargin);this.dataLabel;isNaN(u.left)&&(u.left=s._MARGIN),isNaN(u.right)&&(u.right=s._MARGIN),isNaN(u.top)&&(u.top=s._MARGIN),isNaN(u.bottom)&&(u.bottom=s._MARGIN),i.top+=u.top;c=i.height-(u.top+u.bottom);i.height=c>0?c:24,i.left+=u.left;h=i.width-(u.left+u.right);i.width=h>0?h:24,this._plotRect=i,a=this._currentItem?[this._currentItem]:this._tmItems,o=null==this._currentItem||this.maxDepth<1?this.maxDepth:this._currentItem&&this._currentItem.items&&this._currentItem.items.length&&this.maxDepth>1?this.maxDepth:this.maxDepth+1,n=this._currentItem?this._currentItem.value:this._sum,this._renderTreeMap(e,i,this._tmGroup,a,n,o),e.endGroup(),this.dataLabel.content&&this.dataLabel.position!=t.chart.LabelPosition.None&&this._renderLabels(e),this.onRendered(new t.chart.RenderEventArgs(e))},s.prototype._renderTreeMap=function(t,e,i,r,a,o){a>0&&(this._itemIndex=0,this._resetItemRects(this._tmItems),this._calculateItemRects(e,r,a,1,o),this._renderHierarchicalTreeMapItems(t,i,e,this._tmItems,a,1,o))},s.prototype._resetItemRects=function(e){var i=this;e.forEach(function(e){e.rect=new t.Rect(0,0,0,0),e.isTitle=!1,e.type=i.type,e.items&&e.items.length&&i._resetItemRects(e.items)})},s.prototype._calculateItemRects=function(t,e,r,a,o){var s=this;switch(this.type){case i.Horizontal:n.horizontal(e,t,r);break;case i.Vertical:n.vertical(e,t,r);break;case i.Squarified:n.squarified(e,t,r)}e.forEach(function(t,e){t.rect.clone();t.items&&t.items.length&&(a===o||a>o&&o>=1||(t.isTitle=!0,s._calculateItemRects(t.itemsRect,t.items,t.value,a+1,o)))})},s.prototype._renderHierarchicalTreeMapItems=function(e,i,r,a,o,n,l){var h,c,u,_,d,p=a.length;this.type;if(0!==p)for(var m=0;m<p;m++)h=e.startGroup(s._CSS_ITEMDEPTH+n),c=a[m],u=Math.abs(c.value),_=c.rect,c.draw(e),d=new t.chart._RectArea(_),c.items&&this._renderHierarchicalTreeMapItems(e,h,c.itemsRect,c.items,u,n+1,l),d.tag=this._itemIndex,d.name=c.label,d.value=u,d.item=c,this._areas.push(d),this._itemIndex++,e.endGroup()},s.prototype._renderLabels=function(e){var i,r=this._areas.length,a=this.dataLabel,o=a.position,n=a.connectingLine,s=a.border,l=a.offset||0;e.stroke="null",e.fill="transparent",e.strokeWidth=1,e.startGroup("wj-data-labels");for(var h=0;h<r;h++){var c=this._areas[h];if(c){var u=c.rect,_=new t.chart.HitTestInfo(this,i);_._setData(null,h);var d=this._getLabelContent(_,a.content);if(i=new t.Point(u.left+u.width/2,u.top+u.height/2),d&&u.width>0&&u.height>0){var p=new t.chart.DataLabelRenderEventArgs(e,_,i,d);a.onRendering(p)&&(d=p.text,i=p.point,this._renderLabelAndBorder(e,c,u,d,o,l,i,n,2,s))}}}e.endGroup()},s.prototype._renderLabelAndBorder=function(e,i,r,a,o,n,s,l,h,c){var u,_="wj-data-label",d="wj-data-label-line";switch(o){case t.chart.LabelPosition.Top:l&&e.drawLine(s.x,s.y,s.x,s.y-n,d),s.y-=h+n,u=this._renderText(e,i,r,a,s,1,2,_);break;case t.chart.LabelPosition.Bottom:l&&e.drawLine(s.x,s.y,s.x,s.y+n,d),s.y+=h+n,u=this._renderText(e,i,r,a,s,1,0,_);break;case t.chart.LabelPosition.Left:l&&e.drawLine(s.x,s.y,s.x-n,s.y,d),s.x-=h+n,u=this._renderText(e,i,r,a,s,2,1,_);break;case t.chart.LabelPosition.Right:l&&e.drawLine(s.x,s.y,s.x+n,s.y,d),s.x+=h+n,u=this._renderText(e,i,r,a,s,0,1,_);break;case t.chart.LabelPosition.Center:u=this._renderText(e,i,r,a,s,1,1,_)}return c&&u&&e.drawRect(u.left-h,u.top-h,u.width+2*h,u.height+2*h,"wj-data-label-border"),u},s.prototype._renderText=function(e,r,a,o,n,s,l,h){var c,u=o,_=r.item;return c=e.measureString(o,h),this.type===i.Horizontal&&_.isTitle?(c.width>a.height&&(u=this._cutText(o,c.width,a.height)),t.chart.FlexChart._renderRotatedText(e,u,n,s,l,n,-90,h),null):(c.width>a.width&&(u=this._cutText(o,c.width,a.width)),t.chart.FlexChart._renderText(e,u,n,s,l,h))},s.prototype._cutText=function(t,e,i){var r="",a=t.length,o=Math.floor((1-(e-i)/e)*a);return t.length>0&&(r=t[0]+(o>1?t.substring(1,o-1)+"..":"")),r},s.prototype._measureLegendItem=function(e,i){var r=new t.Size;if(r.width=t.chart.Series._LEGEND_ITEM_WIDTH,r.height=t.chart.Series._LEGEND_ITEM_HEIGHT,i){var a=e.measureString(i,t.chart.FlexChart._CSS_LABEL,t.chart.FlexChart._CSS_LEGEND);r.width+=a.width,r.height<a.height&&(r.height=a.height)}return r.width+=3*t.chart.Series._LEGEND_ITEM_MARGIN,r.height+=2*t.chart.Series._LEGEND_ITEM_MARGIN,r},s.prototype._getDesiredLegendSize=function(e,i,r,a){var o=new t.Size,n=new t.Size(r,a),s=this._tmItems.length,l=0,h=0;this._colRowLens=[];for(var c=0;c<s;c++){var u=this._measureLegendItem(e,this._tmItems[c].label);i?(h+u.height>a&&(o.height=a,this._colRowLens.push(l),l=0,h=0),l<u.width&&(l=u.width),h+=u.height):(l+u.width>r&&(o.width=r,this._colRowLens.push(h),h=0,l=0),h<u.height&&(h=u.height),l+=u.width)}return i?(o.height<h&&(o.height=h),this._colRowLens.push(l),o.width=this._colRowLens.reduce(function(t,e){return t+e},0),o.width>n.width/2&&(o.width=n.width/2)):(o.width<l&&(o.width=l),this._colRowLens.push(h),o.height=this._colRowLens.reduce(function(t,e){return t+e},0),o.height>n.height/2&&(o.height=n.height/2)),o},s.prototype._renderLegend=function(e,i,r,a,o,n){for(var s,l=this._rectLegend,h=this._tmItems.length,c=0,u=i.clone(),_=0;_<h;_++){s=this._tmItems[_].label;var d=this._measureLegendItem(e,s);a?u.y+d.height>l.top+l.height+1&&(u.x+=this._colRowLens[c],c++,u.y=i.y):u.x+d.width>l.left+l.width+1&&(u.y+=this._colRowLens[c],c++,u.x=i.x);var p=new t.Rect(u.x,u.y,d.width,d.height);this._drawLegendItem(e,p,_,s),r.push(p),a?u.y+=d.height:u.x+=d.width}},s.prototype._drawLegendItem=function(e,i,r,a){e.strokeWidth=1;var o=t.chart.Series._LEGEND_ITEM_MARGIN,n=this._getColor(r),s=n&&n.maxColor?n.maxColor:n,l=this._getLightColor(s);e.fill=s,e.stroke=l;var h=i.top+.5*i.height,c=t.chart.Series._LEGEND_ITEM_WIDTH,u=t.chart.Series._LEGEND_ITEM_HEIGHT;e.drawRect(i.left+o,h-.5*u,c,u,null),a&&t.chart.FlexChart._renderText(e,a,new t.Point(i.left+u+2*o,h),0,1,t.chart.FlexChart._CSS_LABEL)},s.prototype._getLabelContent=function(e,i){return t.isString(i)?this._keywords.replace(i,e):t.isFunction(i)?i(e):null},s.prototype.hitTest=function(e,i){var r=this._toControl(e,i),a=new t.chart.HitTestInfo(this,r),o=null;if(t.chart.FlexChart._contains(this._rectHeader,r))a._chartElement=t.chart.ChartElement.Header;else if(t.chart.FlexChart._contains(this._rectFooter,r))a._chartElement=t.chart.ChartElement.Footer;else if(t.chart.FlexChart._contains(this._rectLegend,r))a._chartElement=t.chart.ChartElement.Legend,null!==(o=this.legend._hitTest(r))&&o>=0&&o<this._areas.length&&a._setData(null,o);else if(t.chart.FlexChart._contains(this._rectChart,r)){for(var n,s=this._areas.length,l=NaN,h=0;h<s;h++){var c=r.clone(),u=this._areas[h];u.contains(c)&&(a._setData(null,u.tag),a._dist=0);var _=u.distance(c);void 0!==_&&(isNaN(l)||_<l)&&(l=_,n=u)}0!==a._dist&&null!=n&&(a._setData(null,n.tag),a._dist=l),a._chartElement=t.chart.ChartElement.ChartArea}else a._chartElement=t.chart.ChartElement.None;return a},s.prototype._getHitTestItem=function(t){var e=null,i=null;return(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(i=e[t]),i},s.prototype._getHitTestValue=function(t){return this._values[t]},s.prototype._getHitTestLabel=function(t){return this._labels[t]},s._CSS_ITEMDEPTH="wj-treemap-item-depth",s._MARGIN=0,s}(t.chart.FlexChartBase);e.TreeMap=r;var a=function(){function e(){this.items=[],this.maxValue=Number.MIN_VALUE,this.minValue=Number.MAX_VALUE}return e.prototype.draw=function(t){var i=this.rect;t.strokeWidth=0,this.isTitle?(t.fill=this.titleFill,t.stroke=this.titleStroke):(t.fill=this.fill,t.stroke=this.stroke),t.drawRect(i.left,i.top,i.width,i.height,e._CLASSNAME)},Object.defineProperty(e.prototype,"itemsRect",{get:function(){var e=this.rect,r=this._rect,a=1===this.depth?2:.5;return this.isTitle?this.type===i.Horizontal?new t.Rect(e.left+e.width+1,e.top,r.width-e.width-2*a,e.height+1):new t.Rect(e.left,e.top+e.height+1,e.width+1,r.height-e.height-2*a):new t.Rect(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rect",{get:function(){var e=this._rect,r=1===this.depth?2:.5,a=e.width,o=e.height,n=e.left,s=e.top;return this.isTitle?(this.type===i.Horizontal?(a=e.width>20?20:a,a=Math.max(20,a-2*r),o=o>2*r?o-2*r:0):(o=e.height>20?20:o,o=Math.max(20,o-2*r),a=a>2*r?a-2*r:0),n+=r,s+=r):(a=a>2*r?a-2*r:0,o=o>2*r?o-2*r:0),new t.Rect(n,s,a,o)},set:function(t){t!=this._rect&&(this._rect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTitle",{get:function(){return this._isTitle},set:function(e){var i=t.asBoolean(e,!0);i!==this._isTitle&&(this._isTitle=i)},enumerable:!0,configurable:!0}),e._CLASSNAME="wj-treemap-item",e}(),o=function(){function e(e,i,r,a,o,n){this.minColor=new t.Color(e),this.minColorValue=i,this.maxColor=new t.Color(r),this.maxColorValue=a,this.midColorValue=this.originalMidColorValue=n,this._calculateMidColorValue(),this.midColor=this.originalMidColor=new t.Color(o),this._calculateMidColor()}return e.prototype._resetminColor=function(e){this.minColor=new t.Color(e),this._calculateMidColor()},e.prototype._resetmidColor=function(e){this.midColor=this.originalMidColor=new t.Color(e),this._calculateMidColor()},e.prototype._resetmaxColor=function(e){this.maxColor=new t.Color(e),this._calculateMidColor()},e.prototype._resetminColorValue=function(t){this.minColorValue=t,this._calculateMidColorValue()},e.prototype._resetmidColorValue=function(t){this.midColorValue=this.originalMidColorValue=t,this._calculateMidColorValue()},e.prototype._resetmaxColorValue=function(t){this.maxColorValue=t,this._calculateMidColorValue()},e.prototype._calculateMidColorValue=function(){null==this.originalMidColorValue&&(this.midColorValue=(this.maxColorValue+this.minColorValue)/2)},e.prototype._calculateMidColor=function(){null==this.originalMidColor&&(this.midColor=this._calculateColorByVal(this.midColorValue,!0))},e.prototype._calculateColorByVal=function(e,i){void 0===i&&(i=!1);var r=this.maxColor,a=this.minColor,o=this.maxColorValue,n=this.minColorValue;if(e>=this.maxColorValue)return new t.Color(r.toString());if(e<=this.minColorValue)return new t.Color(a.toString());if(!i){if(e===this.midColorValue)return new t.Color(this.midColor.toString());e<this.midColorValue?(r=this.midColor,o=this.midColorValue):(a=this.midColor,n=this.midColorValue)}return this._getColor(e,r,o,a,n)},e.prototype._getColor=function(e,i,r,a,o){return t.Color.fromRgba(this._getValueByRatio(e,i.r,r,a.r,o),this._getValueByRatio(e,i.g,r,a.g,o),this._getValueByRatio(e,i.b,r,a.b,o),this._getValueByRatio(e,i.a,r,a.a,o))},e.prototype._getValueByRatio=function(t,e,i,r,a){return Math.abs(r+Math.round((t-a)*(e-r)/(i-a)))},e}(),n=function(){function e(){}return e.squarified=function(t,i,r){var a=t.slice(),o=i.clone(),n=o.width*o.height/r;do{var s=e.getRowedItems(a,o,n);e.layoutRowedItems(i,s,o,o.width>o.height)}while(a.length)},e.horizontal=function(t,i,r){var a=i.clone();t.forEach(function(t){var o=[{item:t,val:t.value*i.width*i.height/r}];e.layoutRowedItems(i,o,a,!1)})},e.vertical=function(t,i,r){var a=i.clone();t.forEach(function(t){var o=[{item:t,val:t.value*i.width*i.height/r}];e.layoutRowedItems(i,o,a,!0)})},e.getNarrowLen=function(t){return Math.min(t.width,t.height)},e.getRowedItem=function(t,e,i){return{item:t,val:i*t.value}},e.getRowedItems=function(t,i,r){var a=t.shift(),o=[],n=[],s=e.getNarrowLen(i),l=e.getRowedItem(a,i,r);if(o.push(l),n.push(l),t.length>0)do{if(n.push(e.getRowedItem(t[0],i,r)),!(e.worst(o,s)>e.worst(n,s)))break;o=n.slice(),t.shift()}while(t.length);return o},e.layoutRowedItems=function(i,r,a,o){var n,s=a.left,l=a.top,h=s+a.width,c=l+a.height,u=e.sumRowedArray(r);o?(n=0===a.height?0:u/a.height,s+n>=h&&(n=h-s),r.forEach(function(e,i){var a=0===n?0:e.val/n;(l+a>c||i===r.length-1)&&(a=c-l);var o=new t.Rect(s,l,n,a);e.item.rect=o,l+=a}),a.left+=n,a.width-=n):(n=0===a.width?0:u/a.width,l+n>=c&&(n=c-l),r.forEach(function(e,i){var a=0===n?0:e.val/n;(s+a>h||i===r.length-1)&&(a=h-s);var o=new t.Rect(s,l,a,n);e.item.rect=o,s+=a}),a.top+=n,a.height-=n)},e.sumRowedArray=function(t){for(var e=0,i=t.length,r=0;r<i;r++)e+=t[r].val;return e},e.worst=function(t,i){var r,a,o=e.sumRowedArray(t),n=o*o,s=i*i;return r=a=t[0].val,t.forEach(function(t,e){t.val>r?r=t.val:t.val<a&&(a=t.val)}),Math.max(s*r/n,n/(s*a))},e}()}(e.hierarchical||(e.hierarchical={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={})),function(t){!function(e){!function(e){"use strict";var i=function(i){function r(t,e){var r=i.call(this,t,e)||this;return r._selectionIndex=0,r.applyTemplate("wj-sunburst",null,null),r.initialize(e),r.refresh(),r}return __extends(r,i),Object.defineProperty(r.prototype,"bindingName",{get:function(){return this._bindName},set:function(e){e!=this._bindName&&(t.assert(null==e||t.isArray(e)||t.isString(e),"bindingName should be an array or a string."),this._bindName=e,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(e){e!=this._childItemsPath&&(t.assert(null==e||t.isArray(e)||t.isString(e),"childItemsPath should be an array or a string."),this._childItemsPath=e,this._bindChart())},enumerable:!0,configurable:!0}),r.prototype._initData=function(){i.prototype._initData.call(this),this._processedData=[],this._level=1,this._legendLabels=[],this._processedItem=[],this._values[0]=[]},r.prototype._performBind=function(){var t,i=this;this._initData(),this._cv&&(t=this._cv.items,this._cv.groups&&this._cv.groups.length?this._processedData=e.HierarchicalUtil.parseDataToHierarchical(this._cv,this.binding,this.bindingName,this.childItemsPath):t&&(this._processedData=e.HierarchicalUtil.parseDataToHierarchical(t,this.binding,this.bindingName,this.childItemsPath)),this._processedData&&this._processedData.length&&(this._sums[0]=this._sum=this._calculateValueAndLevel(this._processedData,1),this._processedData.forEach(function(t){i._legendLabels.push(t.name)})))},r.prototype._calculateValueAndLevel=function(t,e){var i=this,r=0,a=this._values[0],o=this._labels;return this._level<e&&(this._level=e),t.forEach(function(t){var n;t.items?(n=i._calculateValueAndLevel(t.items,e+1),t.value=n,a.push(n),o.push(t.name)):(n=i._getBindData(t,a,o,"value","name"),t.value=n),r+=n}),r},r.prototype._renderPie=function(t,e,i,r,a,o){var n=this._getCenter();this._sliceIndex=0,this._parentRef={},this._renderHierarchicalSlices(t,n.x,n.y,this._processedData,this._sum,i,r,a,2*Math.PI,o,1)},r.prototype._renderHierarchicalSlices=function(t,e,i,r,a,o,n,s,l,h,c){var u,_,d,p,m,f,g,v,C,b,w=r.length,y=s,I=1==this.reversed;d=(o-n)/this._level,u=o-(this._level-c)*d,_=n+(c-1)*d;for(var x=0;x<w;x++){if(v=e,C=i,g=t.startGroup("wj-slice slice-level"+c),1===c&&(t.fill=this._getColorLight(x),t.stroke=this._getColor(x)),m=r[x],f=Math.abs(m.value),p=Math.abs(f-a)<1e-10?l:l*f/a,b=I?y-.5*p:y+.5*p,h>0&&p<l&&(v+=h*Math.cos(b),C+=h*Math.sin(b)),m.items){var L=this._sliceIndex;for(this._renderHierarchicalSlices(t,v,C,m.items,f,o,n,y,p,0,c+1);L<this._sliceIndex;L++)null==this._parentRef[L]&&(this._parentRef[L]=this._sliceIndex)}this._renderSlice(t,v,C,b,0,this._sliceIndex,u,_,y,p,l),this._processedItem.push(m.item),this._sliceIndex++,I?y-=p:y+=p,t.endGroup(),this._pels.push(g)}},r.prototype._getLabelsForLegend=function(){return this._legendLabels||[]},r.prototype._highlightCurrent=function(){this.selectionMode!=t.chart.SelectionMode.None&&this._highlight(!0,this._selectionIndex)},r.prototype.hitTest=function(e,r){var a=i.prototype.hitTest.call(this,e,r),o=this._toControl(e,r);if(t.chart.FlexChartBase._contains(this._rectChart,o)){var n=a.pointIndex,s=this._processedItem[n],l=new t.chart._DataPoint(null,n,null,null);l.item=s,a._setDataPoint(l)}return a},r.prototype._getSelectedItemOffset=function(t,e){var i=0,r=0,a=0;if(this.selectedItemOffset>0)if(t==this.selectedIndex)a=this.selectedItemOffset;else{var o=this._getSelectedParentIndex(t);if(null!=o){var n=this._areas[o];this.dataLabel.position;a=this.selectedItemOffset,e=((e=n.langle+this._rotationAngles[0])%360+360)%360,e*=Math.PI/180}}return a>0&&(i=Math.cos(e)*a*this._radius,r=Math.sin(e)*a*this._radius),{x:i,y:r}},r.prototype._getSelectedParentIndex=function(t){var e=this._parentRef[t];return null!=e?e===this.selectedIndex?e:this._getSelectedParentIndex(e):null},r}(t.chart.FlexPie);e.Sunburst=i}(e.hierarchical||(e.hierarchical={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={})),function(t){!function(e){e.hierarchical||(e.hierarchical={}),t._registerModule("wijmo.chart.hierarchical",t.chart.hierarchical)}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));