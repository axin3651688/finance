/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();import{Control,ObservableArray,addClass,getElement,closest}from"wijmo/wijmo";import{WjDirective,WjLink,MetaFactory,_registerNgModule,softRefInput}from"wijmo/wijmo.angular.base";import*as mNg from"angular";import*as wjcInput from"wijmo/wijmo.input";var wjNg=mNg,wijmoInputName="wj.input";export var ngModuleName=wijmoInputName;var wijmoInput=_registerNgModule(wijmoInputName);softRefInput()&&(wijmoInput.directive("wjAutoComplete",["$compile",function(t){return new WjAutoComplete(t)}]),wijmoInput.directive("wjCalendar",[function(){return new WjCalendar}]),wijmoInput.directive("wjColorPicker",[function(){return new WjColorPicker}]),wijmoInput.directive("wjComboBox",["$compile",function(t){return new WjComboBox(t)}]),wijmoInput.directive("wjInputDate",[function(){return new WjInputDate}]),wijmoInput.directive("wjInputDateTime",[function(){return new WjInputDateTime}]),wijmoInput.directive("wjInputNumber",[function(){return new WjInputNumber}]),wijmoInput.directive("wjInputMask",[function(){return new WjInputMask}]),wijmoInput.directive("wjInputTime",["$compile",function(t){return new WjInputTime(t)}]),wijmoInput.directive("wjInputColor",[function(){return new WjInputColor}]),wijmoInput.directive("wjListBox",[function(){return new WjListBox}]),wijmoInput.directive("wjItemTemplate",["$compile",function(t){return new WjItemTemplate(t)}]),wijmoInput.directive("wjMenu",["$compile",function(t){return new WjMenu(t)}]),wijmoInput.directive("wjMenuItem",[function(t){return new WjMenuItem}]),wijmoInput.directive("wjMenuSeparator",[function(){return new WjMenuSeparator}]),wijmoInput.directive("wjContextMenu",[function(){return new WjContextMenu}]),wijmoInput.directive("wjCollectionViewNavigator",[function(){return new WjCollectionViewNavigator}]),wijmoInput.directive("wjCollectionViewPager",[function(){return new WjCollectionViewPager}]),wijmoInput.directive("wjPopup",[function(){return new WjPopup}]),wijmoInput.directive("wjMultiSelect",["$compile",function(t){return new WjMultiSelect(t)}]),wijmoInput.directive("wjMultiAutoComplete",["$compile",function(t){return new WjMultiAutoComplete(t)}]));var WjDropDown=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.DropDown},enumerable:!0,configurable:!0}),e}(WjDirective);export{WjDropDown};var WjComboBox=function(t){function e(e){var n=t.call(this)||this;return n._$compile=e,n.template="<div ng-transclude />",n.transclude=!0,n}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.ComboBox},enumerable:!0,configurable:!0}),e}(WjDropDown);export{WjComboBox};var WjAutoComplete=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.AutoComplete},enumerable:!0,configurable:!0}),e}(WjComboBox);export{WjAutoComplete};var WjCalendar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.Calendar},enumerable:!0,configurable:!0}),e}(WjDirective);export{WjCalendar};var WjColorPicker=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.ColorPicker},enumerable:!0,configurable:!0}),e}(WjDirective);export{WjColorPicker};var WjListBox=function(t){function e(){var e=t.call(this)||this;return e.transclude=!0,e.template="<div ng-transclude />",e}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.ListBox},enumerable:!0,configurable:!0}),e}(WjDirective);export{WjListBox};var WjItemTemplate=function(t){function e(n){var r=t.call(this)||this;return r._$compile=n,r.require=["?^wjListBox","?^wjMenu"],r.terminal=!0,WjDirective._dynaTemplates?(r.transclude=!1,r.priority=100,r.template=function(t,n){return n[e._itemTemplateProp]=t[0].innerHTML,"<div />"}):(r.transclude=!0,r.template="<div ng-transclude/>"),r}return __extends(e,t),e.prototype._initControl=function(t){return{}},e.prototype._createLink=function(){return new WjItemTemplateLink},e.prototype._getMetaDataId=function(){return"ItemTemplate"},e._itemTemplateProp="$__wjItemTemplate",e._itemScopeProp="$_itemScope",e}(WjDirective);export{WjItemTemplate};var WjItemTemplateLink=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._initParent=function(){t.prototype._initParent.call(this);var e=this.tAttrs[WjItemTemplate._itemTemplateProp],n=this.parent.control,r=this._getListBox();this.itemTemplate=null!=e?e:WjDirective._removeTransclude(this.tElement[0].innerHTML),r.formatItem.addHandler(this._fmtItem,this),r.loadingItems.addHandler(this._loadingItems,this),this.parent._isInitialized&&n.invalidate()},e.prototype._destroy=function(){var e=this.parent&&this.parent.control,n=this._getListBox();n&&(n.formatItem.removeHandler(this._fmtItem,this),n.loadingItems.removeHandler(this._loadingItems,this)),t.prototype._destroy.call(this),this._tmplLink=null,e&&e.invalidate()},e.prototype._loadingItems=function(t){for(var e=t.hostElement.getElementsByClassName("wj-listbox-item"),n=e.length-1;n>=0;n--){var r=e[n],o=r[WjItemTemplate._itemScopeProp];o&&(r[WjItemTemplate._itemScopeProp]=null,o.$destroy())}},e.prototype._fmtItem=function(t,e){this._tmplLink||(this._tmplLink=this.directive._$compile("<div>"+this.itemTemplate+"</div>"));var n=e.item,r=this.scope.$parent.$new();n[WjItemTemplate._itemScopeProp]=r,r.$control=t,r.$item=e.data,r.$itemIndex=e.index;var o=this._tmplLink(r,function(t,e){})[0];1===n.childNodes.length?n.replaceChild(o,n.firstChild):(n.textContent="",n.appendChild(o));clearTimeout(this._closingApplyTimeOut),this._closingApplyTimeOut=setTimeout(function(){r.$root.$$phase||r.$apply()},40)},e._invalidateControl=function(t){t&&t.invalidate()},e.prototype._getListBox=function(){var t=this.parent&&this.parent.control;return t?t instanceof wjcInput.ListBox?t:t.listBox:null},e}(WjLink),WjMenu=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.Menu},enumerable:!0,configurable:!0}),e.prototype._createLink=function(){return new WjMenuLink},e.prototype._initProps=function(){t.prototype._initProps.call(this);var e=this;MetaFactory.findProp("value",this._props).customHandler=function(t,n,r,o,i){e.updateControlValue(t,n,i)}},e.prototype.updateControlValue=function(t,e,n){null!=t.value&&(e.selectedValue=t.value,n.directive.updateHeader(t,e,n))},e.prototype.updateHeader=function(t,e,n){e.header=t.header||"";var r=e.selectedItem;if(void 0!==t.value&&r&&e.displayMemberPath){var o=r[WjMenuItem._itemLinkProp],i=o?o.linkedContent.innerHTML:r[e.displayMemberPath];null!=i&&(e.header+=": <b>"+i+"</b>")}},e}(WjComboBox);export{WjMenu};var WjMenuLink=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._initControl=function(){var t=this,e=new wjcInput.Menu(this.directiveTemplateElement[0],{itemsSource:new ObservableArray,selectedIndex:0,itemClicked:function(){t._safeApply(t.scope,"value",e.selectedValue)||t.scope.$root.$$phase||t.scope.$apply(),t.directive.updateHeader(t.scope,e,t)}.bind(t)});return e.listBox.formatItem.addHandler(t._fmtItem,this),e.listBox.loadingItems.addHandler(this._loadingItems,this),e},e.prototype._initialized=function(){this.directive.updateControlValue(this.scope,this.control,this)},e.prototype._fmtItem=function(t,e){var n=e.data[WjMenuItem._itemLinkProp];if(n){n.contentLink||(n.contentLink=this.directive._$compile("<div>"+n.itemTemplate+"</div>"));var r=this,o=e.item,i=n.scope.$parent.$new();o[WjMenuItem._itemScopeProp]=i,i.$control=this.control,i.$item=e.data,i.$itemIndex=e.index;var u=n.linkedContent=n.contentLink(i,function(t,e){})[0];n.isSeparator&&addClass(o,"wj-state-disabled"),1===o.childNodes.length?o.replaceChild(u,o.firstChild):(o.textContent="",o.appendChild(u));clearTimeout(this._closingApplyTimeOut),this._closingApplyTimeOut=setTimeout(function(){i.$root.$$phase||i.$apply(),r.control.selectedItem&&r.directive.updateHeader(r.scope,r.control,r)},40)}},e.prototype._loadingItems=function(t){for(var e=t.hostElement.getElementsByClassName("wj-listbox-item"),n=e.length-1;n>=0;n--){var r=e[n],o=r[WjMenuItem._itemScopeProp];o&&(r[WjItemTemplate._itemScopeProp]=null,o.$destroy())}},e}(WjLink),WjMenuItem=function(t){function e(){var e=t.call(this)||this;return e.require="^wjMenu",e.terminal=!0,WjDirective._dynaTemplates?(e.transclude=!1,e.priority=100,e.template=function(t,e){return e[WjItemTemplate._itemTemplateProp]=t[0].innerHTML,"<div />"}):(e.transclude=!0,e.template="<div ng-transclude/>"),e}return __extends(e,t),e.prototype._createLink=function(){return new WjMenuItemLink(!1)},e.prototype._getMetaDataId=function(){return"MenuItem"},e.prototype._getId=function(){return e._directiveId},e._itemTemplateProp="$__wjMenuItemTemplate",e._itemScopeProp="$_menuItemScope",e._itemLinkProp="$_menuItemLink",e._directiveId="menuItemDir",e}(WjDirective);export{WjMenuItem};var WjMenuItemLink=function(t){function e(e){var n=t.call(this)||this;return n.isSeparator=e,n}return __extends(e,t),e.prototype._initControl=function(){var t=this.tAttrs[WjItemTemplate._itemTemplateProp];this.itemTemplate=this.isSeparator?'<div class="wj-state-disabled" style="width:100%;height:1px;background-color:lightgray"></div>':null!=t?t:WjDirective._removeTransclude(this.tElement[0].innerHTML);var e={value:null,cmd:null,cmdParam:null,header:this.itemTemplate};return e[WjMenuItem._itemLinkProp]=this,e},e.prototype._initParent=function(){t.prototype._initParent.call(this);var e=this.parent.control;1==e.itemsSource.length&&e.selectedIndex<0&&(e.selectedIndex=0),e.displayMemberPath||(e.displayMemberPath="header"),e.selectedValuePath||(e.selectedValuePath="value"),e.commandPath||(e.commandPath="cmd"),e.commandParameterPath||(e.commandParameterPath="cmdParam")},e.prototype._destroy=function(){var e=this.parent&&this.parent.control;t.prototype._destroy.call(this),e&&e.invalidate()},e}(WjLink),WjMenuSeparator=function(t){function e(){var e=t.call(this)||this;return e.template="<span />",e.require="^wjMenu",e}return __extends(e,t),e.prototype._getMetaDataId=function(){return"MenuSeparator"},e.prototype._createLink=function(){return new WjMenuItemLink(!0)},e.prototype._getId=function(){return WjMenuItem._directiveId},e}(WjDirective);export{WjMenuSeparator};var WjContextMenu=function(t){function e(){var e=t.call(this)||this;return e.template=void 0,e.restrict="A",e.scope=!1,e}return __extends(e,t),e.prototype._getMetaDataId=function(){return"WjContextMenu"},e.prototype._postLinkFn=function(){return function(t,e,n){var r=getElement(n.wjContextMenu);e[0].addEventListener("contextmenu",function(t){var n=Control.getControl(r),o=n.dropDown;n&&o&&!closest(t.target,"[disabled]")&&(t.preventDefault(),n.owner=e[0],n.show(t))})}},e}(WjDirective);export{WjContextMenu};var WjInputDate=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.InputDate},enumerable:!0,configurable:!0}),e}(WjDropDown);export{WjInputDate};var WjInputDateTime=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.InputDateTime},enumerable:!0,configurable:!0}),e}(WjInputDate);export{WjInputDateTime};var WjInputNumber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.InputNumber},enumerable:!0,configurable:!0}),e}(WjDirective);export{WjInputNumber};var WjInputMask=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.InputMask},enumerable:!0,configurable:!0}),e}(WjDirective);export{WjInputMask};var WjInputTime=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.InputTime},enumerable:!0,configurable:!0}),e}(WjComboBox);export{WjInputTime};var WjInputColor=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.InputColor},enumerable:!0,configurable:!0}),e}(WjDropDown);export{WjInputColor};var WjPopup=function(t){function e(){var e=t.call(this)||this;return e.transclude=!0,e.template="<div ng-transclude/>",e}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.Popup},enumerable:!0,configurable:!0}),e.prototype._initProps=function(){t.prototype._initProps.call(this),MetaFactory.findProp("owner",this._props).customHandler=function(t,e,n,r,o){null==t.modal&&(e.modal=!n)}},e}(WjDirective);export{WjPopup};var WjMultiSelect=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.MultiSelect},enumerable:!0,configurable:!0}),e}(WjComboBox);export{WjMultiSelect};var WjMultiAutoComplete=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"_controlConstructor",{get:function(){return wjcInput.MultiAutoComplete},enumerable:!0,configurable:!0}),e}(WjAutoComplete);export{WjMultiAutoComplete};var WjCollectionViewNavigator=function(t){function e(){var e=t.call(this)||this;return e.template='<div class="wj-control wj-content wj-pager"><div class="wj-input-group"><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToFirst()" ng-disabled="cv.currentPosition <= 0"><span class="wj-glyph-left" style="margin-right:-4px"></span><span class="wj-glyph-left"></span> </button></span><span class="wj-input-group-btn"> <button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToPrevious()" ng-disabled="cv.currentPosition <= 0"><span class="wj-glyph-left"></span> </button></span><input type="text" class="wj-form-control" value=" {{cv.currentPosition + 1 | number}} / {{cv.itemCount | number}} " disabled /><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToNext()" ng-disabled="cv.currentPosition >= cv.itemCount - 1"><span class="wj-glyph-right"></span></button></span><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button" ng-click="cv.moveCurrentToLast()" ng-disabled="cv.currentPosition >= cv.itemCount - 1"><span class="wj-glyph-right"></span><span class="wj-glyph-right" style="margin-left:-4px"></span></button></span></div></div>',e}return __extends(e,t),e.prototype._getMetaDataId=function(){return"CollectionViewNavigator"},e.prototype._postLinkFn=function(){return function(t,e,n,r){}},e}(WjDirective);export{WjCollectionViewNavigator};var WjCollectionViewPager=function(t){function e(){var e=t.call(this)||this;return e.template='<div class="wj-control wj-content wj-pager"><div class="wj-input-group"><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToFirstPage()"ng-disabled="cv.pageIndex <= 0"><span class="wj-glyph-left" style="margin-right:-4px"></span><span class="wj-glyph-left"></span></button></span><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToPreviousPage()"ng-disabled="cv.pageIndex <= 0"><span class="wj-glyph-left"></span></button></span><input type="text" class="wj-form-control" value="{{cv.pageIndex + 1 | number}} / {{cv.pageCount | number}}" disabled /><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToNextPage()"ng-disabled="cv.pageIndex >= cv.pageCount - 1"><span class="wj-glyph-right"></span></button></span><span class="wj-input-group-btn"><button class="wj-btn wj-btn-default" type="button"ng-click="cv.moveToLastPage()"ng-disabled="cv.pageIndex >= cv.pageCount - 1"><span class="wj-glyph-right"></span><span class="wj-glyph-right" style="margin-left:-4px"></span></button></span></div></div>',e}return __extends(e,t),e.prototype._getMetaDataId=function(){return"CollectionViewPager"},e.prototype._postLinkFn=function(){return function(t,e,n,r){}},e}(WjDirective);export{WjCollectionViewPager};