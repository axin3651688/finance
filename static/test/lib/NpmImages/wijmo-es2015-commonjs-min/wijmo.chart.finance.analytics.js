/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const wijmo_1=require("wijmo/wijmo"),wijmo_chart_1=require("wijmo/wijmo.chart"),wijmo_chart_finance_1=require("wijmo/wijmo.chart.finance"),selfModule=require("wijmo/wijmo.chart.finance.analytics");function isValid(t){return isFinite(t)&&!isNaN(t)&&wijmo_1.isNumber(t)}class Fibonacci extends wijmo_chart_1.SeriesBase{constructor(t){super(),this._levels=[0,23.6,38.2,50,61.8,100],this._uptrend=!0,this._labelPosition=wijmo_chart_1.LabelPosition.Left,this.rendering.addHandler(this._render),this.initialize(t)}get low(){return this._low}set low(t){t!=this._low&&(this._low=wijmo_1.asNumber(t,!0),this._invalidate())}get high(){return this._high}set high(t){t!=this._high&&(this._high=wijmo_1.asNumber(t,!0),this._invalidate())}get labelPosition(){return this._labelPosition}set labelPosition(t){(t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition,!0))!=this._labelPosition&&(this._labelPosition=t,this._invalidate())}get uptrend(){return this._uptrend}set uptrend(t){t!=this._uptrend&&(this._uptrend=wijmo_1.asBoolean(t,!0),this._invalidate())}get levels(){return this._levels}set levels(t){t!=this._levels&&(this._levels=wijmo_1.asArray(t,!0),this._invalidate())}get minX(){return this._minX}set minX(t){t!=this._minX&&(this._minX=t,this._invalidate())}get maxX(){return this._maxX}set maxX(t){t!=this._maxX&&(this._maxX=t,this._invalidate())}_getMinX(){return wijmo_1.isNumber(this._minX)?this._minX:wijmo_1.isDate(this._minX)?wijmo_1.asDate(this._minX).valueOf():this._getAxisX().actualMin}_getMaxX(){return wijmo_1.isNumber(this._maxX)?this._maxX:wijmo_1.isDate(this._maxX)?wijmo_1.asDate(this._maxX).valueOf():this._getAxisX().actualMax}_updateLevels(){var t=void 0,i=void 0;if(void 0===this._low||void 0===this._high){var e=super.getValues(0),s=super.getValues(1);if(e)for(var a=e.length,r=this._getMinX(),l=this._getMaxX(),_=0;_<a;_++){var h=e[_],n=s?s[_]:_;n<r||n>l||(isNaN(h)||((void 0===t||t>h)&&(t=h),(void 0===i||i<h)&&(i=h)))}}void 0===this._low&&void 0!==t?this._actualLow=t:this._actualLow=this._low,void 0===this._high&&void 0!==i?this._actualHigh=i:this._actualHigh=this._high}_render(t,i){i.cancel=!0;var e=t;e._updateLevels();var s=e._getAxisX(),a=e._getAxisY(),r=i.engine,l=e._getSymbolStroke(e._chart.series.indexOf(e)),_=wijmo_chart_1._BasePlotter.cloneStyle(e.style,["fill"]),h=wijmo_chart_1._BasePlotter.cloneStyle(e.style,["stroke"]),n=e.chart._plotrectId;r.stroke=l,r.strokeWidth=2,r.textFill=l;var o=e._getMinX(),c=e._getMaxX();o<s.actualMin&&(o=s.actualMin),c>s.actualMax&&(c=s.actualMax),r.startGroup(null,n);for(var u=e._levels?e._levels.length:0,m=0;m<u;m++){var d=e._levels[m],g=s.convert(o),w=s.convert(c),p=e.uptrend?a.convert(e._actualLow+.01*d*(e._actualHigh-e._actualLow)):a.convert(e._actualHigh-.01*d*(e._actualHigh-e._actualLow));if(wijmo_chart_1._DataInfo.isValid(g)&&wijmo_chart_1._DataInfo.isValid(w)&&wijmo_chart_1._DataInfo.isValid(p)&&(r.drawLine(g,p,w,p,null,_),e.labelPosition!=wijmo_chart_1.LabelPosition.None)){var j=d.toFixed(1)+"%",v=0;switch((e.uptrend&&0==m||!e.uptrend&&m==u-1)&&(v=2),e.labelPosition){case wijmo_chart_1.LabelPosition.Left:wijmo_chart_1.FlexChartCore._renderText(r,j,new wijmo_1.Point(g,p),0,v,null,null,h);break;case wijmo_chart_1.LabelPosition.Center:wijmo_chart_1.FlexChartCore._renderText(r,j,new wijmo_1.Point(.5*(g+w),p),1,v,null,null,h);break;case wijmo_chart_1.LabelPosition.Right:wijmo_chart_1.FlexChartCore._renderText(r,j,new wijmo_1.Point(w,p),2,v,null,null,h)}}}r.stroke=null,r.strokeWidth=null,r.textFill=null,r.endGroup()}_getChartType(){return wijmo_chart_1.ChartType.Line}}exports.Fibonacci=Fibonacci;class FibonacciArcs extends wijmo_chart_1.SeriesBase{constructor(t){super(),this._levels=[38.2,50,61.8],this._labelPosition=wijmo_chart_1.LabelPosition.Top,this.rendering.addHandler(this._render,this),this.initialize(t)}get start(){return this._start}set start(t){t!==this.start&&(this._start=wijmo_1.asType(t,wijmo_chart_1.DataPoint),this._invalidate())}get end(){return this._end}set end(t){t!==this.end&&(this._end=wijmo_1.asType(t,wijmo_chart_1.DataPoint),this._invalidate())}get levels(){return this._levels}set levels(t){t!==this._levels&&(this._levels=wijmo_1.asArray(t,!1),this._invalidate())}get labelPosition(){return this._labelPosition}set labelPosition(t){(t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition))!==this.labelPosition&&(this._labelPosition=t,this._invalidate())}_render(t,i){i.cancel=!0;var e=this._getX(0),s=this._getY(0),a=this._getX(1),r=this._getY(1);if(!(super._getLength()<=1)&&isValid(e)&&isValid(s)&&isValid(a)&&isValid(r)){var l,_=this._getAxisX(),h=this._getAxisY(),n=i.engine,o=this.chart.series.indexOf(this),c=this._getSymbolStroke(o),u=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),m=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["stroke"]);n.stroke=c,n.strokeWidth=2,n.textFill=c;var d,g,w,p,j,v,V,x,f,y=this.chart._plotrectId,P=r-s;l=n.startGroup(null,y),wijmo_1.addClass(l,"fibonacci-arcs"),isValid(e)&&isValid(s)&&isValid(a)&&isValid(r)&&n.drawLines([_.convert(e),_.convert(a)],[h.convert(s),h.convert(r)],null,u),p=Math.sqrt(Math.pow(_.convert(a)-_.convert(e),2)+Math.pow(h.convert(r)-h.convert(s),2)),v=new wijmo_1.Point(a,r);for(var b=0;b<this.levels.length;b++)if(V=.01*this.levels[b],j=Math.abs(p*V),isValid(v.x)&&isValid(v.y)&&isValid(j)&&(d=_.convert(v.x),g=h.convert(v.y),n.drawDonutSegment(d,g,j,j,P>0?0:Math.PI,Math.PI,null,u),this.labelPosition!==wijmo_chart_1.LabelPosition.None&&0!==V)){switch(f=wijmo_1.Globalize.format(V,"p1"),x=n.measureString(f,null,null,m),w=P<=0?g-j:g+j,this.labelPosition){case wijmo_chart_1.LabelPosition.Center:w+=.5*x.height;break;case wijmo_chart_1.LabelPosition.Bottom:w+=P<=0?x.height:0;break;default:w+=P<=0?0:x.height}n.drawString(f,new wijmo_1.Point(d-.5*x.width,w),null,m)}n.stroke=null,n.strokeWidth=null,n.textFill=null,n.endGroup()}}_getX(t){var i=null;return 0===t&&this.start?i=this.start.x:1===t&&this.end&&(i=this.end.x),wijmo_1.isDate(i)&&(i=wijmo_1.asDate(i).valueOf()),i}_getY(t){var i=null;return 0===t&&this.start?i=this.start.y:1===t&&this.end&&(i=this.end.y),i}_getChartType(){return wijmo_chart_1.ChartType.Line}}exports.FibonacciArcs=FibonacciArcs;class FibonacciFans extends wijmo_chart_1.SeriesBase{constructor(t){super(),this._levels=[0,23.6,38.2,50,61.8,100],this._labelPosition=wijmo_chart_1.LabelPosition.Top,this.rendering.addHandler(this._render,this),this.initialize(t)}get start(){return this._start}set start(t){t!==this.start&&(this._start=wijmo_1.asType(t,wijmo_chart_1.DataPoint),this._invalidate())}get end(){return this._end}set end(t){t!==this.end&&(this._end=wijmo_1.asType(t,wijmo_chart_1.DataPoint),this._invalidate())}get levels(){return this._levels}set levels(t){t!==this._levels&&(this._levels=wijmo_1.asArray(t,!1),this._invalidate())}get labelPosition(){return this._labelPosition}set labelPosition(t){(t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition))!==this.labelPosition&&(this._labelPosition=t,this._invalidate())}_updateLevels(){if(!this.start||!this.end){var t,i,e,s,a=this.chart._getPlotter(this),r=this._getAxisX(),l=super.getValues(0),_=super.getValues(1)||a.dataInfo.getXVals();l&&l.length>0&&(e=wijmo_chart_finance_1._minimum(l),s=wijmo_chart_finance_1._maximum(l)),_&&_.length>0?(t=wijmo_chart_finance_1._minimum(_),i=wijmo_chart_finance_1._maximum(_)):(t=r.actualMin,i=r.actualMax),isValid(t)&&isValid(e)&&isValid(i)&&isValid(s)&&(this.start=new wijmo_chart_1.DataPoint(t,e),this.end=new wijmo_chart_1.DataPoint(i,s))}}_render(t,i){i.cancel=!0,this._updateLevels();var e=this._getX(0),s=this._getY(0),a=this._getX(1),r=this._getY(1);if(!(super._getLength()<=1)&&isValid(e)&&isValid(s)&&isValid(a)&&isValid(r)){var l=this._getAxisX(),_=this._getAxisY(),h=this.chart.series.indexOf(this),n=i.engine,o=this._getSymbolStroke(h),c=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),u=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["stroke"]);n.stroke=o,n.strokeWidth=2,n.textFill=o;var m,d,g,w,p,j,v,V,x,f,y,P,b,k=r-s,L=a-e,X=this.chart._plotrectId;m=e,g=s,w=r;var M=d=a;n.startGroup(null,X);for(var B=0;B<this.levels.length;B++)if(d=L<0?l.actualMin:l.actualMax,w=(V=((w=g+(f=.01*this.levels[B])*k)-g)/(M-m))*d+(x=w-V*M),k>0&&w>_.actualMax?d=((w=_.actualMax)-x)/V:k<0&&w<_.actualMin&&(d=((w=_.actualMin)-x)/V),isValid(m)&&isValid(g)&&isValid(d)&&isValid(w)&&(p=new wijmo_1.Point(l.convert(m),_.convert(g)),j=new wijmo_1.Point(l.convert(d),_.convert(w)),n.drawLines([p.x,j.x],[p.y,j.y],null,c),this.labelPosition!=wijmo_chart_1.LabelPosition.None)){y=wijmo_1.Globalize.format(f,"p1"),P=n.measureString(y,null,null,u),b=180*Math.atan((j.y-p.y)/(j.x-p.x))/Math.PI,v=j.clone(),j.x=L>0?j.x-P.width:j.x;var I,C=b*Math.PI/180,S=new wijmo_1.Point,A=new wijmo_1.Point,D=new wijmo_1.Point,T=new wijmo_1.Point,Y=_.convert(_.actualMin),O=_.convert(_.actualMax),W=l.convert(l.actualMin),R=l.convert(l.actualMax),N=v.clone();switch(this.labelPosition){case wijmo_chart_1.LabelPosition.Center:j.y+=.5*P.height,N.y+=.5*P.height;break;case wijmo_chart_1.LabelPosition.Bottom:j.y+=P.height}L>0?(this.labelPosition===wijmo_chart_1.LabelPosition.Top||this.labelPosition===wijmo_chart_1.LabelPosition.Center?(T=N.clone(),D.x=T.x+P.height*Math.sin(C),D.y=T.y-P.height*Math.cos(C),S.x=T.x-P.width*Math.cos(C)+P.height*Math.sin(C),S.y=T.y-P.width*Math.sin(C)-P.height*Math.cos(C),A.x=T.x-P.width*Math.cos(C),A.y=T.y-P.width*Math.sin(C)):this.labelPosition===wijmo_chart_1.LabelPosition.Bottom&&(D=N.clone(),S.x=D.x-P.width*Math.cos(C),S.y=D.y-P.width*Math.sin(C),A.x=S.x-P.height*Math.sin(C),A.y=S.y+P.height*Math.cos(C),T.x=S.x+P.width*Math.cos(C)-P.height*Math.sin(C),T.y=S.y+P.width*Math.sin(C)+P.height*Math.cos(C)),k>0?(D.y<O&&(V=(_.convertBack(D.y)-_.convertBack(S.y))/(l.convertBack(D.x)-l.convertBack(S.x)),x=_.convertBack(D.y)-V*l.convertBack(D.x),I=l.convert((_.actualMax-x)/V),j.x-=Math.abs(D.x-I)),T.x>R&&(j.x-=Math.abs(R-T.x))):k<0&&(T.y>Y&&(V=(_.convertBack(A.y)-_.convertBack(T.y))/(l.convertBack(A.x)-l.convertBack(T.x)),x=_.convertBack(T.y)-V*l.convertBack(T.x),I=l.convert((_.actualMin-x)/V),j.x-=Math.max(Math.abs(I-T.x),Math.abs(Y-T.y))),D.x>R&&(j.x-=Math.abs(R-D.x)))):L<0&&(this.labelPosition===wijmo_chart_1.LabelPosition.Top||this.labelPosition===wijmo_chart_1.LabelPosition.Center?(A=N.clone(),S.x=A.x+P.height*Math.sin(C),S.y=A.y-P.height*Math.cos(C),T.x=A.x+P.width*Math.cos(C),T.y=A.y+P.width*Math.sin(C),D.x=S.x+P.width*Math.cos(C),D.y=S.y+P.width*Math.sin(C)):this.labelPosition===wijmo_chart_1.LabelPosition.Bottom&&(S=N.clone(),D.x=S.x+P.width*Math.cos(C),D.y=S.y+P.width*Math.sin(C),A.x=S.x-P.height*Math.sin(C),A.y=S.y+P.height*Math.cos(C),T.x=S.x+P.width*Math.cos(C)-P.height*Math.sin(C),T.y=S.y+P.width*Math.sin(C)+P.height*Math.cos(C)),k>0?(S.y<O&&(V=(_.convertBack(S.y)-_.convertBack(D.y))/(l.convertBack(S.x)-l.convertBack(D.x)),x=_.convertBack(S.y)-V*l.convertBack(S.x),I=l.convert((_.actualMax-x)/V),j.x+=Math.abs(S.x-I)),A.x<W&&(j.x+=Math.abs(W-A.x))):k<0&&(A.y>Y&&(V=(_.convertBack(T.y)-_.convertBack(A.y))/(l.convertBack(T.x)-l.convertBack(A.x)),x=_.convertBack(A.y)-V*l.convertBack(A.x),I=l.convert((_.actualMin-x)/V),j.x+=Math.max(Math.abs(I-A.x),Math.abs(Y-A.y))),S.x<W&&(j.x+=Math.abs(W-S.x)))),0===b?n.drawString(y,j,null,u):n.drawStringRotated(y,j,v,b,null,u)}n.stroke=null,n.strokeWidth=null,n.textFill=null,n.endGroup()}}_getX(t){var i=null;return 0===t&&this.start?i=this.start.x:1===t&&this.end&&(i=this.end.x),wijmo_1.isDate(i)&&(i=wijmo_1.asDate(i).valueOf()),i}_getY(t){var i=null;return 0===t&&this.start?i=this.start.y:1===t&&this.end&&(i=this.end.y),i}_getChartType(){return wijmo_chart_1.ChartType.Line}}exports.FibonacciFans=FibonacciFans;class FibonacciTimeZones extends wijmo_chart_1.SeriesBase{constructor(t){super(),this._levels=[0,1,2,3,5,8,13,21,34],this._labelPosition=wijmo_chart_1.LabelPosition.Right,this.rendering.addHandler(this._render,this),this.initialize(t)}get startX(){return this._startX}set startX(t){t!==this.startX&&(wijmo_1.isDate(t)?this._startX=wijmo_1.asDate(t):this._startX=wijmo_1.asNumber(t),this._invalidate())}get endX(){return this._endX}set endX(t){t!==this.endX&&(wijmo_1.isDate(t)?this._endX=wijmo_1.asDate(t):this._endX=wijmo_1.asNumber(t),this._invalidate())}get levels(){return this._levels}set levels(t){t!==this._levels&&(this._levels=wijmo_1.asArray(t,!1),this._invalidate())}get labelPosition(){return this._labelPosition}set labelPosition(t){(t=wijmo_1.asEnum(t,wijmo_chart_1.LabelPosition))!==this.labelPosition&&(this._labelPosition=t,this._invalidate())}_render(t,i){i.cancel=!0,this._updateLevels();var e=this._getX(0),s=this._getX(1);if(!(super._getLength()<=1)&&isValid(e)&&isValid(s)){var a,r,l,_,h=s-e,n=this._getAxisX(),o=this._getAxisY(),c=this._chart.series.indexOf(this),u=i.engine,m=this._getSymbolStroke(c),d=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),g=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["stroke"]),w=o.convert(o.actualMin),p=o.convert(o.actualMax),j=this.chart._plotrectId;if(u.stroke=m,u.strokeWidth=2,u.textFill=m,0!==h){u.startGroup(null,j);for(var v=0;v<this.levels.length;v++)if(!((r=h*(a=this.levels[v])+e)<n.actualMin||n.actualMax<r)&&isValid(r)&&(r=n.convert(r),u.drawLine(r,w,r,p,null,d),this.labelPosition!==wijmo_chart_1.LabelPosition.None)){switch(_=wijmo_1.Globalize.format(a,"n0"),l=u.measureString(_,null,null,g),this.labelPosition){case wijmo_chart_1.LabelPosition.Left:r-=l.width+2;break;case wijmo_chart_1.LabelPosition.Center:r-=l.width/2;break;case wijmo_chart_1.LabelPosition.Right:r+=2;break;default:r=h<0?r-l.width-2:r+2}u.drawString(_,new wijmo_1.Point(r,w),null,g)}u.stroke=null,u.strokeWidth=null,u.textFill=null,u.endGroup()}}}_updateLevels(){var t=this.chart._getPlotter(this),i=super.getValues(1)||t.dataInfo.getXVals();if(!(super._getLength()<=1)){var e=this._getX(0),s=this._getX(1),a=wijmo_1.isNumber(e)&&wijmo_1.isNumber(s);a||i?!a&&i&&(this._startX=i[0],this._endX=i[1]):(this._startX=0,this._endX=1)}}_getX(t){var i=null;return 0===t?i=this.startX:1===t&&(i=this.endX),wijmo_1.isDate(i)&&(i=wijmo_1.asDate(i).valueOf()),i}_getChartType(){return wijmo_chart_1.ChartType.Line}}exports.FibonacciTimeZones=FibonacciTimeZones;class OverlayIndicatorBase extends wijmo_chart_1.SeriesBase{constructor(t){super(t),this._seriesCount=1}get _hitTester(){return this._plotter&&!this.__hitTester&&(this.__hitTester=this._plotter.hitTester),this.__hitTester}_getChartType(){return wijmo_chart_1.ChartType.Line}_getXValues(){return super.getValues(1)||this._plotter.dataInfo.getXVals()}_getDataPoint(t,i,e,s,a,r){var l=new wijmo_chart_1._DataPoint(e,s,t,i);return l.y=i,l.yfmt=r._formatValue(i),l.x=t,l.xfmt=a._formatValue(t),l}_shouldCalculate(){return!0}_init(){}_calculate(){}_clearValues(){super._clearValues(),this.__hitTester=null}_getName(t){var i=void 0;if(this.name)if(this.name.indexOf(",")){var e=this.name.split(",");e&&e.length-1>=t&&(i=e[t].trim())}else i=this.name;return i}_getStyles(t){var i=null;if(t<0||null===this._styles)return i;var e=0;for(var s in this._styles){if(e===t&&this._styles.hasOwnProperty(s)){i=this._styles[s];break}e++}return i}legendItemLength(){return this._seriesCount}measureLegendItem(t,i){var e=this._getName(i),s=new wijmo_1.Size(0,0);return e&&(s=this._measureLegendItem(t,this._getName(i))),s}drawLegendItem(t,i,e){var s=this._getStyles(e)||this.style;this._getName(e)&&this._drawLegendItem(t,i,this._getChartType(),this._getName(e),s,this.symbolStyle)}}exports.OverlayIndicatorBase=OverlayIndicatorBase;class SingleOverlayIndicatorBase extends OverlayIndicatorBase{constructor(t){super(t),this._period=14}get period(){return this._period}set period(t){t!==this._period&&(this._period=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}getValues(t){var i=null;return super._getLength()<=0?i:(this._shouldCalculate()&&(this._init(),this._calculate()),0===t?i=this._yvals:1===t&&(i=this._xvals),i)}getDataRect(t,i){if(i)return i;var e=null;if(super._getLength()<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var s=wijmo_chart_finance_1._minimum(this._xvals),a=wijmo_chart_finance_1._maximum(this._xvals),r=wijmo_chart_finance_1._minimum(this._yvals),l=wijmo_chart_finance_1._maximum(this._yvals);return wijmo_chart_1._DataInfo.isValid(s)&&wijmo_chart_1._DataInfo.isValid(a)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&(e=new wijmo_1.Rect(s,r,a-s,l-r)),e}_clearValues(){super._clearValues(),this._xvals=null,this._yvals=null}_shouldCalculate(){return!this._yvals||!this._xvals}_init(){super._init(),this._yvals=[],this._xvals=[]}_getItem(t){return super._getLength()<=0?super._getItem(t):(this._shouldCalculate()&&(this._init(),this._calculate()),t=super._getLength()-wijmo_chart_finance_1._minimum(this._yvals.length,this._xvals.length)+t,super._getItem(t))}}exports.SingleOverlayIndicatorBase=SingleOverlayIndicatorBase;class WilliamsR extends SingleOverlayIndicatorBase{constructor(t){super(),this.period=14,this.initialize(t)}_calculate(){var t=super._getLength();if(!(t<=0)){var i=super._getBindingValues(0),e=super._getBindingValues(1),s=super._getBindingValues(3),a=this._getXValues();this._yvals=_williamsR(i,e,s,this.period),this._xvals=a?a.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,t-1)}}}function _williamsR(t,i,e,s){wijmo_1.asArray(t,!1),wijmo_1.asArray(i,!1),wijmo_1.asArray(e,!1),wijmo_1.asInt(s,!1,!0);var a,r=wijmo_chart_finance_1._minimum(t.length,i.length,e.length),l=[],_=[],h=[];for(wijmo_1.assert(r>s&&s>1,"Williams %R period must be an integer less than the length of the data and greater than one."),a=s;a<=t.length;a++)l.push(wijmo_chart_finance_1._maximum(t.slice(a-s,a))),_.push(wijmo_chart_finance_1._minimum(i.slice(a-s,a)));for(e.splice(0,s-1),a=0;a<l.length;a++)h.push((l[a]-e[a])/(l[a]-_[a])*-100);return h}exports.WilliamsR=WilliamsR,exports._williamsR=_williamsR;class Stochastic extends OverlayIndicatorBase{constructor(t){super(),this._kPeriod=14,this._dPeriod=3,this._smoothingPeriod=1,this._seriesCount=2,this.rendering.addHandler(this._rendering,this),this.initialize(t)}get kPeriod(){return this._kPeriod}set kPeriod(t){t!==this._kPeriod&&(this._kPeriod=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get dPeriod(){return this._dPeriod}set dPeriod(t){t!==this._dPeriod&&(this._dPeriod=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get smoothingPeriod(){return this._smoothingPeriod}set smoothingPeriod(t){t!==this._smoothingPeriod&&(this._smoothingPeriod=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get styles(){return this._styles}set styles(t){t!==this._styles&&(this._styles=t,this._invalidate())}getDataRect(t,i){if(i)return i;var e=null;if(super._getLength()<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var s=this._kVals.concat(this._dVals),a=this._kXVals.concat(this._dXVals),r=wijmo_chart_finance_1._minimum(a),l=wijmo_chart_finance_1._maximum(a),_=wijmo_chart_finance_1._minimum(s),h=wijmo_chart_finance_1._maximum(s);return wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&wijmo_chart_1._DataInfo.isValid(_)&&wijmo_chart_1._DataInfo.isValid(h)&&(e=new wijmo_1.Rect(r,_,l-r,h-_)),e}_clearValues(){super._clearValues(),this._kVals=null,this._kXVals=null,this._dVals=null,this._dXVals=null}_shouldCalculate(){return!(this._kVals&&this._kXVals&&this._dVals&&this._dXVals)}_init(){super._init(),this._kVals=[],this._kXVals=[],this._dVals=[],this._dXVals=[]}_calculate(){var t=super._getLength();if(!(super._getLength()<=0)){var i=super._getBindingValues(0),e=super._getBindingValues(1),s=super._getBindingValues(3),a=this._getXValues(),r=_stochastic(i,e,s,this.kPeriod,this.dPeriod,this.smoothingPeriod);this._kVals=r.ks,this._dVals=r.ds,this._kXVals=a?a.slice(this.kPeriod-1):wijmo_chart_finance_1._range(this.kPeriod-1,t-1),this.smoothingPeriod&&this.smoothingPeriod>1&&(this._kXVals=this._kXVals.slice(this._kXVals.length-this._kVals.length,this._kXVals.length)),this._dXVals=this._kXVals.slice(this._kXVals.length-this._dVals.length,this._kXVals.length)}}_rendering(t,i){if(i.cancel=!0,!(super._getLength()<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var e=this.chart.series.indexOf(this),s=i.engine,a=this._getAxisX(),r=this._getAxisY(),l=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),_=this._getSymbolStroke(e),h=this.chart._plotrectId,n=null,o=_,c=2,u=null,m=_,d=2;this.styles&&wijmo_1.isObject(this.styles)&&(this.styles.kLine&&wijmo_1.isObject(this.styles.kLine)&&(o=(n=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.kLine,["fill"])).stroke?n.stroke:_,c=n.strokeWidth?n.strokeWidth:2),this.styles.dLine&&wijmo_1.isObject(this.styles.dLine)&&(m=(u=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.dLine,["fill"])).stroke?u.stroke:_,d=u.strokeWidth?u.strokeWidth:2));var g,w,p,j,v=[],V=[],x=[],f=[],y=this._getLength();for(p=0;p<this._kVals.length;p++)j=y-this._kVals.length+p,V.push(a.convert(this._kXVals[p])),v.push(r.convert(this._kVals[p])),(g=this._getDataPoint(this._kXVals[p],this._kVals[p],e,j,a,r)).name=this._getName(0),(w=new wijmo_chart_1._CircleArea(new wijmo_1.Point(V[p],v[p]),.5*s.strokeWidth)).tag=g,this._hitTester.add(w,e);for(this._hitTester.add(new wijmo_chart_1._LinesArea(V,v),e),s.stroke=o,s.strokeWidth=c,s.drawLines(V,v,null,l,h),p=0;p<this._dVals.length;p++)j=y-this._dVals.length+p,f.push(a.convert(this._dXVals[p])),x.push(r.convert(this._dVals[p])),(g=this._getDataPoint(this._dXVals[p],this._dVals[p],e,j,a,r)).name=this._getName(1),(w=new wijmo_chart_1._CircleArea(new wijmo_1.Point(f[p],x[p]),.5*s.strokeWidth)).tag=g,this._hitTester.add(w,e);this._hitTester.add(new wijmo_chart_1._LinesArea(f,x),e),s.stroke=m,s.strokeWidth=d,s.drawLines(f,x,null,l,h)}}getCalculatedValues(t){t=wijmo_1.asString(t,!1);var i=[],e=0;if(super._getLength()<=0)return i;switch(this._shouldCalculate()&&(this._init(),this._calculate()),t){case"kLine":for(;e<this._kVals.length;e++)i.push({x:this._kXVals[e],y:this._kVals[e]});break;case"dLine":for(;e<this._dVals.length;e++)i.push({x:this._dXVals[e],y:this._dVals[e]})}return i}}function _stochastic(t,i,e,s,a,r){wijmo_1.asArray(t,!1),wijmo_1.asArray(i,!1),wijmo_1.asArray(e,!1),wijmo_1.asInt(s,!1,!0),wijmo_1.asInt(a,!1,!0),wijmo_1.asInt(r,!0,!0);var l,_=[],h=[],n=[];for(l=s;l<=t.length;l++)_.push(wijmo_chart_finance_1._maximum(t.slice(l-s,l))),h.push(wijmo_chart_finance_1._minimum(i.slice(l-s,l)));for(e=e.slice(s-1),l=0;l<e.length;l++)n.push((e[l]-h[l])/(_[l]-h[l])*100);return r&&r>1&&(n=wijmo_chart_finance_1._sma(n,r)),{ks:n,ds:wijmo_chart_finance_1._sma(n,a)}}exports.Stochastic=Stochastic,exports._stochastic=_stochastic;class RSI extends SingleOverlayIndicatorBase{constructor(t){super(),this.period=14,this.initialize(t)}_calculate(){var t=super._getLength();if(!(t<=0)){var i=super._getBindingValues(0),e=this._getXValues();this._yvals=_rsi(i,this.period),this._xvals=e?e.slice(this.period):wijmo_chart_finance_1._range(this.period,t)}}}function _rsi(t,i){wijmo_1.asArray(t,!1),wijmo_1.asInt(i,!0,!1),wijmo_1.assert(t.length>i&&i>1,"RSI period must be an integer less than the length of the data and greater than one.");var e,s,a,r,l=[],_=[],h=[],n=[];for(r=1;r<t.length;r++)l.push(t[r]-t[r-1]);for(e=l.map(t=>t>0?t:0),s=l.map(t=>t<0?Math.abs(t):0),r=i;r<=l.length;r++)r===i?(_.push(wijmo_chart_finance_1._sum(e.slice(r-i,r))/i),h.push(wijmo_chart_finance_1._sum(s.slice(r-i,r))/i)):(_.push((e[r-1]+_[r-i-1]*(i-1))/i),h.push((s[r-1]+h[r-i-1]*(i-1))/i)),a=_[r-i]/h[r-i],a=isFinite(a)?a:0,n.push(100-100/(1+a));return n}exports.RSI=RSI,exports._rsi=_rsi;class MacdBase extends OverlayIndicatorBase{constructor(t){super(t),this._fastPeriod=12,this._slowPeriod=26,this._smoothingPeriod=9}get fastPeriod(){return this._fastPeriod}set fastPeriod(t){t!==this._fastPeriod&&(this._fastPeriod=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get slowPeriod(){return this._slowPeriod}set slowPeriod(t){t!==this._slowPeriod&&(this._slowPeriod=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get smoothingPeriod(){return this._smoothingPeriod}set smoothingPeriod(t){t!==this._smoothingPeriod&&(this._smoothingPeriod=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}_clearValues(){super._clearValues(),this._macdVals=null,this._macdXVals=null,this._signalVals=null,this._signalXVals=null,this._histogramVals=null,this._histogramXVals=null}_shouldCalculate(){return!(this._macdVals&&this._macdXVals&&this._signalVals&&this._signalXVals&&this._histogramVals&&this._histogramXVals)}_init(){super._init(),this._macdVals=[],this._macdXVals=[],this._signalVals=[],this._signalXVals=[],this._histogramVals=[],this._histogramXVals=[]}_calculate(){var t=super._getLength();if(!(t<=0)){var i=super.getValues(0),e=this._getXValues(),s=_macd(i,this.fastPeriod,this.slowPeriod,this.smoothingPeriod);this._macdVals=s.macds,this._signalVals=s.signals,this._histogramVals=s.histograms,this._macdXVals=e?e.slice(t-this._macdVals.length,t):wijmo_chart_finance_1._range(t-this._macdVals.length,t-1),this._signalXVals=e?e.slice(t-this._signalVals.length,t):wijmo_chart_finance_1._range(t-this._signalVals.length,t-1),this._histogramXVals=e?e.slice(t-this._histogramVals.length,t):wijmo_chart_finance_1._range(t-this._histogramVals.length,t-1)}}}exports.MacdBase=MacdBase;class Macd extends MacdBase{constructor(t){super(),this._seriesCount=2,this.rendering.addHandler(this._rendering,this),this.initialize(t)}get styles(){return this._styles}set styles(t){t!==this._styles&&(this._styles=t,this._invalidate())}legendItemLength(){return this.name.indexOf(",")>-1?2:1}getDataRect(t,i){if(i)return i;var e=null;if(super._getLength()<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var s=[],a=[];a.push.apply(a,this._macdXVals),a.push.apply(a,this._signalXVals),s.push.apply(s,this._macdVals),s.push.apply(s,this._signalVals);var r=wijmo_chart_finance_1._minimum(a),l=wijmo_chart_finance_1._maximum(a),_=wijmo_chart_finance_1._minimum(s),h=wijmo_chart_finance_1._maximum(s);return wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&wijmo_chart_1._DataInfo.isValid(_)&&wijmo_chart_1._DataInfo.isValid(h)&&(e=new wijmo_1.Rect(r,_,l-r,h-_)),e}_rendering(t,i){if(i.cancel=!0,!(super._getLength()<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var e=this.chart.series.indexOf(this),s=i.engine,a=this._getAxisX(),r=this._getAxisY(),l=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),_=this._getSymbolStroke(e),h=this.chart._plotrectId,n=null,o=_,c=2,u=null,m=_,d=2;this.styles&&wijmo_1.isObject(this.styles)&&(this.styles.macdLine&&wijmo_1.isObject(this.styles.macdLine)&&(o=(n=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.macdLine,["fill"])).stroke?n.stroke:_,c=n.strokeWidth?n.strokeWidth:2),this.styles.signalLine&&wijmo_1.isObject(this.styles.signalLine)&&(m=(u=wijmo_chart_1._BasePlotter.cloneStyle(this.styles.signalLine,["fill"])).stroke?u.stroke:_,d=u.strokeWidth?u.strokeWidth:2));var g,w,p,j,v=[],V=[],x=[],f=[],y=this._getLength();for(p=0;p<this._macdVals.length;p++)j=y-this._macdVals.length+p,V.push(a.convert(this._macdXVals[p])),v.push(r.convert(this._macdVals[p])),(g=this._getDataPoint(this._macdXVals[p],this._macdVals[p],e,j,a,r)).name=this._getName(0),(w=new wijmo_chart_1._CircleArea(new wijmo_1.Point(V[p],v[p]),.5*s.strokeWidth)).tag=g,this._hitTester.add(w,e);for(this._hitTester.add(new wijmo_chart_1._LinesArea(V,v),e),s.stroke=o,s.strokeWidth=c,s.drawLines(V,v,null,l,h),p=0;p<this._signalVals.length;p++)j=y-this._signalVals.length+p,f.push(a.convert(this._signalXVals[p])),x.push(r.convert(this._signalVals[p])),(g=this._getDataPoint(this._signalXVals[p],this._signalVals[p],e,j,a,r)).name=this._getName(1),(w=new wijmo_chart_1._CircleArea(new wijmo_1.Point(f[p],x[p]),.5*s.strokeWidth)).tag=g,this._hitTester.add(w,e);this._hitTester.add(new wijmo_chart_1._LinesArea(f,x),e),s.stroke=m,s.strokeWidth=d,s.drawLines(f,x,null,l,h)}}getCalculatedValues(t){t=wijmo_1.asString(t,!1);var i=[],e=0;if(super._getLength()<=0)return i;switch(this._shouldCalculate()&&(this._init(),this._calculate()),t){case"macdLine":for(;e<this._macdVals.length;e++)i.push({x:this._macdXVals[e],y:this._macdVals[e]});break;case"signalLine":for(;e<this._signalVals.length;e++)i.push({x:this._signalXVals[e],y:this._signalVals[e]})}return i}}exports.Macd=Macd;class MacdHistogram extends MacdBase{constructor(t){super(t)}getValues(t){var i=null;return super._getLength()<=0?i:(this._shouldCalculate()&&(this._init(),this._calculate()),0===t?i=this._histogramVals:1===t&&(i=this._histogramXVals),i)}getDataRect(t,i){if(i)return i;var e=null;if(super._getLength()<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var s=wijmo_chart_finance_1._minimum(this._histogramXVals),a=wijmo_chart_finance_1._maximum(this._histogramXVals),r=wijmo_chart_finance_1._minimum(this._histogramVals),l=wijmo_chart_finance_1._maximum(this._histogramVals);return wijmo_chart_1._DataInfo.isValid(s)&&wijmo_chart_1._DataInfo.isValid(a)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&(e=new wijmo_1.Rect(s,r,a-s,l-r)),e}_getChartType(){return wijmo_chart_1.ChartType.Column}_getItem(t){return t=super._getLength()-wijmo_chart_finance_1._minimum(this._histogramVals.length,this._histogramXVals.length)+t,super._getItem(t)}}function _macd(t,i,e,s){wijmo_1.asArray(t,!1),wijmo_1.asInt(i,!1,!0),wijmo_1.asInt(e,!1,!0),wijmo_1.asInt(s,!1,!0);var a,r=i>e;r&&(a=e,e=i,i=a);var l,_,h=wijmo_chart_finance_1._ema(t,i),n=wijmo_chart_finance_1._ema(t,e),o=[],c=[];for(h.splice(0,e-i),_=0;_<h.length;_++)a=h[_]-n[_],r&&(a*=-1),o.push(a);l=wijmo_chart_finance_1._ema(o,s);var u=o.slice(o.length-l.length,o.length);for(_=0;_<u.length;_++)c.push(u[_]-l[_]);return{macds:o,signals:l,histograms:c}}var MovingAverageType;exports.MacdHistogram=MacdHistogram,exports._macd=_macd,function(t){t[t.Simple=0]="Simple",t[t.Exponential=1]="Exponential"}(MovingAverageType=exports.MovingAverageType||(exports.MovingAverageType={}));class Envelopes extends OverlayIndicatorBase{constructor(t){super(),this._period=20,this._type=MovingAverageType.Simple,this._size=.025,this.rendering.addHandler(this._rendering,this),this.initialize(t)}get period(){return this._period}set period(t){t!==this._period&&(this._period=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get type(){return this._type}set type(t){(t=wijmo_1.asEnum(t,MovingAverageType,!1))!==this._type&&(this._type=t,this._clearValues(),this._invalidate())}get size(){return this._size}set size(t){t!==this._size&&(this._size=wijmo_1.asNumber(t,!1,!0),this._clearValues(),this._invalidate())}getDataRect(t,i){if(i)return i;var e=null;if(super._getLength()<=0)return e;this._shouldCalculate()&&(this._init(),this._calculate());var s=this._upperYVals.concat(this._lowerYVals),a=wijmo_chart_finance_1._minimum(this._xVals),r=wijmo_chart_finance_1._maximum(this._xVals),l=wijmo_chart_finance_1._minimum(s),_=wijmo_chart_finance_1._maximum(s);return wijmo_chart_1._DataInfo.isValid(a)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)&&wijmo_chart_1._DataInfo.isValid(_)&&(e=new wijmo_1.Rect(a,l,r-a,_-l)),e}_clearValues(){super._clearValues(),this._upperYVals=null,this._lowerYVals=null,this._xVals=null}_init(){super._init(),this._upperYVals=[],this._lowerYVals=[],this._xVals=[]}_shouldCalculate(){return!this._upperYVals||!this._lowerYVals||!this._xVals}_calculate(){if(!(super._getLength()<=0)){var t,i=super.getValues(0),e=this._getXValues();switch(this.type){case MovingAverageType.Exponential:t=wijmo_chart_finance_1._ema(i,this.period);break;case MovingAverageType.Simple:default:t=wijmo_chart_finance_1._sma(i,this.period)}this._xVals=e?e.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,super._getLength()-1),this._upperYVals=t.map(t=>t+t*this.size),this._lowerYVals=t.map(t=>t-t*this.size)}}_rendering(t,i){if(i.cancel=!0,!(super._getLength()<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var e=this.chart.series.indexOf(this),s=i.engine,a=this._getAxisX(),r=this._getAxisY(),l=wijmo_chart_finance_1._minimum(this._upperYVals.length,this._lowerYVals.length,this._xVals.length),_=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),h=this._getSymbolStroke(e),n=this.chart._plotrectId;if(l&&!(l<=0)){s.stroke=h,s.strokeWidth=2;for(var o,c,u,m=[],d=[],g=[],w=this._getLength(),p=0;p<l;p++)u=w-l+p,m.push(a.convert(this._xVals[p])),d.push(r.convert(this._upperYVals[p])),o=this._getDataPoint(this._xVals[p],this._upperYVals[p],e,u,a,r),(c=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[p],d[p]),.5*s.strokeWidth)).tag=o,this._hitTester.add(c,e),g.push(r.convert(this._lowerYVals[p])),o=this._getDataPoint(this._xVals[p],this._lowerYVals[p],e,u,a,r),(c=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[p],g[p]),.5*s.strokeWidth)).tag=o,this._hitTester.add(c,e);this._hitTester.add(new wijmo_chart_1._LinesArea(m,d),e),this._hitTester.add(new wijmo_chart_1._LinesArea(m,g),e),s.drawLines(m,d,null,_,n),s.drawLines(m,g,null,_,n)}}}getCalculatedValues(t){t=wijmo_1.asString(t,!1);var i=[],e=0;if(super._getLength()<=0)return i;switch(this._shouldCalculate()&&(this._init(),this._calculate()),t){case"upperEnvelope":for(;e<this._upperYVals.length;e++)i.push({x:this._xVals[e],y:this._upperYVals[e]});break;case"lowerEnvelope":for(;e<this._lowerYVals.length;e++)i.push({x:this._xVals[e],y:this._lowerYVals[e]})}return i}}exports.Envelopes=Envelopes;class CCI extends SingleOverlayIndicatorBase{constructor(t){super(),this._constant=.015,this.period=20,this.initialize(t)}get constant(){return this._constant}set constant(t){t!==this._constant&&(this._constant=wijmo_1.asNumber(t,!1),this._clearValues(),this._invalidate())}_calculate(){var t=super._getLength();if(!(t<=0)){var i=super._getBindingValues(0),e=super._getBindingValues(1),s=super._getBindingValues(3),a=this._getXValues();this._yvals=_cci(i,e,s,this.period,this.constant),this._xvals=a?a.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,t-1)}}}function _cci(t,i,e,s,a){wijmo_1.asArray(t,!1),wijmo_1.asArray(i,!1),wijmo_1.asArray(e,!1),wijmo_1.asInt(s,!1,!0),wijmo_1.asNumber(a,!1,!0);var r,l,_,h=wijmo_chart_finance_1._minimum(t.length,i.length,e.length),n=[],o=[],c=[];for(wijmo_1.assert(h>s&&s>1,"CCI period must be an integer less than the length of the data and greater than one."),l=0;l<h;l++)n.push(wijmo_chart_finance_1._average(t[l],i[l],e[l]));for(r=wijmo_chart_finance_1._sma(n,s),l=0;l<r.length;l++)_=n.slice(l,s+l).reduce((t,i)=>t+Math.abs(r[l]-i),0),o.push(_/s);for(n.splice(0,s-1),l=0;l<r.length;l++)c.push((n[l]-r[l])/(a*o[l]));return c}exports.CCI=CCI,exports._cci=_cci;class BollingerBands extends OverlayIndicatorBase{constructor(t){super(),this._period=20,this._multiplier=2,this.rendering.addHandler(this._rendering,this),this.initialize(t)}get period(){return this._period}set period(t){t!==this._period&&(this._period=wijmo_1.asInt(t,!1,!0),this._clearValues(),this._invalidate())}get multiplier(){return this._multiplier}set multiplier(t){t!==this._multiplier&&(this._multiplier=wijmo_1.asNumber(t,!1,!0),this._clearValues(),this._invalidate())}getDataRect(t,i){if(i)return i;if(super._getLength()<=0)return null;this._shouldCalculate()&&(this._init(),this._calculate());var e=this._upperYVals.concat(this._lowerYVals),s=wijmo_chart_finance_1._minimum(this._xVals),a=wijmo_chart_finance_1._maximum(this._xVals),r=wijmo_chart_finance_1._minimum(e),l=wijmo_chart_finance_1._maximum(e);return wijmo_chart_1._DataInfo.isValid(s)&&wijmo_chart_1._DataInfo.isValid(a)&&wijmo_chart_1._DataInfo.isValid(r)&&wijmo_chart_1._DataInfo.isValid(l)?new wijmo_1.Rect(s,r,a-s,l-r):null}_clearValues(){super._clearValues(),this._upperYVals=null,this._middleYVals=null,this._lowerYVals=null,this._xVals=null}_shouldCalculate(){return!(this._upperYVals&&this._middleYVals&&this._lowerYVals&&this._xVals)}_init(){super._init(),this._upperYVals=[],this._middleYVals=[],this._lowerYVals=[],this._xVals=[]}_calculate(){var t=super._getLength();if(!(t<=0)){var i=super.getValues(0),e=this._getXValues(),s=_bollingerBands(i,this.period,this.multiplier);this._upperYVals=s.uppers,this._middleYVals=s.middles,this._lowerYVals=s.lowers,this._xVals=e?e.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,t-1)}}_rendering(t,i){if(i.cancel=!0,!(super._getLength()<=0)){this._shouldCalculate()&&(this._init(),this._calculate());var e=this.chart.series.indexOf(this),s=i.engine,a=this._getAxisX(),r=this._getAxisY(),l=wijmo_chart_finance_1._minimum(this._upperYVals.length,this._middleYVals.length,this._lowerYVals.length,this._xVals.length),_=wijmo_chart_1._BasePlotter.cloneStyle(this.style,["fill"]),h=this._getSymbolStroke(e),n=this.chart._plotrectId;if(l&&!(l<=0)){s.stroke=h,s.strokeWidth=2;for(var o,c,u,m=[],d=[],g=[],w=[],p=this._getLength(),j=0;j<l;j++)u=p-l+j,m.push(a.convert(this._xVals[j])),d.push(r.convert(this._upperYVals[j])),o=this._getDataPoint(this._xVals[j],this._upperYVals[j],e,u,a,r),(c=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[j],d[j]),.5*s.strokeWidth)).tag=o,this._hitTester.add(c,e),g.push(r.convert(this._middleYVals[j])),o=this._getDataPoint(this._xVals[j],this._middleYVals[j],e,u,a,r),(c=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[j],g[j]),.5*s.strokeWidth)).tag=o,this._hitTester.add(c,e),w.push(r.convert(this._lowerYVals[j])),o=this._getDataPoint(this._xVals[j],this._lowerYVals[j],e,u,a,r),(c=new wijmo_chart_1._CircleArea(new wijmo_1.Point(m[j],w[j]),.5*s.strokeWidth)).tag=o,this._hitTester.add(c,e);this._hitTester.add(new wijmo_chart_1._LinesArea(m,d),e),this._hitTester.add(new wijmo_chart_1._LinesArea(m,g),e),this._hitTester.add(new wijmo_chart_1._LinesArea(m,w),e),s.drawLines(m,d,null,_,n),s.drawLines(m,g,null,_,n),s.drawLines(m,w,null,_,n)}}}getCalculatedValues(t){t=wijmo_1.asString(t,!1);var i=[],e=0;if(super._getLength()<=0)return i;switch(this._shouldCalculate()&&(this._init(),this._calculate()),t){case"upperBand":for(;e<this._upperYVals.length;e++)i.push({x:this._xVals[e],y:this._upperYVals[e]});break;case"middleBand":for(;e<this._middleYVals.length;e++)i.push({x:this._xVals[e],y:this._middleYVals[e]});break;case"lowerBand":for(;e<this._lowerYVals.length;e++)i.push({x:this._xVals[e],y:this._lowerYVals[e]})}return i}}function _bollingerBands(t,i,e){wijmo_1.asArray(t,!1),wijmo_1.asInt(i,!1,!0),wijmo_1.asNumber(e,!1,!0),wijmo_1.assert(t.length>i&&i>1,"Bollinger Bands period must be an integer less than the length of the data and greater than one.");var s,a=wijmo_chart_finance_1._sma(t,i),r=[];for(s=i;s<=t.length;s++)r.push(wijmo_chart_finance_1._stdDeviation(t.slice(s-i,s)));var l=a,_=a.map((t,i)=>t+r[i]*e);return{lowers:a.map((t,i)=>t-r[i]*e),middles:l,uppers:_}}exports.BollingerBands=BollingerBands,exports._bollingerBands=_bollingerBands;class ATR extends SingleOverlayIndicatorBase{constructor(t){super(),this.period=14,this.initialize(t)}_calculate(){if(!(super._getLength()<=0)){var t=super._getBindingValues(0),i=super._getBindingValues(1),e=super._getBindingValues(3),s=this._getXValues();this._yvals=wijmo_chart_finance_1._avgTrueRng(t,i,e,this.period),this._xvals=s?s.slice(this.period-1):wijmo_chart_finance_1._range(this.period-1,t.length)}}}exports.ATR=ATR,wijmo_1._registerModule("wijmo.chart.finance.analytics",selfModule);