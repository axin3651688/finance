/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const wijmo_1=require("wijmo/wijmo"),wijmo_meta_1=require("wijmo/wijmo.meta"),mNg=require("angular");class MetaFactory extends wijmo_meta_1.ControlMetaFactory{static CreateProp(e,t,i,r,s,o){return new PropDesc(e,t,i,r,s,o)}static CreateEvent(e,t){return new EventDesc(e,t)}static CreateComplexProp(e,t,i){return new ComplexPropDesc(e,t,i)}static findProp(e,t){return wijmo_meta_1.ControlMetaFactory.findProp(e,t)}static findEvent(e,t){return wijmo_meta_1.ControlMetaFactory.findEvent(e,t)}static findComplexProp(e,t){return wijmo_meta_1.ControlMetaFactory.findComplexProp(e,t)}}exports.MetaFactory=MetaFactory;class PropDesc extends wijmo_meta_1.PropDescBase{constructor(e,t,i,r,s,o){super(e,t,i,r,s,o),this._scopeBindingMode=this.propertyType===wijmo_meta_1.PropertyType.EventHandler?"&":this.bindingMode==wijmo_meta_1.BindingMode.OneWay&&wijmo_meta_1.isSimpleType(this.propertyType)?"@":"="}get scopeBindingMode(){return this._scopeBindingMode}set scopeBindingMode(e){this._scopeBindingMode=e}get customHandler(){return this._customHandler}set customHandler(e){this._customHandler=e}}exports.PropDesc=PropDesc;class EventDesc extends wijmo_meta_1.EventDescBase{}exports.EventDesc=EventDesc;class ComplexPropDesc extends wijmo_meta_1.ComplexPropDescBase{}exports.ComplexPropDesc=ComplexPropDesc;var wjNg=mNg;const _ngModules=[];function _registerNgModule(e){let t=wjNg.module(e,[]);return _ngModules.push(e),t}function getNgModules(){return _ngModules.slice()}exports._registerNgModule=_registerNgModule,exports.getNgModules=getNgModules;class WjDirective{constructor(){this.replace=!0,this.restrict="E",this.template="<div />",this.transclude=!1,this._props=[],this._events=[],this._complexProps=[];var e=this;this._dirId=++WjDirective._dirIdCounter+"",this.link=this._postLinkFn(),this.controller=["$scope","$parse","$element",function(t,i,r){e._$parse=i,r[0][WjDirective._elemScopeProp]=t,this[WjDirective._cntrlScopeProp]=t,t[WjDirective._scopeChildrenProp]=[],e._controllerImpl(this,t,r)}],this._initDirective()}static _versionOk(e){var t=wjNg.version,i=[t.major,t.minor,t.dot],r=e.split(".");if(r.length!==i.length)throw"Unrecognizable version number.";for(var s=0;s<r.length;s++){if(i[s]<r[s])return!1;if(i[s]>r[s])return!0}return!0}get _controlConstructor(){throw"Abstract method call"}_getMetaDataId(){return this._controlConstructor}_getMetaData(){return MetaFactory.getMetaData(this._getMetaDataId())}_initDirective(){this._initSharedMeta(),this._prepareProps(),this._initEvents(),this._initScopeEvents(),this._initScopeDescription()}_initSharedMeta(){var e=this._getMetaData();this._props=e.props,this._events=e.events,this._complexProps=e.complexProps,this._property=e.parentProperty,this._isPropertyArray=e.isParentPropertyArray,this._ownObject=e.ownsObject,this._parentReferenceProperty=e.parentReferenceProperty,this._ngModelProperty=e.ngModelProperty}_initProps(){}_initEvents(){}_createLink(){return new WjLink}_controllerImpl(e,t,i){}_initControl(e){try{return new(0,this._controlConstructor)(e)}catch(e){return}}_isChild(){return this._isParentInitializer()||this._isParentReferencer()}_isParentInitializer(){return void 0!=this._property}_isParentReferencer(){return void 0!=this._parentReferenceProperty}_scopeToAttrName(e){var t=this.scope[e];if(t){var i=1,r=t.length;return r<2?e:("?"===t.charAt(1)&&(i=2),r===i?e:t.substr(i))}return e}_getComplexPropDesc(e){return MetaFactory.findComplexProp(e,this._complexProps)}_initScopeEvents(){for(var e in this._events){var t=this._events[e];this._props.push(new PropDesc(t.eventName,wijmo_meta_1.PropertyType.EventHandler))}}_initScopeDescription(){var e=this._props,t={},i=WjDirective._optionalAttr?"=?":"=";if(null!=e)for(var r,s=0;s<e.length;s++)t[(r=e[s]).propertyName]=r.scopeBindingMode,WjDirective._optionalAttr&&"="==r.scopeBindingMode&&(t[r.propertyName]="=?");t.control=i,t[WjDirective._initPropAttr]=i,t[WjDirective._initEventAttr]="&",t[WjDirective._parPropAttr]="@",t[WjDirective._wjModelPropAttr]="@",this.scope=t}_postLinkFn(){var e=this;return function(t,i,r,s){var o=e._createLink();if(o.directive=e,o.scope=t,o.tElement=i,o.tAttrs=r,wijmo_1.isArray(s)){var n=i.parent()[0][WjDirective._elemScopeProp];for(var a in s){var p=s[a];if(void 0!=p&&(p[WjDirective._cntrlScopeProp]===t&&(p=i.parent().controller(e._stripRequire(+a))),p&&p[WjDirective._cntrlScopeProp]===n)){o.controller=p;break}}}else o.controller=s;o.ngModel=i.controller("ngModel"),o._link()}}_prepareProps(){this._initProps();var e=[].concat(this._props);this._props.sort(function(t,i){var r=t.priority-i.priority;return r||(r=e.indexOf(t)-e.indexOf(i)),r})}_stripRequire(e){if(this._stripReq||(this._stripReq=[],this._stripReq.length=this.require.length),!this._stripReq[e]){var t=/^[^A-Za-z]*(.*)/.exec(this.require[e]);this._stripReq[e]=t?t[1]:""}return this._stripReq[e]}_getId(){return this._dirId}static _removeTransclude(e){if(!e)return e;var t=document.createElement("div");t.innerHTML=e;var i=t.querySelectorAll("[ng-transclude]");return[].forEach.call(i,function(e,t){e.removeAttribute("ng-transclude")}),t.innerHTML}}WjDirective._parPropAttr="wjProperty",WjDirective._wjModelPropAttr="wjModelProperty",WjDirective._initPropAttr="isInitialized",WjDirective._initEventAttr="initialized",WjDirective._cntrlScopeProp="_cntrlScope",WjDirective._elemScopeProp="_elemCntrl",WjDirective._cntrlLinkProp="$_thisLink",WjDirective._scopeChildrenProp="$_childLinks",WjDirective._dirIdAttr="wj-directive-id",WjDirective._optionalAttr=WjDirective._versionOk("1.1.4"),WjDirective._dynaTemplates=WjDirective._optionalAttr,WjDirective._angStripPrefixes=["data","x"],WjDirective._dirIdCounter=0,exports.WjDirective=WjDirective;class WjLink{constructor(){this._nonAssignable={},this._definedProps={},this._definedEvents={},this._oldValues={},this._isInitialized=!1,this._hasTriggeredInitialized=!1,this._isNgModelInitialized=!1,this._scopeSuspend=0,this._suspendedEvents=[],this._areChlildrenReady=!1,this._isDestroyed=!1,this._isAppliedToParent=!1}_link(){var e=this.directive,t=this;if(this.tElement[0].setAttribute(WjDirective._dirIdAttr,e._getId()),this.directiveTemplateElement=e.replace?this.tElement:wjNg.element(this.tElement.children()[0]),this._initNonAssignable(),this._isChild()){this._parentPropDesc=new ComplexPropDesc(e._property,e._isPropertyArray,e._ownObject),this.controller[WjDirective._cntrlScopeProp][WjDirective._scopeChildrenProp].push(this);var i=this.controller[WjDirective._cntrlScopeProp][WjDirective._cntrlLinkProp];i&&i._areChlildrenReady&&this._parentReady(i)}else this._createInstance(),this._notifyReady(),this._prepareControl();this._destroyEhUnreg=this.scope.$on("$destroy",function(e,...i){t._destroy()})}_onChildrenReady(){}_createInstance(){this.control=this._initControl(),this._safeApply(this.scope,"control",this.control)}_parentReady(e){if(this._isChild()){var t=this;if(!this._isAttrDefined(WjDirective._parPropAttr)||this.scope[WjDirective._parPropAttr]){var i=this._getParentProp(),r=e.directive._getComplexPropDesc(i);r?this._parentPropDesc=r:this._parentPropDesc.propertyName=i,this.parent=e,this._useParentObj()?(this.control=e.control[i],this._safeApply(this.scope,"control",this.control)):this._createInstance(),this._notifyReady(),this._prepareControl(),this._initParent(),this.directiveTemplateElement[0].style.display="none",this._appliedToParent()}else this.scope.$watch(WjDirective._parPropAttr,function(){t._parentReady(e)})}}_initParent(){if(!this._useParentObj()){this.directive;var e=this._getParentProp(),t=this.parent.control,i=this.control;if(this._isParentInitializer())if(this._isParentArray()){var r=t[e],s=this._getIndex();(s<0||s>=r.length)&&(s=r.length),r.splice(s,0,i);this._siblingInsertedEH=this._siblingInserted.bind(this),this.tElement[0].addEventListener("DOMNodeInserted",this._siblingInsertedEH)}else t[e]=i;this._isParentReferencer()&&!this._parentInCtor()&&(i[this._getParentReferenceProperty()]=t)}}_destroy(){if(!this._isDestroyed){this._isDestroyed=!0;var e=this.control;if(this._destroyEhUnreg&&(this._destroyEhUnreg=null),this._siblingInsertedEH&&this.tElement[0].removeEventListener("DOMNodeInserted",this._siblingInsertedEH),this._isParentArray()&&!this.parent._isDestroyed){var t=this.parent.control,i=this._getParentProp();if(t&&i&&e){var r=t[i];if(r){var s=r.indexOf(e);s>=0&&r.splice(s,1)}}}this.tElement[0][WjDirective._elemScopeProp]=null,e instanceof wijmo_1.Control&&setTimeout(function(){e.hostElement&&e.dispose()},0)}}_siblingInserted(e){if(e.target===this.tElement[0]){var t=this._getIndex(),i=this.parent.control[this._getParentProp()],r=this.control,s=i.indexOf(r);t>=0&&s>=0&&t!==s&&(i.splice(s,1),t=Math.min(t,i.length),i.splice(t,0,r))}}_notifyReady(){this.scope[WjDirective._cntrlLinkProp]=this;for(var e=[].concat(this.scope[WjDirective._scopeChildrenProp]),t=0;t<e.length;t++)e[t]._parentReady(this);this._areChlildrenReady=!0,this._onChildrenReady()}_initControl(){return this.directive._initControl(this._parentInCtor()?this.parent.control:this.directiveTemplateElement[0])}_prepareControl(){this._addEventHandlers(),this._addWatchers()}_setupScopeWithControlProperties(){for(var e,t,i,r,s=this.control,o=this.scope,n=this.directive._props,a=0;a<n.length;a++)if("="===(e=n[a]).scopeBindingMode&&e.isNativeControlProperty&&e.shouldUpdateSource){i=o[t=e.propertyName],r=s[t];var p=e.propertyType==wijmo_meta_1.PropertyType.Function,c=e.propertyType==wijmo_meta_1.PropertyType.EventHandler;!this._canApply(o,e.propertyName)||r==i||p||c||(o[e.propertyName]=r)}o.$root.$$phase||o.$apply()}_initNonAssignable(){var e,t=this.directive._$parse,i=this.directive.scope;for(var r in i)"="===i[r].charAt(0)&&(void 0!==(e=this.tAttrs[this.directive._scopeToAttrName(r)])&&void 0!=t(e).assign||(this._nonAssignable[r]=!0))}_suspendScope(){this._scopeSuspend++}_resumeScope(){this._scopeSuspend>0&&0==--this._scopeSuspend&&this._suspendedEvents.length>0&&this._updateScope()}_isScopeSuspended(){return this._scopeSuspend>0}_isAttrDefined(e){return null!=this.tAttrs.$attr[this.directive._scopeToAttrName(e)]}_childInitialized(e){var t=this.scope[WjDirective._scopeChildrenProp],i=t.indexOf(e);i>=0&&(t.splice(i,1),this._checkRaiseInitialized())}_thisInitialized(){this._checkRaiseInitialized()}_initialized(){}_appliedToParent(){this._isAppliedToParent=!0,this._checkRaiseInitialized()}_checkRaiseInitialized(){if(!this._hasTriggeredInitialized&&0===this.scope[WjDirective._scopeChildrenProp].length&&this._isInitialized&&(!this._isChild()||this._isAppliedToParent)){this._hasTriggeredInitialized=!0,this._initialized(),this._safeApply(this.scope,WjDirective._initPropAttr,!0);var e=this.scope[WjDirective._initEventAttr],t=this;e&&setTimeout(function(){e({s:t.control,e:void 0})},0),this._isChild()&&this.parent&&this.parent._childInitialized(this)}}_addWatchers(){var e=this,t=this.directive._props,i=this.scope;if(t){if(this.ngModel){var r=this.ngModel;r.$pristine&&wijmo_1.addClass(this.tElement[0],"ng-pristine"),r.$valid&&wijmo_1.addClass(this.tElement[0],"ng-valid"),r.$untouched&&wijmo_1.addClass(this.tElement[0],"ng-untouched"),r.$render=this._ngModelRender.bind(this),this._updateNgModelPropDesc(),this._isAttrDefined(WjDirective._wjModelPropAttr)&&i.$watch(WjDirective._wjModelPropAttr,function(){e._updateNgModelPropDesc(),e._ngModelRender()})}var s,o,n;for(s=0;s<t.length;s++)o=(n=t[s]).propertyName,n.propertyType!==wijmo_meta_1.PropertyType.EventHandler&&this._isAttrDefined(o)&&(this._definedProps[o]=n);var a=this.control;i.$watch(function(t){if(!e._isDestroyed)try{var i={};for(var r in e._definedProps)t[r]!==e._oldValues[r]&&(i[r]=t[r]);for(var r in i){var s=i[r];if(s!==e._oldValues[r]&&(e._oldValues[r]=s,e._isInitialized||void 0!==s)){var o=e._definedProps[r],n=e._nullOrValue(e._castValueToType(s,o)),p=a[r];if(p!=n){var c=!1;null!=o.customHandler&&(c=o.customHandler(t,a,n,p,e)),o.isNativeControlProperty&&!0!==c&&(a[r]=n)}}}}finally{e._isInitialized||(e._isNgModelInitialized=!0,e.ngModel&&(void 0!==e.ngModel.$viewValue?e._ngModelRender():e._ngModelPropDesc&&(e.ngModel.$setViewValue(a[e._ngModelPropDesc.propertyName]),e.ngModel.$setPristine())),e._isInitialized=!0,e._setupScopeWithControlProperties(),e._thisInitialized())}})}}_addEventHandlers(){var e,t,i=this.directive._events;for(e=0;e<i.length;e++)t=i[e],this._addEventHandler(t)}_addEventHandler(e){var t=this,i=e.eventName,r=this.control[i];if(null==r)throw'Event "'+i+'" not found in '+t.constructor.name;if(this._isAttrDefined(i))this._definedEvents[i]=e;else if(!e.isPropChanged)return;this.scope,this.directive._props;var s=this.control;r.addHandler(function(i,r){var s={eventDesc:e,s:i,e:r};t._isScopeSuspended()?t._suspendedEvents.push(s):t._updateScope(s)},s)}_updateScope(e=null){if(!this._isDestroyed){var t=e?e.eventDesc.isPropChanged:this._suspendedEvents.some(function(e){return e.eventDesc.isPropChanged}),i=this;if(t)for(var r=this.directive._props,s=0;s<r.length;s++){var o=r[s];if("="==o.scopeBindingMode&&o.isNativeControlProperty&&o.shouldUpdateSource){var n=o.propertyName,a=this.control[n];this._shouldApply(this.scope,n,a)&&(this.scope[n]=a,this.directive._$parse(this.tAttrs[this.directive._scopeToAttrName(n)]).assign(this.scope.$parent,a)),this._ngModelPropDesc&&this._isInitialized&&this._ngModelPropDesc.propertyName==n&&this.ngModel.$viewValue!==a&&this.ngModel.$setViewValue(a)}}var p=function(){for(var t=e?[e]:this._suspendedEvents,r=0;r<t.length;r++){var s=t[r],o=s.eventDesc.eventName,n=this.scope[o];i._definedEvents[o]&&n&&n({s:s.s,e:s.e})}e||(this._suspendedEvents.length=0)}.bind(this);if(t)if(this.scope.$root.$$phase)var c=this.scope.$watch("value",function(){c()});else this.scope.$apply();p()}}_ngModelRender(){if(this._isNgModelInitialized){var e=this.ngModel.$viewValue,t=this._ngModelPropDesc;if(t&&(void 0!==e||this._isInitialized)){this._nullOrValue(this._castValueToType(e,t));e!==this.control[t.propertyName]&&(this.control[t.propertyName]=e)}}}_castValueToType(e,t){return t.castValueToType(e)}_isChild(){return this.directive._isChild()}_isParentInitializer(){return this.directive._isParentInitializer()}_isParentReferencer(){return this.directive._isParentReferencer()}_getParentProp(){return this._isParentInitializer()?this.scope[WjDirective._parPropAttr]||this.directive._property:void 0}_getParentReferenceProperty(){return this.directive._parentReferenceProperty}_useParentObj(){return!this._isParentReferencer()&&this._isParentInitializer()&&!this._parentPropDesc.isArray&&!this._parentPropDesc.ownsObject}_isParentArray(){return this._isParentInitializer()&&this._parentPropDesc.isArray}_parentInCtor(){return this._isParentReferencer()&&""==this._getParentReferenceProperty()}_getNgModelProperty(){return this.scope[WjDirective._wjModelPropAttr]||this.directive._ngModelProperty}_updateNgModelPropDesc(){var e=this._getNgModelProperty();this._ngModelPropDesc=wijmo_1.isNullOrWhiteSpace(e)?null:MetaFactory.findProp(e,this.directive._props)}_safeApply(e,t,i){return!!this._shouldApply(e,t,i)&&(e[t]=i,e.$root.$$phase||e.$apply(),!0)}_shouldApply(e,t,i){return this._canApply(e,t)&&i!=e[t]}_canApply(e,t){return!this._nonAssignable[t]}_nullOrValue(e){return void 0!=e?e:null}_getIndex(){var e=this.tElement[0],t=e.parentElement;if(!t)return-1;for(var i=t.childNodes,r=-1,s=this.directive._getId(),o=0;o<i.length;o++){var n=i[o];if(1==n.nodeType&&n.getAttribute(WjDirective._dirIdAttr)==s&&(++r,n===e))return r}return-1}}function softRefChart(){return wijmo_1._getModule("wijmo.chart")}function softRefChartAnalytics(){return wijmo_1._getModule("wijmo.chart.analytics")}function softRefChartAnimation(){return wijmo_1._getModule("wijmo.chart.animation")}function softRefChartAnnotation(){return wijmo_1._getModule("wijmo.chart.annotation")}function softRefChartFinance(){return wijmo_1._getModule("wijmo.chart.finance")}function softRefChartFinanceAnalytics(){return wijmo_1._getModule("wijmo.chart.finance.analytics")}function softRefChartHierarchical(){return wijmo_1._getModule("wijmo.chart.hierarchical")}function softRefChartInteraction(){return wijmo_1._getModule("wijmo.chart.interaction")}function softRefChartRadar(){return wijmo_1._getModule("wijmo.chart.radar")}function softRefGauge(){return wijmo_1._getModule("wijmo.gauge")}function softRefGrid(){return wijmo_1._getModule("wijmo.grid")}function softRefGridDetail(){return wijmo_1._getModule("wijmo.grid.detail")}function softRefGridFilter(){return wijmo_1._getModule("wijmo.grid.filter")}function softRefGridGrouppanel(){return wijmo_1._getModule("wijmo.grid.grouppanel")}function softRefGridMultirow(){return wijmo_1._getModule("wijmo.grid.multirow")}function softRefGridSheet(){return wijmo_1._getModule("wijmo.grid.sheet")}function softRefNav(){return wijmo_1._getModule("wijmo.nav")}function softRefOlap(){return wijmo_1._getModule("wijmo.olap")}function softRefViewer(){return wijmo_1._getModule("wijmo.viewer")}function softRefInput(){return wijmo_1._getModule("wijmo.input")}exports.WjLink=WjLink,exports.softRefChart=softRefChart,exports.softRefChartAnalytics=softRefChartAnalytics,exports.softRefChartAnimation=softRefChartAnimation,exports.softRefChartAnnotation=softRefChartAnnotation,exports.softRefChartFinance=softRefChartFinance,exports.softRefChartFinanceAnalytics=softRefChartFinanceAnalytics,exports.softRefChartHierarchical=softRefChartHierarchical,exports.softRefChartInteraction=softRefChartInteraction,exports.softRefChartRadar=softRefChartRadar,exports.softRefGauge=softRefGauge,exports.softRefGrid=softRefGrid,exports.softRefGridDetail=softRefGridDetail,exports.softRefGridFilter=softRefGridFilter,exports.softRefGridGrouppanel=softRefGridGrouppanel,exports.softRefGridMultirow=softRefGridMultirow,exports.softRefGridSheet=softRefGridSheet,exports.softRefNav=softRefNav,exports.softRefOlap=softRefOlap,exports.softRefViewer=softRefViewer,exports.softRefInput=softRefInput;