/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";var __extends=this&&this.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var wijmo_knockout_base_1=require("wijmo/wijmo.knockout.base"),wijmo_1=require("wijmo/wijmo"),mKo=require("knockout"),wjcInput=require("wijmo/wijmo.input"),wjKo=mKo,WjDropDownBinding=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.DropDown},n}(wijmo_knockout_base_1.WjBinding);exports.WjDropDownBinding=WjDropDownBinding;var wjComboBox=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.ComboBox},n}(WjDropDownBinding);exports.wjComboBox=wjComboBox;var wjAutoComplete=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.AutoComplete},n}(wjComboBox);exports.wjAutoComplete=wjAutoComplete;var wjCalendar=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.Calendar},n}(wijmo_knockout_base_1.WjBinding);exports.wjCalendar=wjCalendar;var wjColorPicker=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.ColorPicker},n}(wijmo_knockout_base_1.WjBinding);exports.wjColorPicker=wjColorPicker;var wjListBox=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.ListBox},n}(wijmo_knockout_base_1.WjBinding);exports.wjListBox=wjListBox;var wjMenu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.Menu},n.prototype._createWijmoContext=function(){return new WjMenuContext(this)},n.prototype._initialize=function(){t.prototype._initialize.call(this),wijmo_knockout_base_1.MetaFactory.findProp("value",this._metaData.props).updateControl=this._updateControlValue},n.prototype._updateControlValue=function(t,n,e,o,r){return null!=r&&(e.selectedValue=r,t._updateHeader()),!0},n}(wjComboBox);exports.wjMenu=wjMenu;var WjMenuContext=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._initControl=function(){var n=this;t.prototype._initControl.call(this);var e=this.control;e.displayMemberPath="header",e.commandPath="cmd",e.commandParameterPath="cmdParam",e.selectedValuePath="value",e.itemsSource=new wijmo_1.ObservableArray,e.itemClicked.addHandler(function(){n._safeUpdateSrcAttr("value",e.selectedValue),n._updateHeader()})},n.prototype._childrenInitialized=function(){t.prototype._childrenInitialized.call(this),this.control.selectedIndex=0,this._updateHeader()},n.prototype._updateHeader=function(){var t=this.control,n=this.valueAccessor(),e=wjKo.unwrap(n.header);if(void 0!==wjKo.unwrap(n.value)&&t.selectedItem&&t.displayMemberPath){var o=t.selectedItem[t.displayMemberPath];null!=o&&(e+=": <b>"+o+"</b>")}t.header=e},n}(wijmo_knockout_base_1.WjContext);exports.WjMenuContext=WjMenuContext;var wjMenuItem=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getMetaDataId=function(){return"MenuItem"},n.prototype._createWijmoContext=function(){return new WjMenuItemContext(this)},n.prototype._initialize=function(){t.prototype._initialize.call(this);var n=this._metaData;n.parentProperty="itemsSource",n.isParentPropertyArray=!0},n}(wijmo_knockout_base_1.WjBinding);exports.wjMenuItem=wjMenuItem;var WjMenuItemContext=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._createControl=function(){return{header:this.element.innerHTML,cmd:null,cmdParam:null,value:null}},n}(wijmo_knockout_base_1.WjContext);exports.WjMenuItemContext=WjMenuItemContext;var wjMenuSeparator=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getMetaDataId=function(){return"MenuSeparator"},n.prototype._initialize=function(){t.prototype._initialize.call(this);var n=this._metaData;n.parentProperty="itemsSource",n.isParentPropertyArray=!0},n.prototype._createControl=function(t){return{header:'<div class="wj-state-disabled" style="width:100%;height:1px;background-color:lightgray"></div>'}},n}(wijmo_knockout_base_1.WjBinding);exports.wjMenuSeparator=wjMenuSeparator;var wjContextMenu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getMetaDataId=function(){return"ContextMenu"},n.prototype._createControl=function(t){return null},n.prototype._createWijmoContext=function(){return new WjContextMenuContext(this)},n}(wijmo_knockout_base_1.WjBinding);exports.wjContextMenu=wjContextMenu;var WjContextMenuContext=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._initControl=function(){t.prototype._initControl.call(this);var n=this.valueAccessor(),e=wijmo_1.getElement(n.id);this.element.addEventListener("contextmenu",function(t){var n=wijmo_1.Control.getControl(e),o=n.dropDown;n&&o&&!wijmo_1.closest(t.target,"[disabled]")&&(t.preventDefault(),n.owner=this.element,n.selectedIndex=-1,n.onIsDroppedDownChanging(new wijmo_1.CancelEventArgs)&&(wijmo_1.showPopup(o,t),n.onIsDroppedDownChanged(),o.focus()))})},n}(wijmo_knockout_base_1.WjContext);exports.WjContextMenuContext=WjContextMenuContext;var wjInputDate=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.InputDate},n}(WjDropDownBinding);exports.wjInputDate=wjInputDate;var wjInputDateTime=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.InputDateTime},n}(wijmo_knockout_base_1.WjBinding);exports.wjInputDateTime=wjInputDateTime;var wjInputNumber=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.InputNumber},n}(wijmo_knockout_base_1.WjBinding);exports.wjInputNumber=wjInputNumber;var wjInputMask=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.InputMask},n}(wijmo_knockout_base_1.WjBinding);exports.wjInputMask=wjInputMask;var wjInputTime=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.InputTime},n}(wjComboBox);exports.wjInputTime=wjInputTime;var wjInputColor=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.InputColor},n}(WjDropDownBinding);exports.wjInputColor=wjInputColor;var WjCollectionViewBaseBinding=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._createControl=function(t){return null},n.prototype._createWijmoContext=function(){return new WjCollectionViewContext(this)},n.prototype._getTemplate=function(){return""},n}(wijmo_knockout_base_1.WjBinding);exports.WjCollectionViewBaseBinding=WjCollectionViewBaseBinding;var WjCollectionViewContext=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n._emptyCV=new wijmo_1.CollectionView([]),n}return __extends(n,t),n.prototype.init=function(t,n,e,o,r){t.innerHTML=this.wjBinding._getTemplate();var i=wjKo.unwrap(n().cv)||this._emptyCV;this._subscribeToCV(i),this._localVM={cv:wjKo.observable(i)};var u=r.createChildContext(this._localVM);return wjKo.applyBindingsToDescendants(u,t),{controlsDescendantBindings:!0}},n.prototype.update=function(t,n,e,o,r){var i=wjKo.unwrap(n().cv)||this._emptyCV,u=wjKo.unwrap(this._localVM.cv);i!==u&&(this._unsubscribeFromCV(u),this._subscribeToCV(i),this._localVM.cv(i))},n.prototype._subscribeToCV=function(t){t&&(t.collectionChanged.addHandler(this._forceBindingsUpdate,this),t.currentChanged.addHandler(this._forceBindingsUpdate,this),t.pageChanged.addHandler(this._forceBindingsUpdate,this))},n.prototype._unsubscribeFromCV=function(t){t&&(t.collectionChanged.removeHandler(this._forceBindingsUpdate,this),t.currentChanged.removeHandler(this._forceBindingsUpdate,this),t.pageChanged.removeHandler(this._forceBindingsUpdate,this))},n.prototype._forceBindingsUpdate=function(t,n){this._localVM.cv.valueHasMutated()},n}(wijmo_knockout_base_1.WjContext);exports.WjCollectionViewContext=WjCollectionViewContext;var wjCollectionViewPager=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getMetaDataId=function(){return"CollectionViewPager"},n.prototype._getTemplate=function(){return'<div class="wj-control wj-content wj-pager">    <div class="wj-input-group">        <span class="wj-input-group-btn" >            <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveToFirstPage() },               disable: cv().pageIndex <= 0">                <span class="wj-glyph-left" style="margin-right: -4px;"></span>                <span class="wj-glyph-left"></span>            </button>        </span>        <span class="wj-input-group-btn" >           <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveToPreviousPage() },               disable: cv().pageIndex <= 0">                <span class="wj-glyph-left"></span>            </button>        </span>        <input type="text" class="wj-form-control" data-bind="            value: cv().pageIndex + 1 + \' / \' + cv().pageCount        " disabled />        <span class="wj-input-group-btn" >            <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveToNextPage() },               disable: cv().pageIndex >= cv().pageCount - 1">                <span class="wj-glyph-right"></span>            </button>        </span>        <span class="wj-input-group-btn" >            <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveToLastPage() },               disable: cv().pageIndex >= cv().pageCount - 1">                <span class="wj-glyph-right"></span>                <span class="wj-glyph-right" style="margin-left: -4px;"></span>            </button>        </span>    </div></div>'},n}(WjCollectionViewBaseBinding);exports.wjCollectionViewPager=wjCollectionViewPager;var wjCollectionViewNavigator=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getMetaDataId=function(){return"CollectionViewNavigator"},n.prototype._getTemplate=function(){return'<div class="wj-control wj-content wj-pager">    <div class="wj-input-group">        <span class="wj-input-group-btn" >            <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveCurrentToFirst() },               disable: cv().currentPosition <= 0">                <span class="wj-glyph-left" style="margin-right: -4px;"></span>                <span class="wj-glyph-left"></span>            </button>        </span>        <span class="wj-input-group-btn" >           <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveCurrentToPrevious() },               disable: cv().currentPosition <= 0">                <span class="wj-glyph-left"></span>            </button>        </span>        <input type="text" class="wj-form-control" data-bind="            value: cv().currentPosition + 1 + \' / \' + cv().itemCount        " disabled />        <span class="wj-input-group-btn" >            <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveCurrentToNext() },               disable: cv().currentPosition >= cv().itemCount - 1">                <span class="wj-glyph-right"></span>            </button>        </span>        <span class="wj-input-group-btn" >            <button class="wj-btn wj-btn-default" type="button"               data-bind="click: function () { cv().moveCurrentToLast() },               disable: cv().currentPosition >= cv().itemCount - 1">                <span class="wj-glyph-right"></span>                <span class="wj-glyph-right" style="margin-left: -4px;"></span>            </button>        </span>    </div></div>'},n}(WjCollectionViewBaseBinding);exports.wjCollectionViewNavigator=wjCollectionViewNavigator;var wjMultiSelect=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.MultiSelect},n}(wjComboBox);exports.wjMultiSelect=wjMultiSelect;var wjMultiAutoComplete=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.MultiAutoComplete},n}(wjAutoComplete);exports.wjMultiAutoComplete=wjMultiAutoComplete;var wjPopup=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._getControlConstructor=function(){return wjcInput.Popup},n.prototype._createWijmoContext=function(){return new WjPopupContext(this)},n.prototype._initialize=function(){t.prototype._initialize.call(this),wijmo_knockout_base_1.MetaFactory.findProp("owner",this._metaData.props).updateControl=function(t,n,e,o,r){return e.owner=r,t._updateModal(r),!0}},n}(wijmo_knockout_base_1.WjBinding);exports.wjPopup=wjPopup;var WjPopupContext=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype._initControl=function(){t.prototype._initControl.call(this),this.control.removeOnHide=!1},n.prototype._updateModal=function(t){var n=this.valueAccessor(),e=this.control;null==wjKo.unwrap(n.modal)&&(e.modal=!t)},n}(wijmo_knockout_base_1.WjContext);exports.WjPopupContext=WjPopupContext,wjKo.bindingHandlers.wjComboBox=new wjComboBox,wjKo.bindingHandlers.wjAutoComplete=new wjAutoComplete,wjKo.bindingHandlers.wjCalendar=new wjCalendar,wjKo.bindingHandlers.wjColorPicker=new wjColorPicker,wjKo.bindingHandlers.wjListBox=new wjListBox,wjKo.bindingHandlers.wjMenu=new wjMenu,wjKo.bindingHandlers.wjMenuItem=new wjMenuItem,wjKo.bindingHandlers.wjMenuSeparator=new wjMenuSeparator,wjKo.bindingHandlers.wjContextMenu=new wjContextMenu,wjKo.bindingHandlers.wjInputDate=new wjInputDate,wjKo.bindingHandlers.wjInputDateTime=new wjInputDateTime,wjKo.bindingHandlers.wjInputNumber=new wjInputNumber,wjKo.bindingHandlers.wjInputMask=new wjInputMask,wjKo.bindingHandlers.wjInputTime=new wjInputTime,wjKo.bindingHandlers.wjInputColor=new wjInputColor,wjKo.bindingHandlers.wjCollectionViewNavigator=new wjCollectionViewNavigator,wjKo.bindingHandlers.wjCollectionViewPager=new wjCollectionViewPager,wjKo.bindingHandlers.wjMultiSelect=new wjMultiSelect,wjKo.bindingHandlers.wjMultiAutoComplete=new wjMultiAutoComplete,wjKo.bindingHandlers.wjPopup=new wjPopup;