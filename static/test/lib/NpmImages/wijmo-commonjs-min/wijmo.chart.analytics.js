/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var wijmo_1=require("wijmo/wijmo"),wijmo_chart_1=require("wijmo/wijmo.chart"),selfModule=require("wijmo/wijmo.chart.analytics"),Waterfall=function(t){function e(e){var i=t.call(this)||this;return i._startLabel="Start",i._relativeData=!0,i._connectorLines=!1,i._showTotal=!1,i._totalLabel="Total",i._getXValues=!1,i._showIntermediateTotal=!1,i._intermediateTotalPos=[],i._chartType=wijmo_chart_1.ChartType.Bar,i.rendering.addHandler(i._rendering,i),i.initialize(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"relativeData",{get:function(){return this._relativeData},set:function(t){t!=this._relativeData&&(this._relativeData=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(t){t!=this._start&&(this._start=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLabel",{get:function(){return this._startLabel},set:function(t){t!=this._startLabel&&(this._startLabel=wijmo_1.asString(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTotal",{get:function(){return this._showTotal},set:function(t){t!=this._showTotal&&(this._showTotal=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalLabel",{get:function(){return this._totalLabel},set:function(t){t!=this._totalLabel&&(this._totalLabel=wijmo_1.asString(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showIntermediateTotal",{get:function(){return this._showIntermediateTotal},set:function(t){t!=this._showIntermediateTotal&&(this._showIntermediateTotal=wijmo_1.asBoolean(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intermediateTotalPositions",{get:function(){return this._intermediateTotalPositions},set:function(t){t!=this._intermediateTotalPositions&&(this._intermediateTotalPositions=wijmo_1.asArray(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intermediateTotalLabels",{get:function(){return this._intermediateTotalLabels},set:function(t){t!=this._intermediateTotalLabels&&(wijmo_1.assert(null==t||wijmo_1.isArray(t)||wijmo_1.isString(t),"Array or string expected."),this._intermediateTotalLabels=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectorLines",{get:function(){return this._connectorLines},set:function(t){t!=this._connectorLines&&(this._connectorLines=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styles",{get:function(){return this._styles},set:function(t){t!=this._styles&&(this._styles=t,this._invalidate())},enumerable:!0,configurable:!0}),e.prototype.getValues=function(e){var i,r,n,a,o=this,s=[],u=0;if(i=t.prototype.getValues.call(this,e),0===e){if(!this._yValues){s=[];var l=0,h=0,c=i&&i.length||0;if(this.relativeData){for(;h<c;h++)l+=isNaN(i[h])?0:i[h],s.push(l);this._yValues=s}else{for(;h<c;h++)l=isNaN(i[h])?0:i[h],s.push(l);this._yValues=s}(r=this._yValues)&&r.length>0&&(this.showIntermediateTotal&&this.intermediateTotalPositions&&this.intermediateTotalPositions.length>0&&(this._intermediateTotalPos=r.slice(),this.intermediateTotalPositions.reduceRight(function(t,e){var i=0===e?r[0]:r[e-1];return r.length>e?(r.splice(e,0,i),o._intermediateTotalPos.splice(e,0,!0)):r.length===e&&(r.push(i),o._intermediateTotalPos.push(!0)),0},0)),null!=this.start&&(r.splice(0,0,this.start),this._intermediateTotalPos.splice(0,0,!1)),this.showTotal&&r&&r.push(r[r.length-1]))}return this._yValues}if(!this._xValues&&this._getXValues&&(this._xValues=i&&i.slice(),this._getXValues=!1,this._xValues&&this._xValues.length>1&&(c=this._xValues.length,a=this._xValues[c-1],u=Math.abs(this._xValues[c-1]-this._xValues[c-2])),this.chart&&this.chart._xlabels&&this.chart._xlabels.length)){if(n=this.chart._xlabels,this.showIntermediateTotal&&this.intermediateTotalPositions&&this.intermediateTotalPositions.length>0){var _=this.intermediateTotalLabels;_&&this.intermediateTotalPositions.reduceRight(function(t,e,i){var r="";return r=wijmo_1.isString(_)?_:_[i]||"",n.length>e?n.splice(e,0,r):n.length===e&&n.push(r),u&&(a+=u,o._xValues.push(a)),0},0)}null!=this.start&&(n.splice(0,0,this.startLabel),u&&(a+=u,this._xValues.push(a))),this.showTotal&&(n.push(this.totalLabel),u&&(a+=u,this._xValues.push(a)))}return this._xValues},e.prototype.legendItemLength=function(){return this.showTotal?3:2},e.prototype.measureLegendItem=function(t,e){var i=this._getName(e);return i?this._measureLegendItem(t,i):new wijmo_1.Size(0,0)},e.prototype.drawLegendItem=function(t,e,i){var r=this._getLegendStyles(i);this._getName(i)&&this._drawLegendItem(t,e,wijmo_chart_1.ChartType.Bar,this._getName(i),r,this.symbolStyle)},e.prototype._clearValues=function(){t.prototype._clearValues.call(this),this._xValues=null,this._yValues=null,this._wfstyle=null,this._getXValues=!0,this._intermediateTotalPos=[],this.chart&&this.chart._performBind()},e.prototype._invalidate=function(){t.prototype._invalidate.call(this),this._clearValues()},e.prototype._rendering=function(t,i){var r=this;i.cancel=!0,this._wfstyle=null;var n,a,o,s,u,l,h=this.chart,c=this._getAxisY(),_=this._getAxisX(),p=c.origin||0,f=i.engine;if(this._barPlotter=h._getPlotter(this),o=this._barPlotter.rotated,this._barPlotter._getSymbolOrigin||(this._barPlotter._getSymbolOrigin=function(t,e,i){return 0===e?t:!0===r._intermediateTotalPos[e]?t:e===i-1&&r.showTotal?t:r._yValues[e-1]}),this._barPlotter._getSymbolStyles||(this._barPlotter._getSymbolStyles=function(t,e){var i=r._getStyles();return 0===t&&null!=r.start?i.start:!0===r._intermediateTotalPos[t]?i.intermediateTotal:t===e-1&&r.showTotal?i.total:r._yValues[t]<r._yValues[t-1]?i.falling:i.rising}),this._barPlotter.plotSeries(f,_,c,t,h,0,1),this.connectorLines){for(f.startGroup(e.CSS_CONNECTOR_LINE_GROUP),s=this._barPlotter.hitTester._map[0],l=this._yValues[0]<p,u=s[0].rect,n=1,a=s.length;n<a;n++)!0===this._intermediateTotalPos[n]&&n!==a-1||(this._drawConnectorLine(f,o,u,s[n].rect,l),u=s[n].rect,l=this._yValues[n]<this._yValues[n-1]);f.endGroup()}},e.prototype._getStyles=function(){if(this._wfstyle)return this._wfstyle;var t=this._chart.series.indexOf(this),e=this._getSymbolFill(t),i=this._getSymbolStroke(t),r=this.styles||{};return this._wfstyle={start:this._getStyleByKey(r,"start",e,i),intermediateTotal:this._getStyleByKey(r,"intermediateTotal",e,i),total:this._getStyleByKey(r,"total",e,i),falling:this._getStyleByKey(r,"falling","red","red"),rising:this._getStyleByKey(r,"rising","green","green")},this._wfstyle},e.prototype._getStyleByKey=function(t,e,i,r){return{fill:t[e]&&t[e].fill?t[e].fill:i,stroke:t[e]&&t[e].stroke?t[e].stroke:r}},e.prototype._drawConnectorLine=function(t,i,r,n,a){var o=new wijmo_1.Point,s=new wijmo_1.Point,u=this.chart.axisY.reversed,l=this.chart.axisX.reversed;u^=a,i?(u?(o.x=r.left,s.x=r.left):(o.x=r.left+r.width,s.x=r.left+r.width),l?(o.y=r.top,s.y=n.top+n.height):(o.y=r.top+r.height,s.y=n.top)):(u?(o.y=r.top+r.height,s.y=r.top+r.height):(o.y=r.top,s.y=r.top),l?(o.x=r.left+r.width,s.x=n.left):(o.x=r.left,s.x=n.left+n.width)),t.drawLine(o.x,o.y,s.x,s.y,e.CSS_CONNECTOR_LINE,this.styles&&this.styles.connectorLines||{stroke:"black"})},e.prototype._getLegendStyles=function(t){if(t<0||null===this.styles)return null;var e=this._getStyles();return 0===t?e.rising:1===t?e.falling:e.total},e.prototype._getName=function(t){var e=void 0;if(this.name)if(this.name.indexOf(",")){var i=this.name.split(",");i&&i.length-1>=t&&(e=i[t].trim())}else e=this.name;return e},e.CSS_CONNECTOR_LINE_GROUP="water-fall-connector-lines",e.CSS_CONNECTOR_LINE="water-fall-connector-line",e.CSS_ENDLABEL="water-fall-end-label",e}(wijmo_chart_1.SeriesBase);exports.Waterfall=Waterfall;var MovingAverageType,TrendLineBase=function(t){function e(e){var i=t.call(this)||this;return i._chartType=wijmo_chart_1.ChartType.Line,i._sampleCount=100,i.initialize(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"sampleCount",{get:function(){return this._sampleCount},set:function(t){(t=wijmo_1.asNumber(t,!1,!0))!=this._sampleCount&&(this._sampleCount=t,this._invalidate())},enumerable:!0,configurable:!0}),e.prototype.approximate=function(t){return 0},e.prototype.getValues=function(e){var i=this.binding,r=this.bindingX;return i!==this._bind&&(this._bind=i,this.binding=i),r!==this._bindX&&(this._bindX=r,this.bindingX=r),null==this._originYValues&&(this._originYValues=t.prototype.getValues.call(this,0)),null==this._originXValues&&(this._originXValues=t.prototype.getValues.call(this,1)),null==this._originXValues||null==this._originYValues?null:(t.prototype.getValues.call(this,e),null!=this._xValues&&null!=this._yValues||this._calculateValues(),0===e?this._yValues||null:1===e?this._xValues||null:void 0)},e.prototype._calculateValues=function(){},e.prototype._invalidate=function(){t.prototype._invalidate.call(this),this._clearCalculatedValues()},e.prototype._clearValues=function(){t.prototype._clearValues.call(this),this._originXValues=null,this._originYValues=null,this._clearCalculatedValues()},e.prototype._clearCalculatedValues=function(){this._xValues=null,this._yValues=null},e}(wijmo_chart_1.SeriesBase);exports.TrendLineBase=TrendLineBase,function(t){t[t.Simple=0]="Simple",t[t.Weighted=1]="Weighted",t[t.Exponential=2]="Exponential",t[t.Triangular=3]="Triangular"}(MovingAverageType=exports.MovingAverageType||(exports.MovingAverageType={}));var MovingAverage=function(t){function e(e){var i=t.call(this)||this;return i._chartType=wijmo_chart_1.ChartType.Line,i._type=MovingAverageType.Simple,i._period=2,i.initialize(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){(t=wijmo_1.asEnum(t,MovingAverageType,!1))!=this._type&&(this._type=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"period",{get:function(){return this._period},set:function(t){(t=wijmo_1.asNumber(t,!1,!0))!=this._period&&(this._period=wijmo_1.asNumber(t,!1,!0),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype._checkPeriod=function(){var t=this.period,e=this._originXValues;t<=1&&wijmo_1.assert(!1,"period must be greater than 1."),e&&e.length&&t>=e.length&&wijmo_1.assert(!1,"period must be less than itemSource's length.")},e.prototype._calculateValues=function(){this._type;var t="_calculate"+MovingAverageType[this._type],e=[],i=[];this._checkPeriod(),this[t]&&this[t].call(this,e,i),this._yValues=i,this._xValues=e},e.prototype._calculateSimple=function(t,e,i){void 0===i&&(i=!1);for(var r=this._originXValues,n=this._originYValues,a=r.length,o=this._period,s=0,u=0;u<a;u++)s+=n[u]||0,u>=o&&(s-=n[u-o]||0),u>=o-1?(t.push(r[u]),e.push(s/o)):i&&(t.push(r[u]),e.push(s/(u+1)))},e.prototype._calculateWeighted=function(t,e){for(var i=this._originXValues,r=this._originYValues,n=i.length,a=this._period,o=a*(a+1)/2,s=0,u=0,l=0;l<n;l++)l>0&&(s+=r[l-1]||0),l>a&&(s-=r[l-a-1]||0),l<a-1?u+=(r[l]||0)*(l+1):(u+=(r[l]||0)*a,l>a-1&&(u-=s),t.push(i[l]),e.push(u/o))},e.prototype._calculateExponential=function(t,e){for(var i=this._originXValues,r=this._originYValues,n=i.length,a=this._period,o=0,s=0;s<n;s++)s<=a-2?(o+=r[s]||0,s===a-2&&(o/=a-1)):(o+=2/(a+1)*((r[s]||0)-o),t.push(i[s]),e.push(o))},e.prototype._calculateTriangular=function(t,e){var i=this._period,r=[],n=[],a=0;this._calculateSimple(r,n,!0);for(var o=0,s=r.length;o<s;o++)a+=n[o]||0,o>=i&&(a-=n[o-i]||0),o>=i-1&&(t.push(r[o]),e.push(a/i))},e}(TrendLineBase);exports.MovingAverage=MovingAverage;var TrendLineFitType,MathHelper=function(){function t(){}return t.round=function(t,e){if(!t)return 0;var i=Math.pow(10,e||2);return Math.round(t*i)/i},t.avg=function(e){return t.sum(e)/e.length},t.sum=function(t){return(t=wijmo_1.asArray(t,!1)).reduce(function(t,e){return t+e},0)},t.sumOfPow=function(t,e){return t=wijmo_1.asArray(t,!1),e=wijmo_1.asNumber(e,!1),t.reduce(function(t,i){return t+Math.pow(i,e)},0)},t.sumProduct=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.length;var r,n,a=0,o=[];for((e=wijmo_1.asArray(e,!1)).forEach(function(t,e){t=wijmo_1.asArray(t,!1),0===e?a=t.length:wijmo_1.assert(t.length===a,"The length of the arrays must be equal")}),r=0;r<a;r++)n=1,e.some(function(t,e){var i=t[r];if(!i||!wijmo_1.isNumber(i))return n=0,!0;n*=i}),o.push(n);return t.sum(o)},t.variance=function(e){e=wijmo_1.asArray(e,!1);var i,r=t.avg(e);return i=e.map(function(t){return t-r}),t.sumOfSquares(i)/(e.length-1)},t.covariance=function(e,i){e=wijmo_1.asArray(e,!1),i=wijmo_1.asArray(i,!1),wijmo_1.assert(e.length===i.length,"Length of arrays must be equal");var r,n=t.avg(e),a=t.avg(i),o=e.length,s=0;for(r=0;r<o;r++)s+=(e[r]-n)*(i[r]-a)/o;return s},t.min=function(t){return Math.min.apply(Math,wijmo_1.asArray(t,!1))},t.max=function(t){return Math.max.apply(Math,wijmo_1.asArray(t,!1))},t.square=function(t){return Math.pow(wijmo_1.asNumber(t,!1),2)},t.sumOfSquares=function(e){return t.sumOfPow(e,2)},t.stdDev=function(e){return Math.sqrt(t.variance(e))},t}();!function(t){t[t.Linear=0]="Linear",t[t.Exponential=1]="Exponential",t[t.Logarithmic=2]="Logarithmic",t[t.Power=3]="Power",t[t.Fourier=4]="Fourier",t[t.Polynomial=5]="Polynomial",t[t.MinX=6]="MinX",t[t.MinY=7]="MinY",t[t.MaxX=8]="MaxX",t[t.MaxY=9]="MaxY",t[t.AverageX=10]="AverageX",t[t.AverageY=11]="AverageY"}(TrendLineFitType=exports.TrendLineFitType||(exports.TrendLineFitType={}));var TrendLine=function(t){function e(e){var i=t.call(this)||this;return i._fitType=TrendLineFitType.Linear,i._order=2,i.initialize(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"fitType",{get:function(){return this._fitType},set:function(t){(t=wijmo_1.asEnum(t,TrendLineFitType,!1))!=this._fitType&&(this._fitType=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(t){t!=this._order&&(this._order=wijmo_1.asNumber(t,!1,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coefficients",{get:function(){return this._helper?this._helper.coefficients:null},enumerable:!0,configurable:!0}),e.prototype.approximate=function(t){return this._helper?this._helper.approximate(t):NaN},e.prototype.getEquation=function(t){return(this._helper?this._helper.getEquation(t):"").replace(/\S(\+|\-)\d/g,function(t){return t[0]+" "+t[1]+" "+t[2]})},e.prototype._calculateValues=function(){var t=TrendLineFitType[this._fitType];if(TrendLineHelper[t]){var e=!1,i=this._originXValues;0==this._chart._xvals.length&&this._chart._xlabels.length>0&&(i=this._originXValues.map(function(t){return t+1}),e=!0);var r=new TrendLineHelper[t](this._originYValues,i,this.sampleCount,this.order);r._isXString=e;var n=r.calculateValues();this._yValues=n[0],this._xValues=n[1],this._helper=r}},e}(TrendLineBase);exports.TrendLine=TrendLine;var Calculator=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minX",{get:function(){return null==this._minX&&(this._minX=MathHelper.min(this._x)),this._minX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return null==this._minY&&(this._minY=MathHelper.min(this._y)),this._minY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return null==this._maxX&&(this._maxX=MathHelper.max(this._x)),this._maxX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return null==this._maxY&&(this._maxY=MathHelper.max(this._y)),this._maxY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"averageX",{get:function(){return null==this._averageX&&(this._averageX=MathHelper.avg(this._x)),this._averageX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"averageY",{get:function(){return null==this._averageY&&(this._averageY=MathHelper.avg(this._y)),this._averageY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumX",{get:function(){return null==this._sumX&&(this._sumX=MathHelper.sum(this._x)),this._sumX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumY",{get:function(){return null==this._sumY&&(this._sumY=MathHelper.sum(this._y)),this._sumY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LogX",{get:function(){return null==this._logX&&(this._logX=this._x.map(function(t){return Math.log(t)})),this._logX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LogY",{get:function(){return null==this._logY&&(this._logY=this._y.map(function(t){return Math.log(t)})),this._logY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumLogX",{get:function(){return null==this._sumLogX&&(this._sumLogX=MathHelper.sum(this.LogX)),this._sumLogX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumLogY",{get:function(){return null==this._sumLogY&&(this._sumLogY=MathHelper.sum(this.LogY)),this._sumLogY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumOfSquareX",{get:function(){return null==this._sumOfSquareX&&(this._sumOfSquareX=MathHelper.sumOfSquares(this._x)),this._sumOfSquareX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumOfSquareY",{get:function(){return null==this._sumOfSquareY&&(this._sumOfSquareY=MathHelper.sumOfSquares(this._y)),this._sumOfSquareY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumOfSquareLogX",{get:function(){return null==this._sumOfSquareLogX&&(this._sumOfSquareLogX=MathHelper.sumOfSquares(this.LogX)),this._sumOfSquareLogX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sumOfSquareLogY",{get:function(){return null==this._sumOfSquareLogY&&(this._sumOfSquareLogY=MathHelper.sumOfSquares(this.LogY)),this._sumOfSquareLogY},enumerable:!0,configurable:!0}),t.prototype.sumProduct=function(t,e){return null==this._sumProduct&&(this._sumProduct=MathHelper.sumProduct(t,e)),this._sumProduct},t}(),TrendHelperBase=function(){function t(t,e,i){this._coefficients=[],this.y=wijmo_1.asArray(t),this.x=wijmo_1.asArray(e),wijmo_1.assert(t.length===e.length,"Length of X and Y arrays are not equal"),this.count=i||t.length,this._calculator=new Calculator(e,t),this.xMin=this._calculator.minX,this.xMax=this._calculator.maxX}return Object.defineProperty(t.prototype,"calculator",{get:function(){return this._calculator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){t!==this.y&&(this._y=wijmo_1.asArray(t,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){t!==this.x&&(this._x=wijmo_1.asArray(t,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){t!==this.count&&(this._count=wijmo_1.asInt(t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xMin",{get:function(){return this._xMin},set:function(t){t!==this.xMin&&(this._xMin=wijmo_1.asNumber(t,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xMax",{get:function(){return this._xMax},set:function(t){t!==this.xMax&&(this._xMax=wijmo_1.asNumber(t,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"coefficients",{get:function(){return this._coefficients},enumerable:!0,configurable:!0}),t.prototype._calculateCoefficients=function(){var t=this.calcB(),e=this.calcA(t);this._coefficients.push(e,t)},t.prototype.calculateValues=function(){for(var t=(this.xMax-this.xMin)/(this.count-1),e=[[],[]],i=0;i<this.count;i++){var r=this.xMin+t*i,n=this.calcY(r);e[0].push(n),this._isXString?e[1].push(r-1):e[1].push(r)}return e},t.prototype.calcA=function(t){var e=this.y.length,i=this.calculator.sumX;return(this.calculator.sumY-(t=t||this.calcB())*i)/e},t.prototype.calcB=function(){var t=this.y.length,e=this.calculator,i=e.sumProduct(e.x,e.y),r=e.sumX;return(t*i-r*e.sumY)/(t*e.sumOfSquareX-MathHelper.square(r))},t.prototype.calcY=function(t){var e=this.coefficients;return e[0]+e[1]*t},t.prototype.approximate=function(t){return this.calcY(t)},t.prototype.getEquation=function(t){t=t||this._defaultEquationFmt;return this._getEquation(t)},t.prototype._getEquation=function(t){var e=[];return this.coefficients.forEach(function(i){e.push(t(i))}),this._concatEquation(e)},t.prototype._concatEquation=function(t){return""},t.prototype._defaultEquationFmt=function(t){var e,i=Math.abs(t),r=String(i),n=0;return i>=1e5?(e=String(Math.round(i)).length-1,Math.round(t/Number("1e"+e))+"e"+e):i<1e-4?(e=r.indexOf("e")>-1?Math.abs(+r.substring(r.indexOf("e")+1)):r.match(/\.0+/)[0].length,Math.round(t*Number("1e"+e))+"e-"+e):(n=t>0?6:7,i>=1e4&&n--,String(+String(t).substring(0,n)))},t}(),LinearHelper=function(t){function e(e,i,r,n){var a=t.call(this,e,i,r)||this;return a._calculateCoefficients(),a.yOffset=n,a}return __extends(e,t),Object.defineProperty(e.prototype,"yOffset",{get:function(){return this._yOffset},set:function(t){t!==this.yOffset&&(this._yOffset=wijmo_1.asNumber(t,!0))},enumerable:!0,configurable:!0}),e.prototype.calcA=function(e){return null!=this.yOffset?this.yOffset:t.prototype.calcA.call(this,e)},e.prototype.calcB=function(){return null!=this.yOffset?this._calculateBSimple():t.prototype.calcB.call(this)},e.prototype._calculateBSimple=function(){var t=this.calculator,e=t.sumProduct(t.x,t.y),i=t.sumX,r=t.sumOfSquareX;return(e-this.yOffset*i)/r},e.prototype._calculateCoefficients=function(){var t=this.calcB(),e=this.calcA(t);this.coefficients.push(t,e)},e.prototype.calcY=function(t){var e=this.coefficients;return e[0]*t+e[1]},e.prototype._concatEquation=function(t){return"y = "+t[0]+"x"+(this.coefficients[1]>=0?"+":"")+t[1]},e}(TrendHelperBase),LogHelper=function(t){function e(e,i,r){var n=t.call(this,e,i,r)||this;return n._calculateCoefficients(),n}return __extends(e,t),e.prototype.calcA=function(t){var e=this.y.length,i=this.calculator,r=i.sumY,n=i.sumLogX;return(r-(t=t||this.calcB())*n)/e},e.prototype.calcB=function(){var t=this.y.length,e=this.calculator,i=e.sumProduct(e.y,e.LogX),r=e.sumY,n=e.sumLogX;return(t*i-r*n)/(t*e.sumOfSquareLogX-MathHelper.square(n))},e.prototype._calculateCoefficients=function(){var t=this.calcB(),e=this.calcA(t);this.coefficients.push(t,e)},e.prototype.calcY=function(t){var e=this.coefficients;return Math.log(t)*e[0]+e[1]},e.prototype._concatEquation=function(t){return"y = "+t[0]+"ln(x)"+(this.coefficients[1]>=0?"+":"")+t[1]},e}(TrendHelperBase),ExpHelper=function(t){function e(e,i,r){var n=t.call(this,e,i,r)||this;return n._calculateCoefficients(),n}return __extends(e,t),e.prototype.calcA=function(){var t=this.y.length,e=this.calculator,i=e.sumLogY,r=e.sumOfSquareX,n=e.sumX,a=e.sumProduct(e.x,e.LogY);return Math.exp((i*r-n*a)/(t*r-MathHelper.square(n)))},e.prototype.calcB=function(){var t=this.y.length,e=this.calculator,i=e.sumLogY,r=e.sumOfSquareX,n=e.sumX;return(t*e.sumProduct(e.x,e.LogY)-n*i)/(t*r-MathHelper.square(n))},e.prototype.calcY=function(t){var e=this.coefficients;return e[0]*Math.exp(e[1]*t)},e.prototype._concatEquation=function(t){return"y = "+t[0]+"e<sup>"+t[1]+"x</sup>"},e}(TrendHelperBase),PowerHelper=function(t){function e(e,i,r){var n=t.call(this,e,i,r)||this;return n._calculateCoefficients(),n}return __extends(e,t),e.prototype.calcA=function(t){var e=this.calculator,i=this.y.length,r=e.sumLogX,n=e.sumLogY;t=t||this.calcB();return Math.exp((n-t*r)/i)},e.prototype.calcB=function(){var t=this.y.length,e=this.calculator,i=e.sumProduct(e.LogX,e.LogY),r=e.sumLogX;return(t*i-r*e.sumLogY)/(t*e.sumOfSquareLogX-MathHelper.square(r))},e.prototype.calcY=function(t){var e=this.coefficients;return e[0]*Math.pow(t,e[1])},e.prototype._concatEquation=function(t){return"y = "+t[0]+"x<sup>"+t[1]+"</sup>"},e}(TrendHelperBase),LeastSquaresHelper=function(t){function e(e,i,r,n){var a=t.call(this,e,i,r)||this;return a._order=null==n?2:n,a._basis=[],a._calculateCoefficients(),a}return __extends(e,t),Object.defineProperty(e.prototype,"basis",{get:function(){return this._basis},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(t){this._order=wijmo_1.asNumber(t,!0)},enumerable:!0,configurable:!0}),e.prototype._calculateCoefficients=function(){this._coefficients.length=this.order,this._createBasis(),this._normalizeAndSolveGauss()},e.prototype._createBasis=function(){var t=this.x.length,e=this.order;if(t<2)throw"Incompatible data: Less than 2 data points.";if(e<1)throw"Incompatible data: Less than 1 coefficient in the fit";if(e>t)throw"Incompatible data: Number of data points less than number of terms"},e.prototype._normalizeAndSolveGauss=function(){var t=[];if(this._computeNormalEquations(t),this._genDefValForArray(t,0),!this._solveGauss(t))throw"Incompatible data: No solution."},e.prototype._genDefValForArray=function(t,e){var i=t.length+1;t.forEach(function(t){for(var r=0;r<i;r++)null==t[r]&&(t[r]=e)})},e.prototype._computeNormalEquations=function(t){var e,i,r,n,a=this.y,o=this.basis,s=this.order,u=a.length;for(e=0;e<s;e++)for(r=0,null==t[e]&&(t[e]=[]),a.forEach(function(t,i){r+=t*o[i][e]}),t[e][s]=r,i=e;i<s;i++){for(r=0,n=0;n<u;n++)r+=o[n][i]*o[n][e];null==t[i]&&(t[i]=[]),t[i][e]=r,t[e][i]=r}},e.prototype._solveGauss=function(t){var e,i,r=t.length,n=this._coefficients,a=!0;if(n.length<r||t[0].length<r+1)throw"Dimension of matrix is not correct.";if(t.some(function(e,n){var o,s,u=n,l=Math.abs(e[n]);for(i=n+1;i<r;i++)l<(o=Math.abs(t[i][n]))&&(l=o,u=i);if(!(l>0))return a=!1,!0;for(i=n;i<=r;i++)s=t[n][i],t[n][i]=t[u][i],t[u][i]=s;for(u=n+1;u<r;u++)for(s=t[u][n]/e[n],t[u][n]=0,i=n+1;i<=r;i++)t[u][i]-=s*e[i]}),a)for(e=r-1;e>=0;e--){for(n[e]=t[e][r],i=e+1;i<r;i++)n[e]-=t[e][i]*n[i];n[e]=n[e]/t[e][e]}return a},e}(TrendHelperBase),PolyHelper=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return __extends(e,t),Object.defineProperty(e.prototype,"coefficients",{get:function(){return this._coefficients.slice(0).reverse()},enumerable:!0,configurable:!0}),e.prototype.calcY=function(t){var e=0,i=1;return this._coefficients.forEach(function(r,n){n>0&&(i*=t),e+=r*i}),e},e.prototype._calculateCoefficients=function(){this._coefficients;this.order++,t.prototype._calculateCoefficients.call(this),this.order--},e.prototype._createBasis=function(){t.prototype._createBasis.call(this);var e=this.x,i=this.basis,r=this.order;e.forEach(function(t,e){i[e]=[1];for(var n=1;n<=r;n++)i[e][n]=t*i[e][n-1]})},e.prototype._concatEquation=function(t){var e="y = ",i=t.length,r=this.coefficients;return t.forEach(function(t,n){var a,o=i-1-n;0===o?e+=t:1===o?(a=r[n+1]>=0?"+":"",e+=t+"x"+a):(a=r[n+1]>=0?"+":"",e+=t+"x<sup>"+o+"</sup>"+a)}),e},e}(LeastSquaresHelper),FourierHelper=function(t){function e(e,i,r,n){return n=null==n?i.length:n,t.call(this,e,i,r,n)||this}return __extends(e,t),e.prototype._createBasis=function(){t.prototype._createBasis.call(this);var e=this.x,i=this.basis,r=this.order;e.forEach(function(t,e){var n,a;for(i[e]=[1],n=1;n<r;n++)a=Math.floor((n+1)/2),n%2==1?i[e].push(Math.cos(a*t)):i[e].push(Math.sin(a*t))})},e.prototype.calcY=function(t){var e;return this._coefficients.forEach(function(i,r){var n,a=Math.floor((r+1)/2);0===r?e=i:(n=a*t,e+=r%2==1?i*Math.cos(n):i*Math.sin(n))}),e},e.prototype._concatEquation=function(t){var e="y = ",i=t.length,r=this.coefficients;return t.forEach(function(t,n){var a=n===i-1?"":r[n+1]>=0?"+":"",o="",s=Math.ceil(n/2);if(0===n)e+=t+a;else{o=n%2==1?"cos":"sin";o+="("+(1===s?"":String(s))+"x)",e+=t+o+a}}),e},e}(LeastSquaresHelper),SimpleTrendHelper=function(t){function e(e,i,r){var n=t.call(this,e,i,r)||this;return n._calculateCoefficients(),n}return __extends(e,t),e.prototype._setVal=function(t){this._val=t},e.prototype.calcY=function(t){return this._val},e}(TrendHelperBase),MinXHelper=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return __extends(e,t),e.prototype.calculateValues=function(){var t,e,i=this.xMin,r=MathHelper.min(this.y),n=MathHelper.max(this.y);return this._isXString&&(i-=1),t=[i,i],e=[r,n],this._setVal(i),[e,t]},e.prototype.getEquation=function(t){var e=this.xMin;return this._isXString&&(e-=1),t&&(e=t(e)),"x = "+e},e}(SimpleTrendHelper),MinYHelper=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return __extends(e,t),e.prototype.calculateValues=function(){var t,e,i=this.xMin,r=this.xMax,n=MathHelper.min(this.y);return this._isXString&&(i-=1,r-=1),t=[i,r],e=[n,n],this._setVal(n),[e,t]},e.prototype.getEquation=function(t){var e=MathHelper.min(this.y);return t&&(e=t(e)),"y = "+e},e}(SimpleTrendHelper),MaxXHelper=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return __extends(e,t),e.prototype.calculateValues=function(){var t,e,i=this.xMax,r=MathHelper.min(this.y),n=MathHelper.max(this.y);return this._isXString&&(i-=1),t=[i,i],e=[r,n],this._setVal(i),[e,t]},e.prototype.getEquation=function(t){var e=this.xMax;return this._isXString&&(e-=1),t&&(e=t(e)),"x = "+e},e}(SimpleTrendHelper),MaxYHelper=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return __extends(e,t),e.prototype.calculateValues=function(){var t,e,i=this.xMin,r=this.xMax,n=MathHelper.max(this.y);return this._isXString&&(i-=1,r-=1),t=[i,r],e=[n,n],this._setVal(n),[e,t]},e.prototype.getEquation=function(t){var e=MathHelper.max(this.y);return t&&(e=t(e)),"y = "+e},e}(SimpleTrendHelper),AverageXHelper=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return __extends(e,t),e.prototype.calculateValues=function(){var t,e,i=MathHelper.avg(this.x),r=MathHelper.min(this.y),n=MathHelper.max(this.y);return this._isXString&&(i-=1),t=[i,i],e=[r,n],this._setVal(i),[e,t]},e.prototype._getEquation=function(t){var e=MathHelper.avg(this.x);return this._isXString&&(e-=1),t&&(e=t(e))," x ="+e},e.prototype._defaultEquationFmt=function(e){return Math.abs(e)<1e5?t.prototype._defaultEquationFmt.call(this,e):""+MathHelper.round(e,2)},e}(SimpleTrendHelper),AverageYHelper=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return __extends(e,t),e.prototype.calculateValues=function(){var t,e,i=MathHelper.avg(this.y),r=this.xMin,n=this.xMax;return this._isXString&&(r-=1,n-=1),t=[r,n],e=[i,i],this._setVal(i),[e,t]},e.prototype._getEquation=function(t){return"y = "+t(MathHelper.avg(this.y))},e.prototype._defaultEquationFmt=function(e){return Math.abs(e)<1e5?t.prototype._defaultEquationFmt.call(this,e):""+MathHelper.round(e,2)},e}(SimpleTrendHelper),TrendLineHelper={TrendHelperBase:TrendHelperBase,Linear:LinearHelper,Exponential:ExpHelper,Logarithmic:LogHelper,Power:PowerHelper,Polynomial:PolyHelper,Fourier:FourierHelper,MinX:MinXHelper,MinY:MinYHelper,MaxX:MaxXHelper,MaxY:MaxYHelper,AverageX:AverageXHelper,AverageY:AverageYHelper},FunctionSeries=function(t){function e(e){var i=t.call(this)||this;return i._min=0,i._max=1,i.initialize(e),null==i.itemsSource&&(i.itemsSource=[new wijmo_1.Point(0,0)]),i}return __extends(e,t),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min!==t&&(this._min=wijmo_1.asNumber(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max!==t&&(this._max=wijmo_1.asNumber(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype.getValues=function(t){return null!=this._xValues&&null!=this._yValues||this._calculateValues(),0===t?this._yValues||null:1===t?this._xValues||null:void 0},e.prototype._calculateValues=function(){for(var t,e=this.sampleCount,i=[],r=[],n=(this.max-this.min)/(e-1),a=0;a<e;a++)t=a===e-1?this.max:this.min+n*a,i[a]=this._calculateX(t),r[a]=this._calculateY(t);this._yValues=r,this._xValues=i},e.prototype._validateValue=function(t){return isFinite(t)?t:Number.NaN},e.prototype._calculateValue=function(t,e){var i;try{i=t(e)}catch(t){i=Number.NaN}return this._validateValue(i)},e.prototype._calculateX=function(t){return 0},e.prototype._calculateY=function(t){return 0},e}(TrendLineBase);exports.FunctionSeries=FunctionSeries;var YFunctionSeries=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"func",{get:function(){return this._func},set:function(t){t&&this._func!==t&&(this._func=wijmo_1.asFunction(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype._calculateX=function(t){return t},e.prototype._calculateY=function(t){return this._calculateValue(this.func,t)},e.prototype.approximate=function(t){return this._calculateValue(this.func,t)},e}(FunctionSeries);exports.YFunctionSeries=YFunctionSeries;var ErrorAmount,ErrorBarEndStyle,ErrorBarDirection,ParametricFunctionSeries=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"xFunc",{get:function(){return this._xFunc},set:function(t){t&&this._xFunc!==t&&(this._xFunc=wijmo_1.asFunction(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yFunc",{get:function(){return this._yFunc},set:function(t){t&&this._yFunc!==t&&(this._yFunc=wijmo_1.asFunction(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype._calculateX=function(t){return this._calculateValue(this.xFunc,t)},e.prototype._calculateY=function(t){return this._calculateValue(this.yFunc,t)},e.prototype.approximate=function(t){var e=this._calculateValue(this.xFunc,t),i=this._calculateValue(this.yFunc,t);return new wijmo_1.Point(e,i)},e}(FunctionSeries);exports.ParametricFunctionSeries=ParametricFunctionSeries,function(t){t[t.FixedValue=0]="FixedValue",t[t.Percentage=1]="Percentage",t[t.StandardDeviation=2]="StandardDeviation",t[t.StandardError=3]="StandardError",t[t.Custom=4]="Custom"}(ErrorAmount=exports.ErrorAmount||(exports.ErrorAmount={})),function(t){t[t.Cap=0]="Cap",t[t.NoCap=1]="NoCap"}(ErrorBarEndStyle=exports.ErrorBarEndStyle||(exports.ErrorBarEndStyle={})),function(t){t[t.Both=0]="Both",t[t.Minus=1]="Minus",t[t.Plus=2]="Plus"}(ErrorBarDirection=exports.ErrorBarDirection||(exports.ErrorBarDirection={}));var QuartileCalculation,ErrorBar=function(t){function e(e){var i=t.call(this)||this;return i._errorAmount=ErrorAmount.FixedValue,i._endStyle=ErrorBarEndStyle.Cap,i._direction=ErrorBarDirection.Both,i.rendering.addHandler(i._rendering,i),i.initialize(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t!=this._value&&(this._value=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorAmount",{get:function(){return this._errorAmount},set:function(t){(t=wijmo_1.asEnum(t,ErrorAmount,!0))!=this._errorAmount&&(this._errorAmount=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorBarStyle",{get:function(){return this._errorBarStyle},set:function(t){t!=this._errorBarStyle&&(this._errorBarStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endStyle",{get:function(){return this._endStyle},set:function(t){(t=wijmo_1.asEnum(t,ErrorBarEndStyle,!0))!=this._endStyle&&(this._endStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){(t=wijmo_1.asEnum(t,ErrorBarDirection,!0))!=this._direction&&(this._direction=t,this._invalidate())},enumerable:!0,configurable:!0}),e.prototype.getDataRect=function(t,e){if(!t)return null;this._chart;var i,r=this.errorAmount,n=0,a=0;this._paddings=[],this._calculateErrorValue();var o,s,u,l,h=this.getValues(0);if(!h)return t;for(u=0,i=h.length;u<i;u++){var c={plus:0,val:0,minus:0},_=this._value||0;switch(l=h[u],r){case ErrorAmount.Custom:(c=this._getCustomValue(u)).val=l,this._paddings.push(c);break;case ErrorAmount.FixedValue:this._paddings.push({plus:_,minus:_,val:l});break;case ErrorAmount.Percentage:this._paddings.push({plus:l*_,minus:l*_,val:l});break;case ErrorAmount.StandardDeviation:this._paddings.push({plus:this._errorValue*_,minus:this._errorValue*_,val:l});break;case ErrorAmount.StandardError:this._paddings.push({plus:this._errorValue,minus:this._errorValue,val:l})}(isNaN(o)||o>l-c.minus)&&(o=l-c.minus),(isNaN(s)||s<l+c.plus)&&(s=l+c.plus)}switch(r){case ErrorAmount.FixedValue:n=_,a=_;break;case ErrorAmount.Percentage:n=o*_,a=s*_;break;case ErrorAmount.StandardDeviation:n=this._errorValue*_,a=this._errorValue*_;break;case ErrorAmount.StandardError:n=this._errorValue,a=this._errorValue}return this._showPlus&&(s+=a),this._showMinus&&(o-=n),new wijmo_1.Rect(t.left,o,t.width,s-o)},e.prototype._getCustomValue=function(t){var e,i=this.value,r={minus:0,val:0,plus:0};return null!=this._minusBindingValues||null!=this._plusBindingValues?(r.minus=this._minusBindingValues&&this._minusBindingValues[t]||0,r.plus=this._plusBindingValues&&this._plusBindingValues[t]||0,r):null==i?r:(wijmo_1.isArray(i)?((e=i[t])&&e.minus&&(r.minus=e.minus),e&&e.plus&&(r.plus=e.plus)):wijmo_1.isNumber(i)?(r.minus=i,r.plus=i):(i.minus&&(r.minus=i.minus),i.plus&&(r.plus=i.plus)),r)},e.prototype._calculateErrorValue=function(){var t=0,e=0,i=0;if(this._errorAmount===ErrorAmount.StandardDeviation||this._errorAmount===ErrorAmount.StandardError){var r=this.getValues(0);null!=r&&(r.forEach(function(i){t+=i,e++}),i=t/e,this._mean=i,t=0,r.forEach(function(e){t+=Math.pow(e-i,2)}),this._errorValue=Math.sqrt(t/(e-1))),this._errorAmount==ErrorAmount.StandardError&&(this._errorValue=this._errorValue/Math.sqrt(e))}},e.prototype._clearValues=function(){this.__errorValue=null,this._mean=null,this._plusBindingValues=null,this._minusBindingValues=null,t.prototype._clearValues.call(this)},e.prototype.getValues=function(e){if(0==e&&this.errorAmount===ErrorAmount.Custom){var i=this._getBinding(1),r=this._getBinding(2);if((null==this._plusBindingValues||null==this._minusBindingValues)&&i&&r)if(null!=this._cv){if(i){var n=this._bindValues(this._cv.items,i);this._plusBindingValues=n.values}if(r){var a=this._bindValues(this._cv.items,r);this._minusBindingValues=a.values}}else if(null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView){if(i){n=this._bindValues(this._chart.collectionView.items,i);this._plusBindingValues=n.values}if(r){a=this._bindValues(this._chart.collectionView.items,r);this._minusBindingValues=a.values}}}return t.prototype.getValues.call(this,e)},Object.defineProperty(e.prototype,"_chart",{get:function(){return this.__chart},set:function(t){t!==this.__chart&&(this.__chart=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_errorValue",{get:function(){return this.__errorValue},set:function(t){t!=this.__errorValue&&(this.__errorValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_showPlus",{get:function(){return this.direction===ErrorBarDirection.Both||this.direction===ErrorBarDirection.Plus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_showMinus",{get:function(){return this.direction===ErrorBarDirection.Both||this.direction===ErrorBarDirection.Minus},enumerable:!0,configurable:!0}),e.prototype._rendering=function(t,e){var i=this;this._errorBarEles=[],e.cancel=!0;var r=this.chart,n=r._plotRect,a=this._getAxisY(),o=this._getAxisX(),s=(a.origin,e.engine),u=r.series.indexOf(this),l=this._plotter;l.plotSeries(s,o,a,this,r,e.index,e.count,function(t){var e,h,c,_=i._paddings,p=i._showPlus,f=i._showMinus,m=r._isRotated(),d=i.errorBarStyle&&i.errorBarStyle["stroke-width"]||2;c=(h=m?o:a).actualMax,e=h.convert(c);var y=s.stroke,g=s.strokeWidth;s.stroke="black",s.strokeWidth=1,t&&t.length&&t.forEach(function(t,r){if(null!=t.x&&null!=t.y){var a=_[r],o=a&&a.minus||0,y=a&&a.plus||0,g=Math.abs(h.convert(c-o)-e),b=Math.abs(h.convert(c+y)-e),v=new wijmo_1.Point(t.x,t.y),x=new wijmo_1.Point(t.x,t.y);m?(i.errorAmount===ErrorAmount.StandardDeviation&&(t=new wijmo_1.Point(h.convert(i._mean),t.y),v.x=t.x,x.x=t.x),f&&(v.x=v.x-g),p&&(x.x=x.x+b)):(i.errorAmount===ErrorAmount.StandardDeviation&&(t=new wijmo_1.Point(t.x,h.convert(i._mean)),v.y=t.y,x.y=t.y),f&&(v.y=v.y+g),p&&(x.y=x.y-b));var w=void 0;w=m?new wijmo_1.Rect(v.x,v.y-d,Math.abs(x.x-v.x),2*d):new wijmo_1.Rect(x.x-d,x.y,2*d,Math.abs(x.y-v.y));var P=new wijmo_chart_1._RectArea(w);P.ignoreLabel=!0;var M=new wijmo_chart_1._DataPoint(u,r,r,a.val);P.tag=M,l.hitTester.add(P,u);var j=[s.drawLine(Math.max(v.x,n.left),Math.min(v.y,n.bottom),Math.min(x.x,n.right),Math.max(x.y,n.top),"error-bar",i.errorBarStyle)];if(i._errorBarEles[r]=j,i.endStyle===ErrorBarEndStyle.Cap){if(p){var S=void 0;m?x.x<=n.right&&(S=s.drawLine(x.x,x.y-d,x.x,x.y+d,"error-bar",i.errorBarStyle),j.push(S)):x.y>=n.top&&(S=s.drawLine(x.x-d,x.y,x.x+d,x.y,"error-bar",i.errorBarStyle),j.push(S))}if(f){var V=void 0;m?v.x>=n.left&&(V=s.drawLine(v.x,v.y-d,v.x,v.y+d,"error-bar",i.errorBarStyle),j.push(V)):v.y<=n.bottom&&(V=s.drawLine(v.x-d,v.y,v.x+d,v.y,"error-bar",i.errorBarStyle),j.push(V))}}}}),s.stroke=y,s.strokeWidth=g})},e.prototype.getPlotElement=function(t){if(this.hostElement&&t<this._pointIndexes.length){var e=null==this._errorBarEles[t]?[]:this._errorBarEles[t].slice(),i=this._pointIndexes[t];return i<this.hostElement.childNodes.length&&e.push(this.hostElement.childNodes[i]),e}return null},e}(wijmo_chart_1.Series);exports.ErrorBar=ErrorBar,function(t){t[t.InclusiveMedian=0]="InclusiveMedian",t[t.ExclusiveMedian=1]="ExclusiveMedian"}(QuartileCalculation=exports.QuartileCalculation||(exports.QuartileCalculation={}));var BoxWhisker=function(t){function e(e){var i=t.call(this)||this;return i._groupWidth=.8,i._gapWidth=.1,i._showInnerPoints=!1,i._showOutliers=!1,i._quartileCalculation=QuartileCalculation.InclusiveMedian,i._chartType=wijmo_chart_1.ChartType.Bar,i.rendering.addHandler(i._rendering,i),i.initialize(e),i}return __extends(e,t),e.prototype._initProperties=function(t){t&&wijmo_1.copy(this,t)},e.prototype._clearValues=function(){t.prototype._clearValues.call(this)},Object.defineProperty(e.prototype,"quartileCalculation",{get:function(){return this._quartileCalculation},set:function(t){(t=wijmo_1.asEnum(t,QuartileCalculation,!0))!=this._quartileCalculation&&(this._quartileCalculation=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupWidth",{get:function(){return this._groupWidth},set:function(t){t!=this._groupWidth&&t>=0&&t<=1&&(this._groupWidth=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gapWidth",{get:function(){return this._gapWidth},set:function(t){t!=this._gapWidth&&t>=0&&t<=1&&(this._gapWidth=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMeanLine",{get:function(){return this._showMeanLine},set:function(t){t!=this._showMeanLine&&(this._showMeanLine=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meanLineStyle",{get:function(){return this._meanLineStyle},set:function(t){t!=this._meanLineStyle&&(this._meanLineStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMeanMarker",{get:function(){return this._showMeanMarker},set:function(t){t!=this._showMeanMarker&&(this._showMeanMarker=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meanMarkerStyle",{get:function(){return this._meanMarkerStyle},set:function(t){t!=this._meanMarkerStyle&&(this._meanMarkerStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInnerPoints",{get:function(){return this._showInnerPoints},set:function(t){t!=this._showInnerPoints&&(this._showInnerPoints=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOutliers",{get:function(){return this._showOutliers},set:function(t){t!=this._showOutliers&&(this._showOutliers=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),e.prototype._rendering=function(t,e){var i=this;e.cancel=!0;var r,n,a=this,o=a.chart,s=(a.chart,a._getAxisX()),u=a._getAxisY(),l=e.index,h=e.count,c=e.engine,_=this._plotter,p=o.series.indexOf(a),f=wijmo_1.asType(a,wijmo_chart_1.SeriesBase),m=this.quartileCalculation,d=this.showOutliers,y=this.groupWidth,g=(null==this.gapWidth?.2:this.gapWidth)/2;l=l||0;var b=y/(h=h||1),v=a.getValues(0),x=a.getValues(1);if(v){if(x||(x=_.dataInfo.getXVals()),x){var w=_.dataInfo.getDeltaX();w>0&&(y*=w,b*=w)}var P=f._getSymbolFill(p),M=f._getAltSymbolFill(p)||P,j=f._getSymbolStroke(p),S=f._getAltSymbolStroke(p)||j,V=v.length;null!=x&&(V=Math.min(V,x.length));var L,O,E=0,B=0,T=_.getItemFormatter(a);if(_.rotated){(E=s.origin||E)<s.actualMin?E=s.actualMin:E>s.actualMax&&(E=s.actualMax);s.convert(E);var X=u.actualMin,A=u.actualMax;for(F=0;F<V;F++){Q=x?x[F]:F;if(null==(k=v[F])||0===k.length)return;if(_._getSymbolOrigin&&u.convert(_._getSymbolOrigin(E,F)),_._getSymbolStyles)P=(I=_._getSymbolStyles(F))&&I.fill?I.fill:P,M=I&&I.fill?I.fill:M,j=I&&I.stroke?I.fill:j,S=I&&I.stroke?I.fill:S;if(L=k[0]>0?P:M,O=k[0]>0?j:S,c.fill=L,c.stroke=O,wijmo_chart_1._DataInfo.isValid(Q)&&wijmo_1.isArray(k)&&k.length>0&&wijmo_chart_1._DataInfo.isValid(k[0])){var q=Q-.5*y+l*b,Y=Q-.5*y+(l+1)*b;if(Y-=D=(Y-q)*g,(q+=D)<X&&Y<X||q>A&&Y>A)continue;q=u.convert(q),Y=u.convert(Y);K=new _BoxPlot(k,m,d),U={min:s.convert(K.min),max:s.convert(K.max),firstQuartile:s.convert(K.firstQuartile),median:s.convert(K.median),thirdQuartile:s.convert(K.thirdQuartile),mean:s.convert(K.mean),outlierPoints:this._convertPoints(K.outlierPoints,s),innerPoints:this._convertPoints(K.innerPoints,s)},J=new wijmo_1.Rect(Math.min(U.min,U.max),Math.min(q,Y),Math.abs(U.max-U.min),Math.abs(Y-q)),Z=new wijmo_chart_1._RectArea(J);var H={min:Math.min(q,Y),median:(q+Y)/2,max:Math.max(Y,q)};if(T)c.startGroup(),(G=new wijmo_chart_1.HitTestInfo(o,new wijmo_1.Point((U.min+U.max)/2,H.median),wijmo_chart_1.ChartElement.SeriesSymbol))._setData(a,F),T(c,G,function(){i._drawBoxWhisker(c,U,H,r,n,a),r=U,n=H}),c.endGroup();else this._drawBoxWhisker(c,U,H,r,n,a),r=U,n=H;a._setPointIndex(F,B),B++,(z=new wijmo_chart_1._DataPoint(p,F,k,Q)).item=K,Z.tag=z,_.hitTester.add(Z,p),K.outlierPoints&&K.outlierPoints.length&&K.outlierPoints.forEach(function(t,e){var i=U.outlierPoints[e],r=new wijmo_chart_1._CircleArea(new wijmo_1.Point(i,J.top+J.height/2),2);r.tag=z,_.hitTester.add(r,p)})}}}else{(E=u.origin||E)<u.actualMin?E=u.actualMin:E>u.actualMax&&(E=u.actualMax);u.convert(E);for(var C=s.actualMin,N=s.actualMax,F=0;F<V;F++){var k,I,Q=x?x[F]:F;if(null==(k=v[F])||0===k.length)return;if(_._getSymbolOrigin&&u.convert(_._getSymbolOrigin(E,F,V)),_._getSymbolStyles)P=(I=_._getSymbolStyles(F,V))&&I.fill?I.fill:P,M=I&&I.fill?I.fill:M,j=I&&I.stroke?I.stroke:j,S=I&&I.stroke?I.stroke:S;if(L=k[0]>0?P:M,O=k[0]>0?j:S,c.fill=L,c.stroke=O,wijmo_chart_1._DataInfo.isValid(Q)&&wijmo_1.isArray(k)&&k.length>0&&wijmo_chart_1._DataInfo.isValid(k[0])){var D,W=Q-.5*y+l*b,R=Q-.5*y+(l+1)*b;if(R-=D=(R-W)*g,(W+=D)<C&&R<C||W>N&&R>N)continue;if(W=s.convert(W),R=s.convert(R),!wijmo_chart_1._DataInfo.isValid(W)||!wijmo_chart_1._DataInfo.isValid(R))continue;var G,z,K=new _BoxPlot(k,m,d),U={min:u.convert(K.min),max:u.convert(K.max),firstQuartile:u.convert(K.firstQuartile),median:u.convert(K.median),thirdQuartile:u.convert(K.thirdQuartile),mean:u.convert(K.mean),outlierPoints:this._convertPoints(K.outlierPoints,u),innerPoints:this._convertPoints(K.innerPoints,u)},J=new wijmo_1.Rect(Math.min(W,R),Math.min(U.min,U.max),Math.abs(R-W),Math.abs(U.max-U.min)),Z=new wijmo_chart_1._RectArea(J),$={min:Math.min(W,R),median:(W+R)/2,max:Math.max(W,R)};if(T)c.startGroup(),(G=new wijmo_chart_1.HitTestInfo(o,new wijmo_1.Point($.median,(U.min+U.max)/2),wijmo_chart_1.ChartElement.SeriesSymbol))._setData(a,F),T(c,G,function(){i._drawBoxWhisker(c,$,U,r,n,a),r=$,n=U}),c.endGroup();else this._drawBoxWhisker(c,$,U,r,n,a),r=$,n=U;a._setPointIndex(F,B),B++,(z=new wijmo_chart_1._DataPoint(p,F,Q,k)).item=K,Z.tag=z,_.hitTester.add(Z,p),K.outlierPoints&&K.outlierPoints.length&&K.outlierPoints.forEach(function(t,e){var i=U.outlierPoints[e],r=new wijmo_chart_1._CircleArea(new wijmo_1.Point(J.left+J.width/2,i),2);r.tag=z,_.hitTester.add(r,p)})}}}}},e.prototype._convertPoints=function(t,e){return t.map(function(t){return e.convert(t)})},e.prototype._drawBoxWhisker=function(t,e,i,r,n,a){var o=a.symbolStyle,s=this.showInnerPoints,u=this.showOutliers,l=this.showMeanLine,h=this.meanLineStyle,c=this.showMeanMarker,_=this.meanMarkerStyle,p=this._plotter;if(t.startGroup("box-plot"),p.rotated){if(t.drawLine(e.min,(i.min+i.median)/2,e.min,(i.max+i.median)/2,null,o),t.drawLine(e.min,i.median,e.firstQuartile,i.median,null,o),t.drawRect(Math.min(e.firstQuartile,e.thirdQuartile),Math.min(i.min,i.max),Math.abs(e.thirdQuartile-e.firstQuartile),Math.abs(i.max-i.min),null,o),t.drawLine(e.median,i.min,e.median,i.max,null,o),t.drawLine(e.max,i.median,e.thirdQuartile,i.median,null,o),t.drawLine(e.max,(i.min+i.median)/2,e.max,(i.max+i.median)/2,null,o),l&&r&&n&&t.drawLine(e.mean,i.median,r.mean,n.median,"box-whisker-mean-line",h||o),c){var f=Math.abs(i.median-i.min)/2;t.drawLine(e.mean-f,i.median-f,e.mean+f,i.median+f,null,_||o),t.drawLine(e.mean+f,i.median-f,e.mean-f,i.median+f,null,_||o)}u&&e.outlierPoints.forEach(function(e){t.drawPieSegment(e,i.median,2,0,2*Math.PI,null,o)}),s&&e.innerPoints.forEach(function(e){t.drawPieSegment(e,i.median,2,0,2*Math.PI,null,o)})}else{if(t.drawLine((e.min+e.median)/2,i.min,(e.max+e.median)/2,i.min,null,o),t.drawLine(e.median,i.min,e.median,i.firstQuartile,null,o),t.drawRect(Math.min(e.min,e.max),Math.min(i.firstQuartile,i.thirdQuartile),Math.abs(e.max-e.min),Math.abs(i.thirdQuartile-i.firstQuartile),null,o),t.drawLine(e.min,i.median,e.max,i.median,null,o),t.drawLine(e.median,i.max,e.median,i.thirdQuartile,null,o),t.drawLine((e.min+e.median)/2,i.max,(e.max+e.median)/2,i.max,null,o),l&&r&&n&&t.drawLine(e.median,i.mean,r.median,n.mean,"box-whisker-mean-line",h||o),c){f=Math.abs(e.median-e.min)/2;t.drawLine(e.median-f,i.mean-f,e.median+f,i.mean+f,null,_||o),t.drawLine(e.median-f,i.mean+f,e.median+f,i.mean-f,null,_||o)}u&&i.outlierPoints.forEach(function(i){t.drawPieSegment(e.median,i,2,0,2*Math.PI,null,o)}),s&&i.innerPoints.forEach(function(i){t.drawPieSegment(e.median,i,2,0,2*Math.PI,null,o)})}t.endGroup()},e.prototype._renderLabels=function(t,e,i,r){var n=this,a=this,o=this._plotter,s=e.length,u=i.dataLabel,l=u.border,h=u.offset,c=u.connectingLine,_="dataY";o.rotated&&(_="dataX"),void 0===h&&(h=c?16:0),l&&(h-=2);for(var p=[],f=0;f<s;f++){var m=e[f],d=m.tag,y=wijmo_1.asType(d,wijmo_chart_1._DataPoint,!0);if(y&&-1==p.indexOf(y)){p.push(y);var g=d.item,b=d.y;if(d[_]=g.min,d.yfmt=g.min,d.y=g.min,this._plotter._renderLabel(t,m,y,i,u,a,h,r),d[_]=g.firstQuartile,d.yfmt=g.firstQuartile,d.y=g.firstQuartile,this._plotter._renderLabel(t,m,y,i,u,a,h,r),d[_]=g.median,d.yfmt=g.median,d.y=g.median,this._plotter._renderLabel(t,m,y,i,u,a,h,r),d[_]=g.thirdQuartile,d.yfmt=g.thirdQuartile,d.y=g.thirdQuartile,this._plotter._renderLabel(t,m,y,i,u,a,h,r),d[_]=g.max,d.yfmt=g.max,d.y=g.max,this._plotter._renderLabel(t,m,y,i,u,a,h,r),this.showMeanMarker){var v=Number(g.mean.toFixed(2));d[_]=v,d.yfmt=v,d.y=v,this._plotter._renderLabel(t,m,y,i,u,a,h,r)}g.showOutliers&&g.outlierPoints&&g.outlierPoints.forEach(function(e){d[_]=e,d.yfmt=e,d.y=e,n._plotter._renderLabel(t,m,y,i,u,a,h,r)}),d.y=b}}},e}(wijmo_chart_1.SeriesBase);exports.BoxWhisker=BoxWhisker;var _BoxPlot=function(){function t(t,e,i){this._outlierPoints=[],this._innerPoints=[],this._data=t,this._quartileCalculation=e,this._showOutliers=i,this._parse()}return Object.defineProperty(t.prototype,"showOutliers",{get:function(){return this._showOutliers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mean",{get:function(){return this._mean},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstQuartile",{get:function(){return this._firstQuartile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thirdQuartile",{get:function(){return this._thirdQuartile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"median",{get:function(){return this._median},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlierPoints",{get:function(){return this._outlierPoints},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerPoints",{get:function(){return this._innerPoints},enumerable:!0,configurable:!0}),t.prototype._parse=function(){var t=this,e=this._data.length,i=this._data,r=0;this._outlierPoints=[],this._innerPoints=[],i.sort(function(t,e){return t-e}),i.some(function(e){return null!=e&&(t._min=e,!0)}),this._max=null==i[e-1]?0:i[e-1],this._quartileCalculation===QuartileCalculation.InclusiveMedian?(this._firstQuartile=this._quartileInc(i,.25),this._median=this._quartileInc(i,.5),this._thirdQuartile=this._quartileInc(i,.75)):(this._firstQuartile=this._quartileExc(i,.25),this._median=this._quartileExc(i,.5),this._thirdQuartile=this._quartileExc(i,.75)),this._iqr=1.5*Math.abs(this._thirdQuartile-this._firstQuartile);var n=this._firstQuartile-this._iqr,a=this._thirdQuartile+this._iqr;if(this._showOutliers){var o=this._max;this._max=this._min,this._min=o,this._data.forEach(function(e){r+=e,e<n||e>a?t._outlierPoints.push(e):(e<t._min&&(t._min=e),e>t._max&&(t._max=e))})}else r=this._data.reduce(function(t,e){return t+e},0);this._innerPoints=this._data.filter(function(e){if(e>t._min&&e<t._max)return!0}),this._mean=r/e},t.prototype._quartileInc=function(t,e){var i,r,n,a,o=t.length;return 1===o?t[0]:(a=(i=(o-1)*e+1)-(r=Math.floor(i)),(n=t[r-1])+(t[r]-n)*a)},t.prototype._quartileExc=function(t,e){var i,r,n,a,o=t.length;return 1===o?t[0]:2===o?t[Math.round(e)]:(o+1)%4==0?t[(o+1)*e]:(a=(i=(o+1)*e)-(r=Math.floor(i)),(n=t[r-1])+(t[r]-n)*a)},t}();exports._BoxPlot=_BoxPlot,wijmo_1._registerModule("wijmo.chart.analytics",selfModule);