/*!
    *
    * Wijmo Library 5.20191.603
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var wijmo_1=require("wijmo/wijmo"),selfModule=require("wijmo/wijmo.chart"),_VolumeHelper=function(){function t(t,e,i,n,r){this._volumes=wijmo_1.asArray(t),this._xVals=wijmo_1.asArray(e),this._xDataMin=wijmo_1.asNumber(i,!0,!1),this._xDataMax=wijmo_1.asNumber(n,!0,!1),this._xDataType=wijmo_1.asEnum(r,wijmo_1.DataType,!0),this._calcData=[],this._init()}return t.prototype.convert=function(e,i,n){var r=void 0,s=this._calcData.length,o=-1;if(this._hasXs&&this._xDataType===wijmo_1.DataType.Date){if(-1===(o=this._xVals.indexOf(e)))for(var a=0;a<this._xVals.length;a++){if(a<this._xVals.length-1&&this._xVals[a]<=e&&e<=this._xVals[a+1]){o=a;break}if(0===a&&e<=this._xVals[a]){o=a;break}if(a===this._xVals.length-1&&this._xVals[a]<=e){o=a;break}}-1===o&&(o=this._xVals.indexOf(Math.floor(e)),o=wijmo_1.clamp(o,0,s-1))}else this._hasXs?-1===(o=this._xVals.indexOf(e))&&(o=this._xVals.indexOf(Math.floor(e)),o=wijmo_1.clamp(o,0,s-1)):o=wijmo_1.clamp(Math.round(e),0,s-1);return 0<=o&&o<s&&(this._hasXs&&(e=t.convertToRange(e,0,s-1,this._xDataMin,this._xDataMax)),r=((r=this._calcData[o].value+(e-o)*this._calcData[o].width-.5*this._calcData[o].width)-(i=this._getXVolume(i)))/((n=this._getXVolume(n))-i)),r},t.prototype.convertBack=function(e,i,n){var r,s=void 0,o=this._calcData.length,a=-1;for(r=0;r<o;r++)if(this._calcData[r].x1<=e&&e<=this._calcData[r].x2||0===r&&e<=this._calcData[r].x2||r===o-1&&this._calcData[r].x1<=e){a=r;break}return 0<=a&&a<o&&(s=e/this._calcData[a].width-this._calcData[a].value/this._calcData[a].width+.5+r,this._hasXs&&(s=t.convertToRange(s,this._xDataMin,this._xDataMax,0,o-1))),s},t.prototype._init=function(){this._hasXs=null!==this._xVals&&this._xVals.length>0,this._hasXs&&!wijmo_1.isNumber(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals)),this._hasXs&&!wijmo_1.isNumber(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals)),this._hasXs&&(this._hasXs=wijmo_1.isNumber(this._xDataMin)&&wijmo_1.isNumber(this._xDataMax)),this._hasXs&&this._xDataType===wijmo_1.DataType.Date&&this._fillGaps();var t=0,e=0,i=null!==this._volumes&&this._volumes.length>0?this._volumes.length:0;for(e=0;e<i;e++)t+=this._volumes[e]||0;var n,r,s=0;for(e=0;e<i;e++)n=s+(r=(this._volumes[e]||0)/t),this._calcData.push({value:n,width:r,x1:s,x2:n}),s=this._calcData[e].value},t.prototype._getXVolume=function(e){var i=this._calcData.length,n=-1;if(this._hasXs){n=this._xVals.indexOf(e);for(var r=0;r<this._xVals.length;r++){if(r<this._xVals.length-1&&this._xVals[r]<=e&&e<=this._xVals[r+1]){n=r;break}if(0===r&&e<=this._xVals[r]){n=r;break}if(r===this._xVals.length-1&&this._xVals[r]<=e){n=r;break}}}return this._hasXs&&(e=t.convertToRange(e,0,i-1,this._xDataMin,this._xDataMax)),-1===n&&(n=wijmo_1.clamp(Math.round(e),0,i-1)),this._calcData[n].value+(e-n)*this._calcData[n].width-.5*this._calcData[n].width},t.convertToRange=function(t,e,i,n,r){return e===i||n===r?0:(t-n)*(i-e)/(r-n)+e},t.prototype._fillGaps=function(){if(!(this._xDataType!==wijmo_1.DataType.Date||null===this._xVals||this._xVals.length<=0)){var t,e=this._xDataMin,i=this._xDataMax;for(t=1;e<i;t++)(e=new Date(e)).setDate(e.getDate()+1),(e=e.valueOf())!==this._xVals[t]&&(this._xVals.splice(t,0,e),this._volumes.splice(t,0,0))}},t}();exports._VolumeHelper=_VolumeHelper;var _Spline=function(){function t(t,e){this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]],this._x=t,this._y=e;var i=this._len=Math.min(t.length,e.length);if(i>3)for(var n=0;n<i-1;n++){var r=0==n?new wijmo_1.Point(t[n],e[n]):new wijmo_1.Point(t[n-1],e[n-1]),s=new wijmo_1.Point(t[n],e[n]),o=new wijmo_1.Point(t[n+1],e[n+1]),a=n==i-2?new wijmo_1.Point(t[n+1],e[n+1]):new wijmo_1.Point(t[n+2],e[n+2]),h=new wijmo_1.Point,l=new wijmo_1.Point,_=new wijmo_1.Point,u=new wijmo_1.Point;h.x=r.x*this.m[0][0]+s.x*this.m[0][1]+o.x*this.m[0][2]+a.x*this.m[0][3],l.x=r.x*this.m[1][0]+s.x*this.m[1][1]+o.x*this.m[1][2]+a.x*this.m[1][3],_.x=r.x*this.m[2][0]+s.x*this.m[2][1]+o.x*this.m[2][2]+a.x*this.m[2][3],u.x=r.x*this.m[3][0]+s.x*this.m[3][1]+o.x*this.m[3][2]+a.x*this.m[3][3],h.y=r.y*this.m[0][0]+s.y*this.m[0][1]+o.y*this.m[0][2]+a.y*this.m[0][3],l.y=r.y*this.m[1][0]+s.y*this.m[1][1]+o.y*this.m[1][2]+a.y*this.m[1][3],_.y=r.y*this.m[2][0]+s.y*this.m[2][1]+o.y*this.m[2][2]+a.y*this.m[2][3],u.y=r.y*this.m[3][0]+s.y*this.m[3][1]+o.y*this.m[3][2]+a.y*this.m[3][3],this._a.push(h),this._b.push(l),this._c.push(_),this._d.push(u)}}return t.prototype.calculatePoint=function(t){var e=Math.floor(t);e<0&&(e=0),e>this._len-2&&(e=this._len-2);var i=t-e;return{x:((this._a[e].x*i+this._b[e].x)*i+this._c[e].x)*i+this._d[e].x,y:((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y}},t.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};var t=[],e=[],i=this.calculatePoint(0);t.push(i.x),e.push(i.y);for(var n=this._len*this.k,r=n;r<=this._len-1;r+=n){var s=this.calculatePoint(r);(Math.abs(i.x-s.x)>=3||Math.abs(i.y-s.y)>=3)&&(t.push(s.x),e.push(s.y),i=s)}return{xs:t,ys:e}},t}();exports._Spline=_Spline;var Palettes=function(){function t(){}return t.standard=["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"],t.cocoa=["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872","#73b22b","#b87320","#141414"],t.coral=["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2","#ede9d0","#e96b7d","#888888"],t.dark=["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c","#d5a211","#dc0127","#000000"],t.highcontrast=["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a","#607efd","#1b7700","#000000"],t.light=["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7","#9e95c7","#95b0c7","#9b9b9b"],t.midnight=["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7","#d89c54","#e86996","#2c343b"],t.modern=["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6","#d0c041","#e35855","#68706a"],t.organic=["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0","#61bbd8","#e2d76f","#80715a"],t.slate=["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4","#bacc5c","#e5746a","#505d65"],t.zen=["#7bb5ae","#e2d287","#92b8da","#eac4cb","#7b8bbd","#c7d189","#b9a0c8","#dfb397","#a9a9a9"],t.cyborg=["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3","#3d6dcc","#525252","#000000"],t.superhero=["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c","#b6b86e","#4e5d6c","#2b3e4b"],t.flatly=["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5","#e74c3c","#8a9899","#2c3e50"],t.darkly=["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3","#b08725","#4a4949","#000000"],t.cerulan=["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323","#e3bb00","#cccccc","#222222"],t}();exports.Palettes=Palettes;var _SvgRenderEngine=function(){function t(e){this._strokeWidth=1,this._fontSize=null,this._fontFamily=null,this._savedGradient={},this._bbCache={},this._baseUrl="",this._element=e,this._create(),this._element.appendChild(this._svg);var i=navigator.userAgent.toLowerCase();void 0===t._isff&&(t._isff=i.indexOf("firefox")>=0),void 0===t._isSafari&&(t._isSafari=i.indexOf("safari")>-1&&-1==i.indexOf("chrome")),this._baseUrl=window.location.pathname.replace(window.location.hash,"").replace(/\/$/gi,"")}return t.prototype.beginRender=function(){for(;this._svg.firstChild;)wijmo_1.removeChild(this._svg.firstChild);this._savedGradient={},this._bbCache={},this._svg.appendChild(this._defs),this._svg.appendChild(this._textGroup)},t.prototype.endRender=function(){wijmo_1.removeChild(this._textGroup)},t.prototype.setViewportSize=function(t,e){this._svg.setAttribute("width",t.toString()),this._svg.setAttribute("height",e.toString())},Object.defineProperty(t.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFill",{get:function(){return this._textFill},set:function(t){this._textFill=t},enumerable:!0,configurable:!0}),t.prototype.addClipRect=function(e,i){if(e&&i){var n=document.createElementNS(t.svgNS,"clipPath"),r=document.createElementNS(t.svgNS,"rect");r.setAttribute("x",(e.left-1).toFixed()),r.setAttribute("y",(e.top-1).toFixed()),r.setAttribute("width",(e.width+2).toFixed()),r.setAttribute("height",(e.height+2).toFixed()),n.appendChild(r),n.setAttribute("id",i),this._svg.appendChild(n)}},t.prototype.drawEllipse=function(e,i,n,r,s,o){var a=document.createElementNS(t.svgNS,"ellipse");return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill),a.setAttribute("cx",e.toFixed(1)),a.setAttribute("cy",i.toFixed(1)),a.setAttribute("rx",n.toFixed(1)),a.setAttribute("ry",r.toFixed(1)),s&&a.setAttribute("class",s),this._applyStyle(a,o),this._appendChild(a),a},t.prototype.drawRect=function(e,i,n,r,s,o,a){var h=document.createElementNS(t.svgNS,"rect");return this._applyColor(h,"fill",this._fill),this._applyColor(h,"stroke",this._stroke),null!==this._strokeWidth&&h.setAttribute("stroke-width",this._strokeWidth.toString()),h.setAttribute("x",e.toFixed(1)),h.setAttribute("y",i.toFixed(1)),n>0&&n<.05?h.setAttribute("width","0.1"):h.setAttribute("width",n.toFixed(1)),r>0&&r<.05?h.setAttribute("height","0.1"):h.setAttribute("height",r.toFixed(1)),a&&this._setClipPath(h,a),s&&h.setAttribute("class",s),this._applyStyle(h,o),this._appendChild(h),h},t.prototype.drawLine=function(e,i,n,r,s,o){var a=document.createElementNS(t.svgNS,"line");return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),a.setAttribute("x1",e.toFixed(1)),a.setAttribute("x2",n.toFixed(1)),a.setAttribute("y1",i.toFixed(1)),a.setAttribute("y2",r.toFixed(1)),s&&a.setAttribute("class",s),this._applyStyle(a,o),this._appendChild(a),a},t.prototype.drawLines=function(e,i,n,r,s){if(e&&i){var o=Math.min(e.length,i.length);if(o>0){var a=document.createElementNS(t.svgNS,"polyline");this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),a.setAttribute("fill","none");for(var h="",l=0;l<o;l++)h+=e[l].toFixed(1)+","+i[l].toFixed(1)+" ";return a.setAttribute("points",h),n&&a.setAttribute("class",n),s&&this._setClipPath(a,s),this._applyStyle(a,r),this._appendChild(a),a}}return null},t.prototype.drawSplines=function(e,i,n,r,s){if(e&&i){var o=new _Spline(e,i).calculate(),a=o.xs,h=o.ys,l=Math.min(a.length,h.length);if(l>0){var _=document.createElementNS(t.svgNS,"polyline");this._applyColor(_,"stroke",this._stroke),null!==this._strokeWidth&&_.setAttribute("stroke-width",this._strokeWidth.toString()),_.setAttribute("fill","none");for(var u="",c=0;c<l;c++)u+=a[c].toFixed(1)+","+h[c].toFixed(1)+" ";return _.setAttribute("points",u),n&&_.setAttribute("class",n),s&&this._setClipPath(_,s),this._applyStyle(_,r),this._appendChild(_),_}}return null},t.prototype.drawPolygon=function(e,i,n,r,s){if(e&&i){var o=Math.min(e.length,i.length);if(o>0){var a=document.createElementNS(t.svgNS,"polygon");this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill);for(var h="",l=0;l<o;l++)h+=e[l].toFixed(1)+","+i[l].toFixed(1)+" ";return a.setAttribute("points",h),n&&a.setAttribute("class",n),s&&this._setClipPath(a,s),this._applyStyle(a,r),this._appendChild(a),a}}return null},t.prototype.drawPieSegment=function(e,i,n,r,s,o,a,h){if(s>=2*Math.PI)return this.drawEllipse(e,i,n,n,o,a);var l=document.createElementNS(t.svgNS,"path");this._applyColor(l,"fill",this._fill),this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&l.setAttribute("stroke-width",this._strokeWidth.toString());var _=new wijmo_1.Point(e,i);_.x+=n*Math.cos(r),_.y+=n*Math.sin(r);var u=r+s,c=new wijmo_1.Point(e,i);c.x+=n*Math.cos(u),c.y+=n*Math.sin(u);var p=" 0 0,1 ";Math.abs(s)>Math.PI&&(p=" 0 1,1 ");var d="M "+_.x.toFixed(1)+","+_.y.toFixed(1);return d+=" A "+n.toFixed(1)+","+n.toFixed(1)+p,d+=c.x.toFixed(1)+","+c.y.toFixed(1),d+=" L "+e.toFixed(1)+","+i.toFixed(1)+" z",l.setAttribute("d",d),h&&this._setClipPath(l,h),o&&l.setAttribute("class",o),this._applyStyle(l,a),this._appendChild(l),l},t.prototype.drawDonutSegment=function(e,i,n,r,s,o,a,h,l){var _=!1;o>=2*Math.PI&&(_=!0,o-=.001);var u=document.createElementNS(t.svgNS,"path");this._applyColor(u,"fill",this._fill),this._applyColor(u,"stroke",this._stroke),null!==this._strokeWidth&&u.setAttribute("stroke-width",this._strokeWidth.toString());var c=new wijmo_1.Point(e,i);c.x+=n*Math.cos(s),c.y+=n*Math.sin(s);var p=s+o,d=new wijmo_1.Point(e,i);d.x+=n*Math.cos(p),d.y+=n*Math.sin(p);var f=new wijmo_1.Point(e,i);f.x+=r*Math.cos(p),f.y+=r*Math.sin(p);var g=new wijmo_1.Point(e,i);g.x+=r*Math.cos(s),g.y+=r*Math.sin(s);var m=" 0 0,1 ",y=" 0 0,0 ";Math.abs(o)>Math.PI&&(m=" 0 1,1 ",y=" 0 1,0 ");var b="M "+c.x.toFixed(3)+","+c.y.toFixed(3);return b+=" A "+n.toFixed(3)+","+n.toFixed(3)+m,b+=d.x.toFixed(3)+","+d.y.toFixed(3),b+=_?" M "+f.x.toFixed(3)+","+f.y.toFixed(3):" L "+f.x.toFixed(3)+","+f.y.toFixed(3),b+=" A "+r.toFixed(3)+","+r.toFixed(3)+y,b+=g.x.toFixed(3)+","+g.y.toFixed(3),_||(b+=" z"),u.setAttribute("d",b),l&&this._setClipPath(u,l),a&&u.setAttribute("class",a),this._applyStyle(u,h),this._appendChild(u),u},t.prototype.drawString=function(t,e,i,n){var r=this._createText(e,t);i&&r.setAttribute("class",i),this._applyStyle(r,n),this._appendChild(r);var s,o=this._getKey(t,i,this._groupCls);return this._bbCache[o]?(s=this._bbCache[o],r.setAttribute("y",(e.y-(s.y+s.height)).toFixed(1))):(s=this._getBBox(r),r.setAttribute("y",(e.y-(s.y+s.height-e.y)).toFixed(1))),r},t.prototype.drawStringRotated=function(e,i,n,r,s,o){var a=this._createText(i,e);s&&a.setAttribute("class",s),this._applyStyle(a,o);var h=document.createElementNS(t.svgNS,"g");h.setAttribute("transform","rotate("+r.toFixed(1)+","+n.x.toFixed(1)+","+n.y.toFixed(1)+")"),h.appendChild(a),this._appendChild(h);var l=this._getBBox(a);return a.setAttribute("y",(i.y-(l.y+l.height-i.y)).toFixed(1)),a},t.prototype.measureString=function(t,e,i,n){var r=new wijmo_1.Size(0,0);if(!this._fontFamily&&!this._fontSize){var s=this._getKey(t,e,i);if(this._bbCache[s])return this._bbCache[s]}this._fontSize&&this._text.setAttribute("font-size",this._fontSize),this._fontFamily&&this._text.setAttribute("font-family",this._fontFamily),e&&this._text.setAttribute("class",e),i&&this._textGroup.setAttribute("class",i),this._applyStyle(this._text,n),this._setText(this._text,t);var o=this._getBBox(this._text);if(r.width=o.width,r.height=o.height,this._text.removeAttribute("font-size"),this._text.removeAttribute("font-family"),this._text.removeAttribute("class"),n)for(var a in n)this._text.removeAttribute(this._deCase(a));if(this._textGroup.removeAttribute("class"),this._text.textContent=null,!this._fontFamily&&!this._fontSize){var h=this._getKey(t,e,i);this._bbCache[h]={x:o.x,y:o.y+1e3,width:o.width,height:o.height}}return r},t.prototype.startGroup=function(e,i,n){void 0===n&&(n=!1);var r=document.createElementNS(t.svgNS,"g");return e&&(r.setAttribute("class",e),this._groupCls=e),i&&this._setClipPath(r,i),this._appendChild(r),n&&r.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=r,r},t.prototype.endGroup=function(){if(this._group){var t=this._group.parentNode;t==this._svg?(this._group=null,this._groupCls=null):(this._group=t,this._groupCls=this._getClass(this._group))}},t.prototype.drawImage=function(e,i,n,r,s){var o=document.createElementNS(t.svgNS,"image");return o.setAttributeNS(t.xlinkNS,"href",e),o.setAttribute("x",i.toFixed(1)),o.setAttribute("y",n.toFixed(1)),o.setAttribute("width",r.toFixed(1)),o.setAttribute("height",s.toFixed(1)),this._appendChild(o),o},t.prototype._setClipPath=function(e,i){e.setAttribute("clip-path","url(#"+i+")"),t._isSafari&&wijmo_1.setCss(e,{"-webkit-clip-path":"url(#"+i+")"})},t.prototype._appendChild=function(t){var e=this._group;e||(e=this._svg),e.appendChild(t)},t.prototype._create=function(){this._svg=document.createElementNS(t.svgNS,"svg"),this._defs=document.createElementNS(t.svgNS,"defs"),this._svg.appendChild(this._defs),this._text=this._createText(new wijmo_1.Point(-1e3,-1e3),""),this._textGroup=document.createElementNS(t.svgNS,"g"),this._textGroup.appendChild(this._text),this._svg.appendChild(this._textGroup)},t.prototype._setText=function(t,e){var i=e?e.toString():null;if(i&&i.indexOf("tspan")>=0)try{t.textContent=null;for(var n=new DOMParser,r='<svg xmlns="http://www.w3.org/2000/svg">'+i+"</svg>",s=n.parseFromString(r,"text/xml").documentElement.firstChild;s;)t.appendChild(t.ownerDocument.importNode(s,!0)),s=s.nextSibling}catch(t){throw new Error("Error parsing XML string.")}else t.textContent=i},t.prototype._getKey=function(t,e,i){return t+(e||"")+(i||"")},t.prototype._createText=function(e,i){var n=document.createElementNS(t.svgNS,"text");return this._setText(n,i),n.setAttribute("x",e.x.toFixed(1)),n.setAttribute("y",e.y.toFixed(1)),null!=this._textFill&&n.setAttribute("fill",this._textFill),this._fontSize&&n.setAttribute("font-size",this._fontSize),this._fontFamily&&n.setAttribute("font-family",this._fontFamily),n},t.prototype._applyStyle=function(t,e){if(e)for(var i in e)"fill"===i||"stroke"===i?this._applyColor(t,i,e[i]):t.setAttribute(this._deCase(i),e[i])},t.prototype._deCase=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},t.prototype._getClass=function(t){var e;if(t)for(var i=t;i&&!(e=i.getAttribute("class"));i=i.parentNode);return e},t.prototype._getBBox=function(e){if(!t._isff)return e.getBBox();try{return e.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}},t.prototype._applyColor=function(e,i,n){var r=_GradientColorUtil.tryParse(n);if(null!=r)if(wijmo_1.isString(r))e.setAttribute(i,r);else{if(null==this._savedGradient[n]){var s,o="gc"+(1e6*Math.random()).toFixed();null!=r.x1?(s=document.createElementNS(t.svgNS,"linearGradient"),["x1","y1","x2","y2","gradientUnits"].forEach(function(t){null!=r[t]&&s.setAttribute(t,r[t])})):null!=r.r&&(s=document.createElementNS(t.svgNS,"radialGradient"),["cx","cy","r","fx","fy","fr","gradientUnits"].forEach(function(t){null!=r[t]&&s.setAttribute(t,r[t])})),r.colors&&r.colors&&r.colors.length>0&&r.colors.forEach(function(e){var i=document.createElementNS(t.svgNS,"stop");null!=e.color&&i.setAttribute("stop-color",e.color),null!=e.offset&&i.setAttribute("offset",e.offset),null!=e.opacity&&i.setAttribute("stop-opacity",e.opacity),s.appendChild(i)}),s.setAttribute("id",o),this._defs.appendChild(s),this._savedGradient[n]=o}e.setAttribute(i,"url("+this._baseUrl+"#"+this._savedGradient[n]+")")}},t.svgNS="http://www.w3.org/2000/svg",t.xlinkNS="http://www.w3.org/1999/xlink",t}();exports._SvgRenderEngine=_SvgRenderEngine;var _GradientColorUtil=function(){function t(){}return t.tryParse=function(e){if(t.parsedColor[e])return t.parsedColor[e];if(null==e||-1===e.indexOf("-"))return e;var i,n=e.replace(/\s+/g,"").split(/\-/g),r=n[0][0],s=!1,o=n[0].match(/\(\S+\)/)[0].replace(/[\(\\)]/g,"").split(/\,/g);"l"===r||"L"===r?(i={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]},"l"===r&&(s=!0),["x1","y1","x2","y2"].forEach(function(t,e){null!=o[e]&&(i[t]=s?100*+o[e]+"%":o[e]+"")})):"r"!==r&&"R"!==r||(i={cx:"0",cy:"0",r:"0",colors:[]},"r"===r&&(s=!0),["cx","cy","r","fx","fy","fr"].forEach(function(t,e){null!=o[e]&&""!==o[e]&&(i[t]=s?100*+o[e]+"%":o[e]+"")})),s||(i.gradientUnits="userSpaceOnUse"),t.parsedColor[e]=i;var a=n.length-1;return n.forEach(function(t,e){t.indexOf(")")>-1&&(t=t.match(/\)\S+/)[0].replace(")",""));var n=t.split(":"),r={color:"black"};null!=n[0]&&(r.color=n[0]),null!=n[1]?r.offset=s?100*+n[1]+"%":n[1]+"":r.offset=e/a*100+"%",null!=n[2]&&(r.opacity=n[2]),i.colors.push(r)}),i},t.parsedColor={},t}(),PlotArea=function(){function t(t){this._row=0,this._col=0,this._rect=new wijmo_1.Rect(0,0,0,0),t&&wijmo_1.copy(this,t)}return Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){t!=this._row&&(this._row=wijmo_1.asInt(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},set:function(t){t!=this._col&&(this._col=wijmo_1.asInt(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=wijmo_1.asString(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._render=function(t){t.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},t.prototype._setPlotX=function(t,e){this._rect.left=t,this._rect.width=e},t.prototype._setPlotY=function(t,e){this._rect.top=t,this._rect.height=e},t}();exports.PlotArea=PlotArea;var _GridUnitType,PlotAreaCollection=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getPlotArea=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e.prototype._getWidth=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.column==t&&0==i.row)return i.width}},e.prototype._getHeight=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.row==t&&0==i.column)return i.height}},e.prototype._calculateWidths=function(t,e){if(e<=0)throw"ncols";for(var i=[],n=0;n<e;n++){var r=this._getWidth(n);i[n]=new _GridLength(r)}return this._calculateLengths(t,e,i)},e.prototype._calculateHeights=function(t,e){if(e<=0)throw"nrows";for(var i=[],n=0;n<e;n++){var r=this._getHeight(n);i[n]=new _GridLength(r)}return this._calculateLengths(t,e,i)},e.prototype._calculateLengths=function(t,e,i){for(var n=[e],r=0,s=0,o=0;o<e;o++)i[o].isAbsolute?(n[o]=i[o].value,r+=n[o]):i[o].isStar?s+=i[o].value:i[o].isAuto&&s++;var a=(t-r)/s;for(o=0;o<e;o++)i[o].isStar?n[o]=a*i[o].value:i[o].isAuto&&(n[o]=a),n[o]<0&&(n[o]=0);return n},e}(wijmo_1.ObservableArray);exports.PlotAreaCollection=PlotAreaCollection,function(t){t[t.Auto=0]="Auto",t[t.Pixel=1]="Pixel",t[t.Star=2]="Star"}(_GridUnitType||(_GridUnitType={}));var _GridLength=function(){function t(t){void 0===t&&(t=null),this._unitType=_GridUnitType.Auto,t&&((t=t.toString()).indexOf("*")>=0?(this._unitType=_GridUnitType.Star,t=t.replace("*",""),this._value=parseFloat(t),isNaN(this._value)&&(this._value=1)):(this._unitType=_GridUnitType.Pixel,this._value=parseFloat(t),isNaN(this._value)&&(this._unitType=_GridUnitType.Auto,this._value=1)))}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return this._unitType==_GridUnitType.Star},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAbsolute",{get:function(){return this._unitType==_GridUnitType.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuto",{get:function(){return this._unitType==_GridUnitType.Auto},enumerable:!0,configurable:!0}),t}(),Legend=function(){function t(t){this._position=Position.Right,this._title="",this._titleAlign="left",this._titlePadding=5,this._areas=new Array,this._sz=new wijmo_1.Size,this._colRowLens=[],this._chart=t}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=wijmo_1.asEnum(t,Position))!=this._position&&(this._position=t,this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=wijmo_1.asString(t,!1),this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleAlign",{get:function(){return this._titleAlign},set:function(t){if(t!=this._titleAlign){var e=wijmo_1.asString(t,!1);this._titleAlign="right"===e?"right":"center"===e?"center":"left",this._chart&&this._chart.invalidate()}},enumerable:!0,configurable:!0}),t.prototype._getDesiredSize=function(t,e,i,n){if(e==Position.None)return null;var r=e==Position.Right||e==Position.Left,s=this._chart._getDesiredLegendSize(t,r,i,n);if(null!=s){if(this.title.length>0){var o=t.measureString(this.title,"wj-title","wj-legend");s.height+=o.height+this._titlePadding,o.width>s.width&&(s.width=o.width)}this._sz=s}return s},t.prototype._getPosition=function(t,e){return this.position==Position.Auto?t>=e?Position.Right:Position.Bottom:this.position},t.prototype._render=function(t,e,i,n,r){this._areas=[];var s=i==Position.Right||i==Position.Left;if(t.fill="transparent",t.stroke=null,t.drawRect(e.x,e.y,this._sz.width,this._sz.height),this.title.length){var o=t.drawString(this.title,e,"wj-title"),a=o.getBBox();o.setAttribute("y",Number(o.getAttribute("y"))+a.height),"right"===this.titleAlign?o.setAttribute("x",e.x+n-a.width):"center"===this.titleAlign&&o.setAttribute("x",e.x+n/2-a.width/2);var h=a.height+this._titlePadding;e.y+=h,r-=h}this._chart._renderLegend(t,e,this._areas,s,n,r)},t.prototype._hitTest=function(t){for(var e=this._areas,i=0;i<e.length;i++)if(e[i]&&FlexChartBase._contains(e[i],t))return i;return null},t}();exports.Legend=Legend;var DataPoint=function(){return function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}}();exports.DataPoint=DataPoint;var RenderEventArgs=function(t){function e(e){var i=t.call(this)||this;return i._engine=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e}(wijmo_1.CancelEventArgs);exports.RenderEventArgs=RenderEventArgs;var ImageFormat,SelectionMode,Position,SeriesRenderingEventArgs=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r._index=i,r._count=n,r}return __extends(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e}(RenderEventArgs);exports.SeriesRenderingEventArgs=SeriesRenderingEventArgs,function(t){t[t.Png=0]="Png",t[t.Jpeg=1]="Jpeg",t[t.Svg=2]="Svg"}(ImageFormat=exports.ImageFormat||(exports.ImageFormat={})),function(t){t[t.None=0]="None",t[t.Series=1]="Series",t[t.Point=2]="Point"}(SelectionMode=exports.SelectionMode||(exports.SelectionMode={})),function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Auto=5]="Auto"}(Position=exports.Position||(exports.Position={}));var FlexChartBase=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._palette=null,e._selectionMode=SelectionMode.None,e._defPalette=Palettes.standard,e._notifyCurrentChanged=!0,e._legendHost=null,e._needBind=!1,e.rendering=new wijmo_1.Event,e.rendered=new wijmo_1.Event,e.selectionChanged=new wijmo_1.Event,e}return __extends(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=wijmo_1.asCollectionView(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._palette},set:function(t){t!=this._palette&&(this._palette=wijmo_1.asArray(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(t){t!=this._plotMargin&&(this._plotMargin=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend},set:function(t){t!=this._legend&&(this._legend=wijmo_1.asType(t,Legend),null!=this._legend&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=wijmo_1.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},set:function(t){t!=this._footer&&(this._footer=wijmo_1.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(t){t!=this._headerStyle&&(this._headerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(t){t!=this._footerStyle&&(this._footerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){(t=wijmo_1.asEnum(t,SelectionMode))!=this._selectionMode&&(this._selectionMode=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=wijmo_1.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onRendered=function(t){this.rendered.raise(this,t)},e.prototype.onRendering=function(t){this.rendering.raise(this,t)},e.prototype.saveImageToFile=function(t){var e,i,n,r;t&&0!==t.length&&-1!==t.indexOf(".")||(t="image.png"),r=t.split("."),e=r[0],i=r[1].toLowerCase(),n=ImageFormat[i[0].toUpperCase()+i.substring(1)],this.saveImageToDataUrl(n,function(t){ExportHelper.downloadImage(t,e,i)})},e.prototype.saveImageToDataUrl=function(t,e){var i=wijmo_1.asEnum(t,ImageFormat,!1),n=ImageFormat[i].toLowerCase();n&&n.length&&this._exportToImage(n,function(t){e.call(e,t)})},e.prototype._exportToImage=function(t,e){var i,n=new Image,r=this._currentRenderEngine.element;i=ExportHelper.getDataUri(r),"svg"===t?e.call(null,i):(n.onload=function(){var i,s=document.createElement("canvas"),o=r.parentNode||r,a=wijmo_1.getElementRect(o);s.width=a.width,s.height=a.height;var h=s.getContext("2d");h.fillStyle="#ffffff",h.fillRect(0,0,a.width,a.height);var l=window.getComputedStyle(o,null).getPropertyValue("padding-left").replace("px",""),_=window.getComputedStyle(o,null).getPropertyValue("padding-top").replace("px","");h.drawImage(n,+l||0,+_||0),i=s.toDataURL("image/"+t),e.call(null,i),s=null},n.src=i)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isUpdating||this._refreshChart()},e.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)},e.prototype.onLostFocus=function(e){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide(),t.prototype.onLostFocus.call(this,e)},e.prototype._cvCollectionChanged=function(t,e){this._clearCachedValues(),this._bindChart()},e.prototype._cvCurrentChanged=function(t,e){this._notifyCurrentChanged&&this._bindChart()},e.prototype._getColor=function(t){var e=this._defPalette;return null!=this._palette&&this._palette.length>0&&(e=this._palette),e[t%e.length]},e.prototype._getColorLight=function(t){var e=this._getColor(t);return this._getLightColor(e)},e.prototype._getLightColor=function(t){var e=new wijmo_1.Color(t);return null!=e&&-1===t.indexOf("-")&&(1==e.a&&-1==t.indexOf("rgba")&&(e.a*=.7),t=e.toString()),t},e.prototype._bindChart=function(){this._needBind=!0,this.invalidate()},e.prototype._clearCachedValues=function(){},e.prototype._render=function(t,i){void 0===i&&(i=!0);this.hostElement;var n=this._getHostSize(),r=n.width,s=n.height;if(0!=r){if(isNaN(r)&&(r=e._WIDTH),(0==s||isNaN(s))&&(s=e._HEIGHT),t.beginRender(),r>0&&s>0){t.setViewportSize(r,s),this._rectChart=new wijmo_1.Rect(0,0,r,s),this._prepareRender();var o=new wijmo_1.Rect(0,0,r,s);this._chartRectId="chartRect"+(1e6*Math.random()).toFixed(),t.addClipRect(o,this._chartRectId),this._renderHeader(t,o),this._renderFooter(t,o),this._renderLegends(t,o),this._renderChart(t,o,i)}t.endRender()}},e.prototype._renderHeader=function(t,i){t.startGroup(e._CSS_HEADER,this._chartRectId),i=this._drawTitle(t,i,this.header,this.headerStyle,!1),t.endGroup()},e.prototype._renderFooter=function(t,i){t.startGroup(e._CSS_FOOTER,this._chartRectId),i=this._drawTitle(t,i,this.footer,this.footerStyle,!0),t.endGroup()},e.prototype._renderLegends=function(t,i){var n,r,s=this.legend,o=i.width,a=i.height,h=s._getPosition(o,a);switch(n=s._getDesiredSize(t,h,o,a),h){case Position.Right:o-=n.width,r=new wijmo_1.Point(o,i.top+.5*(a-n.height));break;case Position.Left:i.left+=n.width,o-=n.width,r=new wijmo_1.Point(0,i.top+.5*(a-n.height));break;case Position.Top:a-=n.height,r=new wijmo_1.Point(.5*(o-n.width),i.top),i.top+=n.height;break;case Position.Bottom:a-=n.height,r=new wijmo_1.Point(.5*(o-n.width),i.top+a)}i.width=o,i.height=a,n?(this._legendHost=t.startGroup(e._CSS_LEGEND,this._chartRectId),this._rectLegend=new wijmo_1.Rect(r.x,r.y,n.width,n.height),this.legend._render(t,r,h,n.width,n.height),t.endGroup()):(this._legendHost=null,this._rectLegend=null)},e.prototype._prepareRender=function(){},e.prototype._renderChart=function(t,e,i){},e.prototype._performBind=function(){},e.prototype._getDesiredLegendSize=function(t,e,i,n){return null},e.prototype._renderLegend=function(t,e,i,n,r,s){},e.prototype._getHitTestItem=function(t){return null},e.prototype._getHitTestValue=function(t,e){return null},e.prototype._getHitTestLabel=function(t){return null},e.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind()),this.hostElement&&this._render(this._currentRenderEngine)},e.prototype._drawTitle=function(t,i,n,r,s){var o=e._CSS_TITLE,a=s?e._CSS_FOOTER:e._CSS_HEADER,h=null;if(s?this._rectFooter=null:this._rectHeader=null,null!=n){var l=null,_=null,u=null,c=null;r&&(r.fontSize&&(l=r.fontSize),r.foreground&&(_=r.foreground),r.fill&&(_=r.fill),r.fontFamily&&(u=r.fontFamily),r.halign&&(c=r.halign)),t.fontSize=l,t.fontFamily=u,h=t.measureString(n,o,a,r),i.height-=h.height,_||(_=e._FG),t.textFill=_,s?("left"==c?e._renderText(t,n,new wijmo_1.Point(i.left,i.bottom),0,0,o,a,r):"right"==c?e._renderText(t,n,new wijmo_1.Point(i.left+i.width,i.bottom),2,0,o,a,r):e._renderText(t,n,new wijmo_1.Point(i.left+.5*i.width,i.bottom),1,0,o,a,r),this._rectFooter=new wijmo_1.Rect(i.left,i.bottom,i.width,h.height)):(this._rectHeader=new wijmo_1.Rect(i.left,i.top,i.width,h.height),i.top+=h.height,"left"==c?e._renderText(t,n,new wijmo_1.Point(i.left,0),0,0,o,a,r):"right"==c?e._renderText(t,n,new wijmo_1.Point(i.left+i.width,0),2,0,o,a,r):e._renderText(t,n,new wijmo_1.Point(i.left+.5*i.width,0),1,0,o,a,r)),t.textFill=null,t.fontSize=null,t.fontFamily=null}return i},e.prototype.pageToControl=function(t,e){return this._toControl(t,e)},e.prototype._toControl=function(t,e){wijmo_1.isNumber(t)&&wijmo_1.isNumber(e)?t=new wijmo_1.Point(t,e):t instanceof MouseEvent&&(t=wijmo_1.mouseToPage(t)),wijmo_1.asType(t,wijmo_1.Point);var i=t.clone(),n=this._getHostOffset();i.x-=n.x,i.y-=n.y;var r=this._getHostComputedStyle();if(r){var s=parseInt(r.paddingLeft.replace("px",""));s&&!isNaN(s)&&(i.x-=s);var o=parseInt(r.paddingTop.replace("px",""));o&&!isNaN(o)&&(i.y-=o)}return i},e.prototype._highlightItems=function(t,e,i){if(i)for(var n=0;n<t.length;n++)wijmo_1.addClass(t[n],e);else for(n=0;n<t.length;n++)wijmo_1.removeClass(t[n],e)},e.prototype._parseMargin=function(t){var e={};if(wijmo_1.isNumber(t)&&!isNaN(t))e.top=e.bottom=e.left=e.right=wijmo_1.asNumber(t);else if(wijmo_1.isString(t)){var i=wijmo_1.asString(t).split(" ",4),n=NaN,r=NaN,s=NaN,o=NaN;i&&(4==i.length?(n=parseFloat(i[0]),o=parseFloat(i[1]),r=parseFloat(i[2]),s=parseFloat(i[3])):2==i.length?(n=r=parseFloat(i[0]),s=o=parseFloat(i[1])):1==i.length&&(n=r=s=o=parseFloat(i[1])),isNaN(n)||(e.top=n),isNaN(r)||(e.bottom=r),isNaN(s)||(e.left=s),isNaN(o)||(e.right=o))}return e},e.prototype._showToolTip=function(t,e){var i=this,n=this._tooltip.showDelay;i._clearTimeouts(),i.isDisabled||(n>0?i._toShow=setTimeout(function(){i._tooltip.show(i.hostElement,t,e),i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay))},n):(i._tooltip.show(i.hostElement,t,e),i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay))))},e.prototype._hideToolTip=function(){this._clearTimeouts(),this._tooltip.hide()},e.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},e.prototype._getHostOffset=function(){var t=wijmo_1.getElementRect(this.hostElement);return new wijmo_1.Point(t.left,t.top)},e.prototype._getHostSize=function(){var t=new wijmo_1.Size,e=this.hostElement,i=this._getHostComputedStyle(),n=e.offsetWidth,r=e.offsetHeight;if(i){var s=parseFloat(i.paddingLeft.replace("px","")),o=parseFloat(i.paddingRight.replace("px","")),a=parseFloat(i.paddingTop.replace("px","")),h=parseFloat(i.paddingBottom.replace("px",""));isNaN(s)||(n-=s),isNaN(o)||(n-=o),isNaN(a)||(r-=a),isNaN(h)||(r-=h);var l=parseFloat(i.borderLeftWidth.replace("px","")),_=parseFloat(i.borderRightWidth.replace("px","")),u=parseFloat(i.borderTopWidth.replace("px","")),c=parseFloat(i.borderBottomWidth.replace("px",""));isNaN(l)||(n-=l),isNaN(_)||(n-=_),isNaN(u)||(r-=u),isNaN(c)||(r-=c),t.width=n,t.height=r}return t},e.prototype._getHostComputedStyle=function(){var t=this.hostElement;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},e.prototype._find=function(t,e){for(var i=[],n=0;n<t.childElementCount;n++){var r=t.childNodes.item(n);if(e.indexOf(r.nodeName)>=0)i.push(r);else{var s=this._find(r,e);if(s.length>0)for(var o=0;o<s.length;o++)i.push(s[o])}}return i},e._contains=function(t,e){return!(!t||!e)&&(e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)},e._intersects=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e._toOADate=function(t){return t.valueOf()},e._fromOADate=function(t){return new Date(t)},e._renderText=function(t,e,i,n,r,s,o,a,h){var l=t.measureString(e,s,o,a),_=i.x,u=i.y;switch(n){case 1:_-=.5*l.width;break;case 2:_-=l.width}switch(r){case 1:u+=.5*l.height;break;case 0:u+=l.height}var c=new wijmo_1.Rect(_,u-l.height,l.width,l.height);return h?h(c)?(t.drawString(e,new wijmo_1.Point(_,u),s,a),c):null:(t.drawString(e,new wijmo_1.Point(_,u),s,a),c)},e._renderRotatedText=function(t,e,i,n,r,s,o,a,h,l){var _=t.measureString(e,a,h,l),u=i.x,c=i.y;switch(n){case 1:u-=.5*_.width;break;case 2:u-=_.width}switch(r){case 1:c+=.5*_.height;break;case 0:c+=_.height}return t.drawStringRotated(e,new wijmo_1.Point(u,c),s,o,a,l)},e._WIDTH=300,e._HEIGHT=200,e._SELECTION_THRESHOLD=15,e._CSS_LEGEND="wj-legend",e._CSS_HEADER="wj-header",e._CSS_FOOTER="wj-footer",e._CSS_TITLE="wj-title",e._CSS_LABEL="wj-label",e._CSS_SELECTION="wj-state-selected",e._CSS_PLOT_AREA="wj-plot-area",e._FG="#666",e._epoch=new Date(1899,11,30).getTime(),e._msPerDay=864e5,e}(wijmo_1.Control);exports.FlexChartBase=FlexChartBase;var _KeyWords=function(){function t(){this._keys={},this._keys.seriesName=null,this._keys.pointIndex=null,this._keys.x=null,this._keys.y=null,this._keys.value=null,this._keys.name=null}return t.prototype.replace=function(t,e){var i=this;return wijmo_1.format(t,{},function(t,n,r,s){return i.getValue(n,e,r)})},t.prototype.getValue=function(t,e,i){switch(t){case"seriesName":return e.series?e.series.name:"";case"pointIndex":return null!=e.pointIndex?e.pointIndex.toFixed():"";case"x":return i?wijmo_1.Globalize.format(e.x,i):e._xfmt;case"y":return i?wijmo_1.Globalize.format(e.y,i):e._yfmt;case"value":return i?wijmo_1.Globalize.format(e.value,i):e.value;case"name":return e.name}return e.item&&(0==t.indexOf("item.")&&(t=t.substr(5)),t in e.item)?i?wijmo_1.Globalize.format(e.item[t],i):e.item[t]:""},t}();exports._KeyWords=_KeyWords;var LabelPosition,PieLabelPosition,ExportHelper=function(){function t(){}return t.downloadImage=function(t,e,i){var n=document.createElement("a"),r="image/"+i;if(navigator.msSaveOrOpenBlob){t=t.substring(t.indexOf(",")+1);var s,o,a,h=atob(t),l=[];for(s=0;s<h.length;s+=512){o=h.slice(s,s+512);for(var _=new Array(o.length),u=0;u<o.length;u++)_[u]=o.charCodeAt(u);var c=new Uint8Array(_);l.push(c)}a=new Blob(l,{type:r}),navigator.msSaveOrOpenBlob(a,e+"."+i)}else n.download=e+"."+i,n.href=t,document.body.appendChild(n),n.addEventListener("click",function(t){wijmo_1.removeChild(n)}),n.click()},t.getDataUri=function(e){var i,n,r,s,o,a,h,l,_,u,c=document.createElement("div"),p=e.cloneNode(!0);return"svg"==e.tagName?(n=(i=wijmo_1.getElementRect(e.parentNode||e)).width||0,r=i.height||0,s=e.viewBox.baseVal&&0!==e.viewBox.baseVal.width?e.viewBox.baseVal.width:n,o=e.viewBox.baseVal&&0!==e.viewBox.baseVal.height?e.viewBox.baseVal.height:r):(n=(a=e.getBBox()).x+a.width,r=a.y+a.height,p.setAttribute("transform",p.getAttribute("transform").replace(/translate\(.*?\)/,"")),s=n,o=r,(l=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(p),p=l),p.setAttribute("version","1.1"),p.setAttributeNS(t.xmlns,"xmlns","http://www.w3.org/2000/svg"),p.setAttributeNS(t.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink"),p.setAttribute("width",n),p.setAttribute("height",r),p.setAttribute("viewBox","0 0 "+s+" "+o),wijmo_1.addClass(p,e.parentNode&&e.parentNode.getAttribute("class")||""),c.appendChild(p),h=t.getStyles(e),(_=document.createElement("style")).setAttribute("type","text/css"),_.innerHTML="<![CDATA[\n"+h+"\n]]>",(u=document.createElement("defs")).appendChild(_),p.insertBefore(u,p.firstChild),"data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(t.doctype+c.innerHTML)))},t.getStyles=function(t){var e="",i=document.styleSheets;return null==i||0===i.length?null:([].forEach.call(i,function(i){var n;try{if(null==i.cssRules||0===i.cssRules.length)return!0}catch(t){if("SecurityError"==t.name)return console.log("SecurityError. Can't read: "+i.href),!0}n=i.cssRules,[].forEach.call(n,function(i){var n,r=i.style;if(null==r)return!0;try{n=t.querySelector(i.selectorText)}catch(t){console.warn('Invalid CSS selector "'+i.selectorText+'"',t)}n?e+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(e+=i.cssText+"\n")})}),e)},t.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t.xmlns="http://www.w3.org/2000/xmlns/",t}(),ChartTooltip=function(t){function e(){var e=t.call(this)||this;return e._content="<b>{seriesName}</b><br/>{x} {y}",e._threshold=15,e}return __extends(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._threshold},set:function(t){t!=this._threshold&&(this._threshold=wijmo_1.asNumber(t))},enumerable:!0,configurable:!0}),e}(wijmo_1.Tooltip);exports.ChartTooltip=ChartTooltip,function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Center=5]="Center"}(LabelPosition=exports.LabelPosition||(exports.LabelPosition={})),function(t){t[t.None=0]="None",t[t.Inside=1]="Inside",t[t.Center=2]="Center",t[t.Outside=3]="Outside",t[t.Radial=4]="Radial",t[t.Circular=5]="Circular"}(PieLabelPosition=exports.PieLabelPosition||(exports.PieLabelPosition={}));var DataLabelRenderEventArgs=function(t){function e(e,i,n,r){var s=t.call(this,e)||this;return s.cancel=!1,s._ht=i,s._pt=n,s._text=r,s}return __extends(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=wijmo_1.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),e}(RenderEventArgs);exports.DataLabelRenderEventArgs=DataLabelRenderEventArgs;var DataLabelBase=function(){function t(){this.rendering=new wijmo_1.Event}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._bdr},set:function(t){t!=this._bdr&&(this._bdr=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._off},set:function(t){t!=this._off&&(this._off=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectingLine",{get:function(){return this._line},set:function(t){t!=this._line&&(this._line=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendering=function(t){return this.rendering.raise(this,t),!t.cancel},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t}();exports.DataLabelBase=DataLabelBase;var DataLabel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=LabelPosition.Top,e}return __extends(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=wijmo_1.asEnum(t,LabelPosition))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(DataLabelBase);exports.DataLabel=DataLabel;var AxisType,OverlappingLabels,TickMark,PieDataLabel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=PieLabelPosition.Center,e}return __extends(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=wijmo_1.asEnum(t,PieLabelPosition))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(DataLabelBase);exports.PieDataLabel=PieDataLabel,function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(AxisType=exports.AxisType||(exports.AxisType={})),function(t){t[t.Auto=0]="Auto",t[t.Show=1]="Show"}(OverlappingLabels=exports.OverlappingLabels||(exports.OverlappingLabels={})),function(t){t[t.None=0]="None",t[t.Outside=1]="Outside",t[t.Inside=2]="Inside",t[t.Cross=3]="Cross"}(TickMark=exports.TickMark||(exports.TickMark={}));var Axis=function(){function t(e){this._GRIDLINE_WIDTH=1,this._LINE_WIDTH=1,this._TICK_WIDTH=1,this._TICK_HEIGHT=4,this._TICK_OVERLAP=1,this._TICK_LABEL_DISTANCE=4,this._minorGrid=!1,this._labels=!0,this._axisLine=!0,this._isTimeAxis=!1,this._labelPadding=5,this.rangeChanged=new wijmo_1.Event,this._customConvert=null,this._customConvertBack=null,this.__uniqueId=t._id++,this._position=e,e==Position.Bottom||e==Position.Top?this._axisType=AxisType.X:(this._axisType=AxisType.Y,this._axisLine=!1),this._minorTickMarks=TickMark.None,this._overlap=OverlappingLabels.Auto}return Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){t!=this._min&&(wijmo_1.isDate(t)?this._min=wijmo_1.asDate(t,!0):this._min=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){t!=this._max&&(wijmo_1.isDate(t)?this._max=wijmo_1.asDate(t,!0):this._max=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(t){this._reversed!=t&&(this._reversed=wijmo_1.asBoolean(t),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=wijmo_1.asEnum(t,Position,!1))!=this._position&&(this._position=t,this._position==Position.Bottom||this._position==Position.Top?this._axisType=AxisType.X:this._position!=Position.Left&&this._position!=Position.Right||(this._axisType=AxisType.Y),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(t){t!=this._majorUnit&&(this._majorUnit=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(t){t!=this._minorUnit&&(this._minorUnit=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=wijmo_1.asString(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=wijmo_1.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=wijmo_1.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(t){t!=this._majorGrid&&(this._majorGrid=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(t){(t=wijmo_1.asEnum(t,TickMark,!0))!=this._majorTickMarks&&(this._majorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(t){t!=this._minorGrid&&(this._minorGrid=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(t){(t=wijmo_1.asEnum(t,TickMark,!0))!=this._minorTickMarks&&(this._minorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisLine",{get:function(){return this._axisLine},set:function(t){t!=this._axisLine&&(this._axisLine=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(t){t!=this._labelAlign&&(this._labelAlign=wijmo_1.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(t){t!=this._labelAngle&&(this._labelAngle=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=wijmo_1.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(t){(t=wijmo_1.asEnum(t,OverlappingLabels,!0))!=this._overlap&&(this._overlap=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=wijmo_1.asCollectionView(t),null!=this._cv&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=wijmo_1.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){this._ifmt!=t&&(this._ifmt=wijmo_1.asFunction(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logBase",{get:function(){return this._logBase},set:function(t){t!=this._logBase&&(this._logBase=wijmo_1.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._getLogBase=function(){return this._chart&&this._chart._stacking===Stacking.Stacked100pc?0:this.logBase},t.prototype._isLogAxis=function(){var t=this._getLogBase();return null!=t&&t>0},Object.defineProperty(t.prototype,"plotArea",{get:function(){return this._parea},set:function(t){t!=this._parea&&(this._parea=wijmo_1.asType(t,PlotArea,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(t){t!=this._labelPadding&&(this._labelPadding=wijmo_1.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_groupClass",{get:function(){return this.axisType===AxisType.X?FlexChartCore._CSS_AXIS_X:FlexChartCore._CSS_AXIS_Y},enumerable:!0,configurable:!0}),t.prototype.onRangeChanged=function(t){this.rangeChanged.raise(this,t)},t.prototype._getPosition=function(){if(this.axisType==AxisType.X){if(this.position==Position.Auto)return Position.Bottom}else if(this.axisType==AxisType.Y&&this.position==Position.Auto)return Position.Left;return this.position},t.prototype._isOverlapped=function(t,e,i,n){var r=this._lbls;if(null!=r&&r.length>1)for(var s=r.length,o=this._values&&this._values.length==s?this._values:null,a=0,h=0,l=0;l<s;l++){var _=o?o[l]:l;if(_>=this._actualMin&&_<=this._actualMax){var u=e*(_-this._actualMin)/(this._actualMax-this._actualMin),c=t.measureString(r[l],i,this._groupClass);if(this.axisType==AxisType.X){if(l>0&&Math.abs(u-a)<Math.max(c.width,h)+12)return!0;a=u,h=c.width}else this.axisType,AxisType.Y}}return!1},t.prototype._getHeight=function(t,e){this._actualAngle=null;var i=FlexChartCore._CSS_LABEL,n=FlexChartCore._CSS_TITLE,r=this._actualMax-this._actualMin,s=this._nicePrecision(r);(s<0||s>15)&&(s=0);var o=.1*r,a=this._lbls,h=this.labelAngle;if(this.labels&&this._chart._getChartType()!==ChartType.Funnel){if(o=this._updateAutoFormat(o),null!=a&&a.length>0){var l=a.length,_=this._values&&this._values.length==l?this._values:null;this._annoSize=new wijmo_1.Size;for(var u=0;u<l;u++){if((f=_?_[u]:u)>=this._actualMin&&f<=this._actualMax){var c=a[u],p=i,d=t.measureString(c,p,this._groupClass);this.axisType,AxisType.X,d.width>this._annoSize.width&&(this._annoSize.width=d.width),d.height>this._annoSize.height&&(this._annoSize.height=d.height)}}null==h&&this.axisType==AxisType.X&&(this._isOverlapped(t,e,i,this.axisType)?h=this._actualAngle=-45:this._actualAngle=0)}else{var f=this._actualMin-o;c=this._formatValue(f),p=i,d=t.measureString(c,p,this._groupClass);this._annoSize=d,f=this._actualMax+o,c=this._formatValue(f),p=i,c=this._formatValue(f),(d=t.measureString(c,p,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=d.width),d.height>this._annoSize.height&&(this._annoSize.height=d.height)}if(h){h>90?h=90:h<-90&&(h=-90);var g=h*Math.PI/180,m=this._annoSize.width,y=this._annoSize.height;this._annoSize.width=m*Math.abs(Math.cos(g))+y*Math.abs(Math.sin(g)),this._annoSize.height=m*Math.abs(Math.sin(g))+y*Math.abs(Math.cos(g))}}else this._annoSize=new wijmo_1.Size;var b=2*(this._labelPadding||5);this._axisType==AxisType.X?b+=this._annoSize.height:b+=this._annoSize.width+this._TICK_LABEL_DISTANCE+2;var v=this._TICK_HEIGHT,x=this._TICK_OVERLAP,w=this.majorTickMarks;if(w==TickMark.Outside?x=1:w==TickMark.Inside?x=-1:w==TickMark.Cross&&(x=0),null==w&&(w=TickMark.Outside),w!=TickMark.None&&(b+=.5*(1+x)*v),this._title){c=this._title;this._szTitle=t.measureString(c,n,this._groupClass),b+=this._szTitle.height}return t.fontSize=null,b},t.prototype._updateAutoFormat=function(t){if(this._isTimeAxis){var e=this.format,i=.001*this._getActualRange()/10,n=new _timeSpan(i*_timeSpan.TicksPerSecond),r=wijmo_1.isNumber(this._majorUnit)?_timeSpan.fromDays(this._majorUnit):_timeHelper.NiceTimeSpan(n,e);e||(this._tfmt=_timeHelper.GetTimeDefaultFormat(1e3*r.TotalSeconds,0)),t=r.TotalSeconds}return t},t.prototype._getActualRange=function(){return this._actualMax-this._actualMin},t.prototype._updateActualLimitsByChartType=function(t,e,i){if(t&&t.length>0&&!this._isTimeAxis){var n=this._chart._getChartType();n!=ChartType.Column&&n!=ChartType.Bar&&(e-=.5,i+=.5)}return{min:e,max:i}},t.prototype._updateActualLimits=function(t,e,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var s=this._actualMin,o=this._actualMax;this._isTimeAxis=t==wijmo_1.DataType.Date;var a=this._updateActualLimitsByChartType(n,e,i);e=a.min,i=a.max;var h=this._min,l=this._max;if(wijmo_1.isDate(h)&&(h=h.valueOf()),wijmo_1.isDate(l)&&(l=l.valueOf()),this._actualMin=null!=h&&this._chart&&this._chart._stacking!==Stacking.Stacked100pc?h:e,this._actualMax=null!=l&&this._chart&&this._chart._stacking!==Stacking.Stacked100pc?l:i,this._actualMin==this._actualMax&&(this._actualMin-=.5,this._actualMax+=.5),this._getLogBase()>0){var _=this.logBase,u=Math.log(_);if(!this._max){var c=Math.ceil(Math.log(this._actualMax)/u);this._actualMax=Math.pow(_,c)}if(!this._min){var p=Math.floor(Math.log(this._actualMin)/u);this._actualMin=Math.pow(_,p)}(this._actualMin<=0||!wijmo_1.isNumber(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)}if((s!=this._actualMin&&(wijmo_1.isNumber(s)||wijmo_1.isNumber(this._actualMin))||o!=this._actualMax&&(wijmo_1.isNumber(o)||wijmo_1.isNumber(this._actualMax)))&&this.onRangeChanged(),this._items){this._values=[],this._lbls=[];var d=this._items.length,f="value",g="text";if(this.binding){var m=this.binding.split(",");2==m.length&&(f=m[0],g=m[1])}for(var y=0;y<d;y++){var b=this._items[y],v=b[f];wijmo_1.isNumber(v)?(this._values.push(v),this._lbls.push(b[g])):wijmo_1.isDate(v)&&(this._values.push(v.getTime()),this._lbls.push(b[g]))}}else this._lbls=n,this._values=r},t.prototype._layout=function(t,e){var i=this.axisType==AxisType.Y;this._plotrect=e,this._axrect=i?new wijmo_1.Rect(t.left,t.top,t.height,t.width):t},t.prototype._hasVisibileSeries=function(){for(var t,e=this._chart.series,i=0,n=e.length;i<n;i++)if((t=e[i].visibility)==SeriesVisibility.Plot||t==SeriesVisibility.Visible)return!0;return!1},t.prototype._render=function(e){if(this.position!=Position.None&&this._hasVisibileSeries()){this._vals={};var i=0;this.labelAngle&&((i=this.labelAngle)>90?i=90:i<-90&&(i=-90)),null==this.labelAngle&&null!=this._actualAngle&&(i=this._actualAngle);var n=FlexChartCore._FG,r=this._actualMax-this._actualMin;if(wijmo_1.isNumber(r)){var s=this._calcMajorUnit();0==s&&(s=.1*this._niceTickNumber(r));var o=Math.min(t.MAX_MAJOR,Math.floor(r/s)+1),a=[],h=[];this._rects=[],this._vals.major=a,this._vals.hasLbls=[];var l=Math.floor(this._actualMin/s)*s;l<this._actualMin&&(l+=s);var _=!1;if(this._lbls&&this._lbls.length>0)if(h=this._lbls,0==this._values.length){_=!0;for(var u=0;u<h.length;u++)a.push(u)}else a=this._values;else this._isTimeAxis?this._createTimeLabels(l,o,a,h):this._getLogBase()?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,a,h,!0):this._createLabels(l,o,s,a,h);o=Math.min(a.length,h.length),e.textFill=n;var c=this._TICK_HEIGHT,p=this._TICK_OVERLAP,d=this.majorTickMarks;null==d&&(d=TickMark.Outside),d==TickMark.Outside?p=1:d==TickMark.Inside?p=-1:d==TickMark.Cross&&(p=0);var f=.5*(p-1)*c,g=.5*(1+p)*c;for(u=0;u<o;u++){var m=!0,y=a[u],b=h[u],v=this.labels;if(v&&(_||this.itemsSource)&&this.majorUnit&&u%this.majorUnit!=0&&(v=!1),y>=this._actualMin&&y<=this._actualMax){var x=e.textFill;m=this._renderLabelsAndTicks(e,u,y,b,i,d,v,f,g),e.textFill=x}this._vals.hasLbls.push(m)}}(this.minorGrid||this.minorTickMarks!=TickMark.None)&&this._renderMinor(e,a,_),e.stroke=n,e.fontSize=null,this._renderLineAndTitle(e),e.stroke=null,e.fontSize=null,e.textFill=null,e.strokeWidth=null}},t.prototype._renderLineAndTitle=function(t){var e=this._getPosition(),i=this.axisType==AxisType.Y,n=e!=Position.Top&&e!=Position.Right,r=FlexChartCore._CSS_TITLE,s=FlexChartCore._CSS_LINE;if(i)if(n){if(this._title){var o=new wijmo_1.Point(this._axrect.left+.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);FlexChartCore._renderRotatedText(t,this._title,o,1,1,o,-90,r,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,s)}else{if(this._title){o=new wijmo_1.Point(this._axrect.right-.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);FlexChartCore._renderRotatedText(t,this._title,o,1,1,o,90,r,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,s)}else n?(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,s),this._title&&FlexChartCore._renderText(t,this._title,new wijmo_1.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,r)):(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,s),this._title&&FlexChartCore._renderText(t,this._title,new wijmo_1.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,r))},t.prototype._renderMinor=function(t,e,i){var n=this._getPosition(),r=this.axisType==AxisType.Y,s=n!=Position.Top&&n!=Position.Right;if(this._getLogBase()){if(this.minorUnit>0){var o=[];this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,o,null,!1);for(var a=[],h=0;h<o.length;h++){var l=o[h];-1==e.indexOf(l)&&l>this._actualMin&&a.push(l)}this._renderMinors(t,a,r,s)}}else this._createMinors(t,e,r,s,i)},t.prototype._renderRotatedText=function(t,e,i,n,r,s,o,a,h,l,_){if(this.itemFormatter){var u=this._getFormattedItem(t,e,i,n,h);u?(i=u.text,h=u.cls):i=null}FlexChartCore._renderRotatedText(t,i,n,r,s,o,a,h,l,_)},t.prototype._getFormattedItem=function(t,e,i,n,r){if(this.itemFormatter){var s=n.clone();this._plotrect&&(this.axisType==AxisType.X?this.position==Position.Top?s.y=this._plotrect.top:s.y=this._plotrect.bottom:this.position==Position.Right?s.x=this._plotrect.right:s.x=this._plotrect.left);var o={val:e,text:i,pos:s,cls:r};return o=this.itemFormatter(t,o)}},t.prototype._renderLabelsAndTicks=function(t,e,i,n,r,s,o,a,h){var l=this._getPosition(),_=!0,u=this.axisType==AxisType.Y,c=l!=Position.Top&&l!=Position.Right,p=this.labelPadding||5,d=this._TICK_WIDTH,f=this._getLabelAlign(u),g=FlexChartCore._CSS_LABEL,m=FlexChartCore._CSS_GRIDLINE,y=FlexChartCore._CSS_TICK,b=FlexChartCore._FG,v=FlexChartCore._FG,x=this._GRIDLINE_WIDTH,w=i!=this._actualMin&&this.majorGrid;if(u){var S=this.convert(i);if(w&&(t.stroke=b,t.strokeWidth=x,t.drawLine(this._plotrect.left,S,this._plotrect.right,S,m)),_=!1,t.stroke=v,t.strokeWidth=d,c){if(o){_=!0;var P=new wijmo_1.Point(this._axrect.right-h-this._TICK_LABEL_DISTANCE-p,S);r>0?90==r?this._renderRotatedText(t,i,n,P,1,0,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,2,1,P,r,g,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,P,1,2,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,2,1,P,r,g,this._groupClass):_=this._renderLabel(t,i,n,P,2,f,g)}s!=TickMark.None&&_&&t.drawLine(this._axrect.right-a,S,this._axrect.right-h,S,y)}else{if(o){_=!0;P=new wijmo_1.Point(this._axrect.left+h+this._TICK_LABEL_DISTANCE+p,S);r>0?90==r?this._renderRotatedText(t,i,n,P,1,2,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,0,1,P,r,g,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,P,1,0,P,r,g,this._groupClass):this._renderRotatedText(t,i,n,P,0,1,P,r,g,this._groupClass):_=this._renderLabel(t,i,n,P,0,f,g)}s!=TickMark.None&&_&&t.drawLine(this._axrect.left+a,S,this._axrect.left+h,S,y)}}else{var C=this.convert(i);if(this.overlappingLabels==OverlappingLabels.Auto&&this._xCross(C)&&(o=!1),w&&o&&(t.stroke=b,t.strokeWidth=x,t.drawLine(C,this._plotrect.top,C,this._plotrect.bottom,m)),t.stroke=v,t.strokeWidth=d,c){if(_=!1,o){P=new wijmo_1.Point(C,this._axrect.top+h+p);_=0!=r?this._renderRotatedLabel(t,i,n,P,f,r,g,c):this._renderLabel(t,i,n,P,f,0,g)}s!=TickMark.None&&_&&(C=this.convert(i),t.drawLine(C,this._axrect.top+a,C,this._axrect.top+h,y))}else{if(o){P=new wijmo_1.Point(C,this._axrect.bottom-h-p);_=0!=r?this._renderRotatedLabel(t,i,n,P,f,r,g,c):this._renderLabel(t,i,n,P,f,2,g)}s!=TickMark.None&&_&&(C=this.convert(i),t.drawLine(C,this._axrect.bottom-a,C,this._axrect.bottom-h,y))}}return _},t.prototype._xCross=function(t){for(var e=this._rects.length,i=0;i<e;i++){var n=this._rects[i];if(t>=n.left&&t<=n.right)return!0}return!1},t.prototype._createMinors=function(e,i,n,r,s){if(i&&i.length>1){for(var o=this.majorUnit?this._isTimeAxis?24*this.majorUnit*3600*1e3:this.majorUnit:i[1]-i[0],a=wijmo_1.isNumber(this.minorUnit)?this._isTimeAxis?24*this.minorUnit*3600*1e3:this.minorUnit:.5*o,h=[],l=i[0];l>this._actualMin&&h.length<t.MAX_MINOR;l-=a)-1==i.indexOf(l)&&h.push(l);for(l=i[0]+a;l<this._actualMax&&h.length<t.MAX_MINOR;l+=a)-1==i.indexOf(l)?h.push(l):s&&this.majorUnit&&l%this.majorUnit!=0&&h.push(l);this._renderMinors(e,h,n,r)}},t.prototype._renderMinors=function(t,e,i,n){var r=this._TICK_HEIGHT,s=this._TICK_WIDTH,o=this._TICK_OVERLAP,a=FlexChartCore._FG,h=this.minorTickMarks,l=!0;this._vals.minor=e,h==TickMark.Outside?o=1:h==TickMark.Inside?o=-1:h==TickMark.Cross?o=0:l=!1;for(var _=.5*(o-1)*r,u=.5*(1+o)*r,c=e?e.length:0,p=this.minorGrid,d=this._plotrect,f=this._GRIDLINE_WIDTH,g=FlexChartCore._FG,m=FlexChartCore._CSS_GRIDLINE_MINOR,y=FlexChartCore._CSS_TICK_MINOR,b=0;b<c;b++)if(e[b]>=this.actualMin&&e[b]<=this.actualMax)if(i){var v=this.convert(e[b]);l&&(t.stroke=a,t.strokeWidth=s,n?t.drawLine(this._axrect.right-_,v,this._axrect.right-u,v,y):t.drawLine(this._axrect.left+_,v,this._axrect.left+u,v,y)),p&&(t.stroke=g,t.strokeWidth=f,t.drawLine(d.left,v,d.right,v,m))}else{var x=this.convert(e[b]);l&&(t.stroke=a,t.strokeWidth=s,n?t.drawLine(x,this._axrect.top+_,x,this._axrect.top+u,y):t.drawLine(x,this._axrect.bottom-_,x,this._axrect.bottom-u,y)),p&&(t.stroke=g,t.strokeWidth=f,t.drawLine(x,d.top,x,d.bottom,m))}},t.prototype._renderLabel=function(t,e,i,n,r,s,o){var a=!1;if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,o);h?(i=h.text,o=h.cls):i=null}if(i){var l=this._rects,_=this.overlappingLabels==OverlappingLabels.Auto&&!wijmo_1.isNumber(this._actualAngle),u=FlexChartCore._renderText(t,i,n,r,s,o,this._groupClass,null,function(t){if(_)for(var e=l.length,i=0;i<e;i++)if(FlexChartCore._intersects(l[i],t))return!1;return!0});u&&(u.left+=4,u.width+=8,l.push(u),a=!0)}return a},t.prototype._renderRotatedLabel=function(t,e,i,n,r,s,o,a){if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,o);h?(i=h.text,o=h.cls):i=null}if(i){var l=t.measureString(i,o,this._groupClass),_=.5*l.height,u=.5*l.width*Math.abs(Math.sin(s*Math.PI/180)),c=.5*l.width,p=.5*(l.width*Math.abs(Math.cos(s*Math.PI/180))+l.height*Math.abs(Math.sin(s*Math.PI/180))),d=new wijmo_1.Point(n.x,n.y),f=new wijmo_1.Point(n.x,n.y);this.labelAlign||(r=90==s||-90==s?1:a?s>0?0:2:s>0?2:0),a?(n.y+=_+u,d.y+=_+u-.5*l.height):(n.y-=_+u-l.height,d.y-=_+u-.5*l.height);var g=0;2===r?(d.x-=p,n.x-=c+p,g=d.x+p-l.height-2):0===r?(d.x+=p,n.x-=c-p,g=d.x-p):(n.x-=c,g=d.x-l.height/2);var m=new wijmo_1.Rect(g,f.y,l.height+2,l.width),y=this._rects;if(this.overlappingLabels==OverlappingLabels.Auto)for(var b=y.length,v=0;v<b;v++)if(FlexChartCore._intersects(y[v],m))return!1;return FlexChartCore._renderRotatedText(t,i,n,0,2,d,s,o,this._groupClass),this._rects.push(m),!0}return!1},t.prototype._getLabelAlign=function(t){var e=1;if(this.labelAlign){var i=this.labelAlign.toLowerCase();t?"top"==i?e=0:"bottom"==i&&(e=2):"left"==i?e=0:"right"==i&&(e=2)}return e},t.prototype.convert=function(t,e,i){var n=null==e?this._actualMax:e,r=null==i?this._actualMin:i;if(n==r)return 0;var s=this._axrect.left,o=this._axrect.width,a=this._axrect.top,h=this._axrect.height;if(null!=this._customConvert){var l=this._customConvert(t,r,n);return this.axisType==AxisType.Y?a+l*h:s+l*o}if(this._getLogBase()){if(t<=0)return NaN;var _=Math.log(n/r);return this._reversed?this.axisType==AxisType.Y?a+Math.log(t/r)/_*h:s+o-Math.log(t/r)/_*o:this.axisType==AxisType.Y?a+h-Math.log(t/r)/_*h:s+Math.log(t/r)/_*o}return this._reversed?this.axisType==AxisType.Y?a+(t-r)/(n-r)*h:s+o-(t-r)/(n-r)*o:this.axisType==AxisType.Y?a+h-(t-r)/(n-r)*h:s+(t-r)/(n-r)*o},t.prototype.convertBack=function(t){if(this._actualMax==this._actualMin)return 0;var e=this._plotrect.left,i=this._plotrect.width,n=this._plotrect.top,r=this._plotrect.height,s=this._actualMax-this._actualMin,o=this._getLogBase();if(null!=this._customConvertBack)return this.axisType==AxisType.Y?this._customConvertBack((t-n)/r,this._actualMin,this._actualMax):this._customConvertBack((t-e)/i,this._actualMin,this._actualMax);if(o){var a=0;return a=this._reversed?this.axisType==AxisType.Y?(t-n)/r:1-(t-e)/i:this.axisType==AxisType.Y?1-(t-n)/r:(t-e)/i,Math.pow(o,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*a)/Math.log(o))}return this._reversed?this.axisType==AxisType.Y?this._actualMin+(t-n)*s/r:this._actualMin+(e+i-t)*s/i:this.axisType==AxisType.Y?this._actualMax-(t-n)*s/r:this._actualMin+(t-e)*s/i},Object.defineProperty(t.prototype,"axisType",{get:function(){var t=this._chart;if(t){if(t.axisX==this)return AxisType.X;if(t.axisY==this)return AxisType.Y}return this._axisType},enumerable:!0,configurable:!0}),t.prototype._getMinNum=function(){return this._actualMin},t.prototype._getMaxNum=function(){return this._actualMax},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._cvCollectionChanged=function(t,e){this._invalidate()},t.prototype._createLabels=function(t,e,i,n,r){for(var s=0;s<e;s++){var o=(t+i*s).toFixed(14),a=parseFloat(o),h=this._formatValue(a);n.push(a),r.push(h)}},t.prototype._createLogarithmicLabels=function(t,e,i,n,r,s){var o=this._getLogBase(),a=Math.log(o),h=Math.floor(Math.log(t)/a),l=Math.ceil(Math.log(e)/a),_=o,u=!0;i>0&&(u=!1,_=i),_<o&&(_=o);var c=(l-h+1)*o/_,p=1;if(s){var d=this._getPosition(),f=this._getAnnoNumber(d==Position.Left||d==Position.Right);c>f?p=Math.floor(c/f+1):u&&(c<=.2*f?_=.2*o:c<=.1*f&&(_=.1*o))}for(var g=h;g<=l;g+=p){if(u)for(var m=Math.pow(o,g),y=0;y*_<o-1;y++){var b;(b=m*(1+y*_))>=t&&b<=e&&(0==y?(n.unshift(b),r&&r.unshift(this._formatValue(b))):(n.push(b),r&&r.push(this._formatValue(b))))}else(b=Math.pow(_,g))>=t&&b<=e&&(n.push(b),r&&r.push(this._formatValue(b)))}},t.prototype._createTimeLabels=function(t,e,i,n){var r=this._actualMin,s=this._actualMax,o=new Date(r),a=new Date(s),h=this._format,l=this._getAnnoNumber(this._axisType==AxisType.Y);l>12&&(l=12);var _=.001*(this._actualMax-this._actualMin)/l,u=new _timeSpan(_*_timeSpan.TicksPerSecond),c=wijmo_1.isNumber(this._majorUnit)?_timeSpan.fromDays(this._majorUnit):_timeHelper.NiceTimeSpan(u,h);h||(this._tfmt=h=_timeHelper.GetTimeDefaultFormat(1e3*c.TotalSeconds,0));var p=c.Ticks,d=_timeHelper.RoundTime(r,c.TotalDays,!1);isFinite(d)&&(r=d);var f=_timeHelper.RoundTime(s,c.TotalDays,!0);isFinite(f)&&(s=f);var g=new Date(r);new Date(s);if(c.TotalDays>=365&&!wijmo_1.isNumber(this._majorUnit)){(g=new Date(o.getFullYear(),1,1))<o&&g.setFullYear(g.getFullYear()+1);var m=c.TotalDays/365;m-=m%1;for(var y=g;y<=a&&m;y.setFullYear(y.getFullYear()+m)){var b=y.valueOf();i.push(b),n.push(this._formatValue(b))}}else if(c.TotalDays>=30&&!wijmo_1.isNumber(this._majorUnit)){(g=new Date(o.getFullYear(),o.getMonth(),1))<o&&g.setMonth(g.getMonth()+1);var v=c.TotalDays/30;v-=v%1;for(y=g;y<=a;y.setMonth(y.getMonth()+v)){b=y.valueOf();i.push(b),n.push(this._formatValue(b))}}else{var x=1e3*p/_timeSpan.TicksPerSecond,w=(y=g,o.getTime()-y.getTime());for(w>x&&(y=new Date(y.getTime()+Math.floor(w/x)*x));y<=a&&x;y=new Date(y.getTime()+x))if(y>=o){b=y.valueOf();i.push(b),n.push(this._formatValue(b))}}},t.prototype._formatValue=function(t){if(this._isTimeAxis)return this._format?wijmo_1.Globalize.format(new Date(t),this._format):wijmo_1.Globalize.format(new Date(t),this._tfmt);if(this._format)return wijmo_1.Globalize.format(t,this._format);var e=t==Math.round(t)?"n0":"n";return wijmo_1.Globalize.format(t,e)},t.prototype._calcMajorUnit=function(){var t=this._majorUnit;if(!wijmo_1.isNumber(t)){var e=this._actualMax-this._actualMin,i=this._nicePrecision(e),n=e/this._getAnnoNumber(this.axisType==AxisType.Y);(t=this._niceNumber(2*n,-i,!0))<n&&(t=this._niceNumber(n,1-i,!1)),t<n&&(t=this._niceTickNumber(n))}return t},t.prototype._getAnnoNumber=function(t){var e=t?this._annoSize.height:this._annoSize.width,i=t?this._axrect.height:this._axrect.width;if(e>0&&i>0){var n=Math.floor(i/(e+6));return n<=0&&(n=1),n}return 10},t.prototype._nicePrecision=function(t){if(!wijmo_1.isNumber(t)||t<=0)return 0;var e,i=Math.log(t)/Math.LN10;e=i>=0?Math.floor(i):Math.ceil(i);var n=t/Math.pow(10,e);return n<3&&(e=1-e,(n=t/Math.pow(10,e))<3&&(e+=1)),e},t.prototype._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),n=t/Math.pow(10,i),r=10;return n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,i)},t.prototype._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var n=t/Math.pow(10,e),r=10;return i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,e)},Object.defineProperty(t.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),t.MAX_MAJOR=1e3,t.MAX_MINOR=2e3,t._id=0,t}();exports.Axis=Axis;var _tmInc,AxisCollection=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getAxis=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e}(wijmo_1.ObservableArray);exports.AxisCollection=AxisCollection,function(t){t[t.tickf7=-7]="tickf7",t[t.tickf6=-6]="tickf6",t[t.tickf5=-5]="tickf5",t[t.tickf4=-4]="tickf4",t[t.tickf3=-3]="tickf3",t[t.tickf2=-2]="tickf2",t[t.tickf1=-1]="tickf1",t[t.second=1]="second",t[t.minute=60]="minute",t[t.hour=3600]="hour",t[t.day=86400]="day",t[t.week=604800]="week",t[t.month=2678400]="month",t[t.year=31536e3]="year",t[t.maxtime=Number.MAX_VALUE]="maxtime"}(_tmInc||(_tmInc={}));var _MeasureOption,_timeSpan=function(){function t(t){this.ticks=t}return Object.defineProperty(t.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalDays",{get:function(){return this.ticks/1e7/86400},enumerable:!0,configurable:!0}),t.fromSeconds=function(e){return new t(1e7*e)},t.fromDays=function(e){return new t(1e7*e*24*60*60)},t.TicksPerSecond=1e7,t}(),_timeHelper=function(){function t(t){wijmo_1.isDate(t)?this.init(t):wijmo_1.isNumber(t)&&this.init(FlexChartCore._fromOADate(t))}return t.prototype.init=function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds()},t.prototype.getTimeAsDateTime=function(){this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?(-1-this.day,this.month=1):this.month>11&&(this.month-12,this.month=12),this.day<1?(-1-this.day,this.day=1):this.day>28&&2==this.month?(this.day-28,this.day=28):this.day>30&&(4==this.month||4==this.month||6==this.month||9==this.month||11==this.month)?(this.day-30,this.day=30):this.day>31&&(this.day-31,this.day=31),this.second>59&&(this.second-59,this.second=59);return this.minute>59&&(this.minute-59,this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},t.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},t.tround=function(t,e,i){var n=t/e*e;return n-=n%1,i&&n!=t&&(n+=e-=e%1),n},t.RoundTime=function(e,i,n){var r=24*i*60*60;if(r>0){var s=new t(e);return r<_tmInc.minute?(s.second=this.tround(s.second,r,n),s.getTimeAsDouble()):(s.second=0,r<_tmInc.hour?(r/=_tmInc.minute,s.minute=this.tround(s.minute,r,n),s.getTimeAsDouble()):(s.minute=0,r<_tmInc.day?(r/=_tmInc.hour,s.hour=this.tround(s.hour,r,n),s.getTimeAsDouble()):(s.hour=0,r<_tmInc.month?(r/=_tmInc.day,s.day=this.tround(s.day,r,n),s.getTimeAsDouble()):(s.day=1,r<_tmInc.year?(r/=_tmInc.month,1!=s.month&&(s.month=this.tround(s.month,r,n)),s.getTimeAsDouble()):(s.month=1,r/=_tmInc.year,s.year=this.tround(s.year,r,n),s.getTimeAsDouble())))))}var o=e,a=o-r,h=a/i*i;return n&&h!=a&&(h+=i),o=r+h},t.TimeSpanFromTmInc=function(t){var e=_timeSpan.fromSeconds(1);if(t!=_tmInc.maxtime)if(t>_tmInc.tickf1)e=_timeSpan.fromSeconds(t);else{var i=t,n=1;for(i+=7;i>0;)n*=10,i--;e=new _timeSpan(n)}return e},t.manualTimeInc=function(t){var e=_tmInc.second;if(null==t||0==t.length)return e;var i=t.indexOf("f");if(i>=0){var n=-1;if(i>0&&"%"==t.substr(i-1,1))n=-1;else for(var r=1;r<6&&!(i+r>=t.length);r++){if("f"!=t.substr(i+r,1))break;n--}e=n}else t.indexOf("s")>=0?e=_tmInc.second:t.indexOf("m")>=0?e=_tmInc.minute:t.indexOf("h")>=0||t.indexOf("H")?e=_tmInc.hour:t.indexOf("d")>=0?e=_tmInc.day:t.indexOf("M")>=0?e=_tmInc.month:t.indexOf("y")>=0&&(e=_tmInc.year);return e},t.getNiceInc=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n]*i;if(e<=r)return r}return 0},t.NiceTimeSpan=function(e,i){var n=_tmInc.second;null!=i&&i.length>0&&(n=t.manualTimeInc(i));var r=0,s=0;if(n<_tmInc.second&&e.TotalSeconds<10){for(r=e.Ticks,s=t.TimeSpanFromTmInc(n).Ticks;r>10*s;)s*=10;var o=s;return r>o&&(o*=2),r>o&&(o=5*s),r>o&&(o=10*s),new _timeSpan(o)}if(0==(r=Math.ceil(e.TotalSeconds)))return t.TimeSpanFromTmInc(n);if(s=1,n<_tmInc.minute){if(r<_tmInc.minute&&0!=(s=t.getNiceInc([1,2,5,10,15,30],r,n)))return _timeSpan.fromSeconds(s);n=_tmInc.minute}if(n<_tmInc.hour){if(r<_tmInc.hour&&0!=(s=t.getNiceInc([1,2,5,10,15,30],r,n)))return _timeSpan.fromSeconds(s);n=_tmInc.hour}if(n<_tmInc.day){if(r<_tmInc.day&&0!=(s=t.getNiceInc([1,3,6,12],r,n)))return _timeSpan.fromSeconds(s);n=_tmInc.day}if(n<_tmInc.month){if(r<_tmInc.month&&0!=(s=t.getNiceInc([1,2,7,14],r,n)))return _timeSpan.fromSeconds(s);n=_tmInc.month}if(n<_tmInc.year){if(r<_tmInc.year&&0!=(s=t.getNiceInc([1,2,3,4,6],r,n)))return _timeSpan.fromSeconds(s);n=_tmInc.year}return r<(s=100*_tmInc.year)&&0==(s=t.getNiceInc([1,2,5,10,20,50],r,n))&&(s=100*_tmInc.year),_timeSpan.fromSeconds(s)},t.NiceTimeUnit=function(e,i){var n=_timeSpan.fromDays(e);return(n=t.NiceTimeSpan(n,i)).TotalDays},t.GetTimeDefaultFormat=function(t,e){if(!wijmo_1.isNumber(t)||!wijmo_1.isNumber(e))return"";var i="s",n=_timeSpan.fromSeconds(.001*(t-e)),r=n.TotalSeconds;if(r>=_tmInc.year)i="yyyy";else if(r>=_tmInc.month)i="MMM yyyy";else if(r>=_tmInc.day)i="MMM d";else if(r>=_tmInc.hour)i="ddd H:mm";else if(r>=.5*_tmInc.hour)i="H:mm";else if(r>=1)i="H:mm:ss";else if(r>0){var s=n.Ticks;for(i="s.";s<_timeSpan.TicksPerSecond;)s*=10,i+="f"}return i},t.secInYear=86400,t}(),_DataPoint=function(){function t(t,e,i,n){this._seriesIndex=t,this._pointIndex=e,this._dataX=i,this._dataY=n}return Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataX",{get:function(){return this._dataX},set:function(t){t!==this._dataX&&(this._dataX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataY",{get:function(){return this._dataY},set:function(t){t!==this._dataY&&(this._dataY=t)},enumerable:!0,configurable:!0}),t}();exports._DataPoint=_DataPoint,function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.XY=2]="XY"}(_MeasureOption=exports._MeasureOption||(exports._MeasureOption={}));var _RectArea=function(){function t(t){this._rect=t}return Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._rect;return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},t.prototype.pointDistance=function(t,e,i){var n=e.x-t.x,r=e.y-t.y;return i==_MeasureOption.X?Math.abs(n):i==_MeasureOption.Y?Math.abs(r):Math.sqrt(n*n+r*r)},t.prototype.distance=function(t){var e=_MeasureOption.XY;null===t.x?e=_MeasureOption.Y:null===t.y&&(e=_MeasureOption.X);var i=this._rect;return t.x<i.left?t.y<i.top?this.pointDistance(t,new wijmo_1.Point(i.left,i.top),e):t.y>i.bottom?this.pointDistance(t,new wijmo_1.Point(i.left,i.bottom),e):e==_MeasureOption.Y?0:i.left-t.x:t.x>i.right?t.y<i.top?this.pointDistance(t,new wijmo_1.Point(i.right,i.top),e):t.y>i.bottom?this.pointDistance(t,new wijmo_1.Point(i.right,i.bottom),e):e==_MeasureOption.Y?0:t.x-i.right:e==_MeasureOption.X?0:t.y<i.top?i.top-t.y:t.y>i.bottom?t.y-i.bottom:0},t}();exports._RectArea=_RectArea;var _CircleArea=function(){function t(t,e){this._center=t,this.setRadius(e)}return t.prototype.setRadius=function(t){this._rad=t,this._rad2=t*t},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._center.x-t.x,i=this._center.y-t.y;return e*e+i*i<=this._rad2},t.prototype.distance=function(t){var e=isNaN(t.x)?0:this._center.x-t.x,i=isNaN(t.y)?0:this._center.y-t.y,n=e*e+i*i;return n<=this._rad2?0:Math.sqrt(n)-this._rad},t}();exports._CircleArea=_CircleArea;var _LinesArea=function(){function t(t,e){this._x=[],this._y=[],this._x=t,this._y=e}return t.prototype.contains=function(t){return!1},t.prototype.distance=function(t){for(var e=NaN,i=0;i<this._x.length-1;i++){var n=FlexChartCore._dist(t,new wijmo_1.Point(this._x[i],this._y[i]),new wijmo_1.Point(this._x[i+1],this._y[i+1]));(isNaN(e)||n<e)&&(e=n)}return e},t}();exports._LinesArea=_LinesArea;var _HitResult=function(){return function(){}}();exports._HitResult=_HitResult;var ChartElement,_HitTester=function(){function t(t){this._map={},this._chart=t}return t.prototype.add=function(t,e){this._map[e]&&(t.tag||(t.tag=new _DataPoint(e,NaN,NaN,NaN)),this._map[e].push(t))},t.prototype.clear=function(){this._map={};for(var t=this._chart.series,e=0;e<t.length;e++)t[e].hitTest===Series.prototype.hitTest&&(this._map[e]=new Array)},t.prototype.hitTest=function(t,e){void 0===e&&(e=!1);for(var i=null,n=Number.MAX_VALUE,r=this._chart.series.length-1;r>=0;r--){var s=this._map[r];if(s){for(var o=s.length-1;o>=0;o--){var a=s[o];if(!wijmo_1.tryCast(a,_LinesArea)||e){var h=a.distance(t);if(h<n&&(i=a,0==(n=h)))break}}if(0==n)break}}if(i){var l=new _HitResult;return l.area=i,l.distance=n,l}return null},t.prototype.hitTestSeries=function(t,e){var i=null,n=Number.MAX_VALUE,r=this._map[e];if(r)for(var s=r.length-1;s>=0;s--){var o=r[s],a=o.distance(t);if(a<n&&(i=o,0==(n=a)))break}if(i){var h=new _HitResult;return h.area=i,h.distance=n,h}return null},t}();exports._HitTester=_HitTester,function(t){t[t.PlotArea=0]="PlotArea",t[t.AxisX=1]="AxisX",t[t.AxisY=2]="AxisY",t[t.ChartArea=3]="ChartArea",t[t.Legend=4]="Legend",t[t.Header=5]="Header",t[t.Footer=6]="Footer",t[t.Series=7]="Series",t[t.SeriesSymbol=8]="SeriesSymbol",t[t.DataLabel=9]="DataLabel",t[t.None=10]="None"}(ChartElement=exports.ChartElement||(exports.ChartElement={}));var SeriesVisibility,Marker,HitTestInfo=function(){function t(t,e,i){this._pointIndex=null,this._chartElement=ChartElement.None,this._chart=t,this._pt=e,this._chartElement=i}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){if(null==this._item&&null!==this.pointIndex)if(null!=this.series)this._item=this.series._getItem(this.pointIndex);else{var t=this._chart._getHitTestItem(this.pointIndex);t&&(this._item=t)}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return void 0===this._x&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return void 0===this._y&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this._chart._getHitTestValue(this.pointIndex,this._groupIndex);return null!=t?t:this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){if(void 0===this._name){var t=this._chart._getHitTestLabel(this.pointIndex);return null==t?this.series.name:t.toString()}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupIndex",{get:function(){return this._groupIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_xfmt",{get:function(){return void 0===this.__xfmt&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_yfmt",{get:function(){return void 0===this.__yfmt&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),t.prototype._setData=function(t,e){this._series=t,this._pointIndex=e},t.prototype._setDataGroup=function(t,e){this._groupIndex=t,this._pointIndex=e},t.prototype._setDataPoint=function(t){if(t=wijmo_1.asType(t,_DataPoint,!0)){this._pointIndex=t.pointIndex;var e=wijmo_1.asType(this._chart,FlexChartCore,!0),i=t.seriesIndex;null!==i&&i>=0&&i<e.series.length&&(this._series=e.series[i]),null!=t.item&&(this._item=t.item),null!=t.x&&(this._x=t.x),null!=t.y&&(this._y=t.y),null!=t.xfmt&&(this.__xfmt=t.xfmt),null!=t.yfmt&&(this.__yfmt=t.yfmt),null!=t.name&&(this._name=t.name)}},t.prototype._getValue=function(t,e){var i=this._chart._getHitTestValue(this.pointIndex);if(null!=i)return i;var n=null,r=this._chart,s=this.pointIndex,o=r._isRotated();if(null!==this.series&&null!==s){var a=this.series.getValues(t),h=this.series.getDataType(t);a&&this.pointIndex<a.length?(n=a[this.pointIndex],h!=wijmo_1.DataType.Date||e||(n=new Date(n))):1==t&&(r._xlabels&&r._xlabels.length>0&&s<r._xlabels.length?n=r._xlabels[s]:r._xvals&&s<r._xvals.length&&(n=r._xvals[s],r._xDataType!=wijmo_1.DataType.Date||e||(n=new Date(n))))}return null!==n&&e&&(o?0==t?n=this.ax._formatValue(n):1==t&&(n=this.ay._formatValue(n)):0==t?n=this.ay._formatValue(n):1==t&&(n=this.ax._formatValue(n))),n},Object.defineProperty(t.prototype,"ax",{get:function(){return this.series.axisX?this.series.axisX:this._chart.axisX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ay",{get:function(){return this.series.axisY?this.series.axisY:this._chart.axisY},enumerable:!0,configurable:!0}),t}();exports.HitTestInfo=HitTestInfo,function(t){t[t.Visible=0]="Visible",t[t.Plot=1]="Plot",t[t.Legend=2]="Legend",t[t.Hidden=3]="Hidden"}(SeriesVisibility=exports.SeriesVisibility||(exports.SeriesVisibility={})),function(t){t[t.Dot=0]="Dot",t[t.Box=1]="Box"}(Marker=exports.Marker||(exports.Marker={}));var DataArray=function(){return function(){}}();exports.DataArray=DataArray;var SeriesEventArgs=function(t){function e(e){var i=t.call(this)||this;return i._series=wijmo_1.asType(e,SeriesBase),i}return __extends(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),e}(wijmo_1.EventArgs);exports.SeriesEventArgs=SeriesEventArgs;var SeriesBase=function(){function t(t){this._altStyle=null,this._symbolMarker=Marker.Dot,this._visibility=SeriesVisibility.Visible,this._interpolateNulls=null,this._cache={},this.rendering=new wijmo_1.Event,this.rendered=new wijmo_1.Event,t&&this.initialize(t)}return Object.defineProperty(t.prototype,"interpolateNulls",{get:function(){return null==this._interpolateNulls?this._chart&&this._chart.interpolateNulls:this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=wijmo_1.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altStyle",{get:function(){return this._altStyle},set:function(t){t!=this._altStyle&&(this._altStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(t){t!=this._symbolStyle&&(this._symbolStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=wijmo_1.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(t){(t=wijmo_1.asEnum(t,Marker,!0))!=this._symbolMarker&&(this._symbolMarker=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(t){t!=this._binding&&(this._binding=wijmo_1.asString(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(t){t!=this._bindingX&&(this._bindingX=wijmo_1.asString(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){t!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=t,this._cv=wijmo_1.asCollectionView(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=wijmo_1.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},set:function(t){(t=wijmo_1.asEnum(t,SeriesVisibility))!=this._visibility&&(this._visibility=t,this._clearValues(),this._invalidate(),this._chart&&this._chart.onSeriesVisibilityChanged(new SeriesEventArgs(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipContent",{get:function(){return this._tooltipContent},set:function(t){t!=this._tooltipContent&&(this._tooltipContent=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=wijmo_1.asFunction(t),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(t,e){return wijmo_1.isNumber(t)&&wijmo_1.isNumber(e)?t=new wijmo_1.Point(t,e):t instanceof MouseEvent&&(t=new wijmo_1.Point(t.pageX,t.pageY)),wijmo_1.asType(t,wijmo_1.Point),this._chart?this._chart._hitTestSeries(t,this._chart.series.indexOf(this)):null},t.prototype.getPlotElement=function(t){if(this.hostElement&&t<this._pointIndexes.length){var e=this._pointIndexes[t];if(e<this.hostElement.childNodes.length)return this.hostElement.childNodes[e]}return null},Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){if(this._axisX=wijmo_1.asType(t,Axis,!0),this._axisX){var e=this._axisX._chart=this._chart;e&&-1==e.axes.indexOf(this._axisX)&&e.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){if(this._axisY=wijmo_1.asType(t,Axis,!0),this._axisY){var e=this._axisY._chart=this._chart;e&&-1==e.axes.indexOf(this._axisY)&&e.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){t&&wijmo_1.copy(this,t)},t.prototype.pointToData=function(t){return wijmo_1.asType(t,wijmo_1.Point),(t=t.clone()).x=this._getAxisX().convertBack(t.x),t.y=this._getAxisY().convertBack(t.y),t},t.prototype.dataToPoint=function(t){return wijmo_1.asType(t,wijmo_1.Point),(t=t.clone()).x=this._getAxisX().convert(t.x),t.y=this._getAxisY().convert(t.y),t},t.prototype.onRendering=function(t,e,i){var n=new SeriesRenderingEventArgs(t,e,i);return this.rendering.raise(this,n),n.cancel},t.prototype.onRendered=function(t){this.rendered.raise(this,new RenderEventArgs(t))},Object.defineProperty(t.prototype,"_chart",{get:function(){return this.__chart},set:function(t){t!==this.__chart&&(this.__chart=t)},enumerable:!0,configurable:!0}),t.prototype._getSymbolSize=function(){return null!=this.symbolSize?this.symbolSize:this.chart.symbolSize},Object.defineProperty(t.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(t){t!=this.__plotter&&(this.__plotter=t)},enumerable:!0,configurable:!0}),t.prototype.getDataType=function(t){return 0==t?this._valueDataType:1==t?this._xvalueDataType:null},t.prototype.getValues=function(t){if(0==t){if(null==this._values)if(this._valueDataType=null,null!=this._cv){var e=this._bindValues(this._cv.items,this._getBinding(0));this._values=e.values,this._valueDataType=e.dataType}else if(null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView){e=this._bindValues(this._chart.collectionView.items,this._getBinding(0));this._values=e.values,this._valueDataType=e.dataType}return this._values}if(1==t){if(null==this._xvalues){this._xvalueDataType=null;if(null!=this.bindingX)if(null!=this._cv){e=this._bindValues(this._cv.items,this.bindingX,!0);this._xvalueDataType=e.dataType,this._xvalues=e.values}else{if(null==this._bindingX)return null;if(null!=this._chart&&null!=this._chart.collectionView){e=this._bindValues(this._chart.collectionView.items,this.bindingX,!0);this._xvalueDataType=e.dataType,this._xvalues=e.values}}}return this._xvalues}return null},t.prototype.drawLegendItem=function(t,e,i){var n=this._getChartType();null==n&&(n=this._chart._getChartType());var r=this._getLegendStyle(this.style);n===ChartType.Funnel?this._drawFunnelLegendItem(t,e,i,r,this.symbolStyle):this._drawLegendItem(t,e,n,this.name,r,this.symbolStyle)},t.prototype._getLegendStyle=function(t){if(t){var e={};return t.fill&&(e.fill=t.fill),t.stroke&&(e.stroke=t.stroke),e}},t.prototype.measureLegendItem=function(t,e){var i=this._getChartType();return null==i&&(i=this._chart._getChartType()),i===ChartType.Funnel?this._measureLegendItem(t,this._getFunnelLegendName(e)):this._measureLegendItem(t,this.name)},t.prototype.legendItemLength=function(){var t=this._getChartType();return null==t&&(t=this._chart._getChartType()),t===ChartType.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:this._chart._xvals&&this._chart._xvals.length?this._chart._xvals.length:1:1},t.prototype.getDataRect=function(t,e){return null},t.prototype._getChartType=function(){return this._chartType},t.prototype._clearValues=function(){this._values=null,this._xvalues=null,this.__plotter=null,this._cache={}},t.prototype._getBinding=function(t){var e=this.binding;if(e){var i=this.chart?this.chart._bindingSeparator:",";if(i){var n=e.split(i);n&&n.length>t&&(e=n[t].trim())}}return e},t.prototype._getBindingValues=function(t){if(this._cache[t])return this._cache[t];var e;null!=this._cv?e=this._cv.items:null!=this._chart&&null!=this._chart.collectionView&&(e=this._chart.collectionView.items);var i=this._bindValues(e,this._getBinding(t));return this._cache[t]=i.values},t.prototype._getItem=function(t){var e=null,i=null;return null!=this.itemsSource?i=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(i=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=i&&(e=i[t]),e},t.prototype._getLength=function(){var t=0,e=null;return null!=this.itemsSource?e=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(e=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=e&&(t=e.length),t},t.prototype._setPointIndex=function(t,e){this._pointIndexes[t]=e},t.prototype._getDataRect=function(){var t=this.getValues(0),e=this.getValues(1);if(t){for(var i=NaN,n=NaN,r=NaN,s=NaN,o=t.length,a=0;a<o;a++){var h=t[a];if(isFinite(h)&&(isNaN(n)?n=s=h:h<n?n=h:h>s&&(s=h)),e){var l=e[a];isFinite(l)&&(isNaN(i)?i=r=l:l<i?i=l:h>s&&(r=l))}}if(e||(i=0,r=o-1),!isNaN(n))return new wijmo_1.Rect(i,n,r-i,s-n)}return null},t.prototype._isCustomAxisX=function(){return!!this._axisX&&(!this._chart||this._axisX!=this.chart.axisX)},t.prototype._isCustomAxisY=function(){return!!this._axisY&&(!this._chart||this._axisY!=this.chart.axisY)},t.prototype._getAxisX=function(){var t=null;return this.axisX?t=this.axisX:this.chart&&(t=this.chart.axisX),t},t.prototype._getAxisY=function(){var t=null;return this.axisY?t=this.axisY:this.chart&&(t=this.chart.axisY),t},t.prototype._measureLegendItem=function(e,i){var n=new wijmo_1.Size;if(n.width=t._LEGEND_ITEM_WIDTH,n.height=t._LEGEND_ITEM_HEIGHT,this._name){var r=e.measureString(i,FlexChartCore._CSS_LABEL,FlexChartCore._CSS_LEGEND);n.width+=r.width,n.height<r.height&&(n.height=r.height)}return n.width+=3*t._LEGEND_ITEM_MARGIN,n.height+=2*t._LEGEND_ITEM_MARGIN,n},t.prototype._drawFunnelLegendItem=function(e,i,n,r,s){e.strokeWidth=1;var o=t._LEGEND_ITEM_MARGIN,a=null,h=null;null===a&&(a=this._chart._getColorLight(n)),null===h&&(h=this._chart._getColor(n)),e.fill=a,e.stroke=h;var l=i.top+.5*i.height,_=t._LEGEND_ITEM_WIDTH,u=t._LEGEND_ITEM_HEIGHT,c=this._getFunnelLegendName(n);e.drawRect(i.left+o,l-.5*u,_,u,null,s||r),null!=c&&FlexChartCore._renderText(e,c,new wijmo_1.Point(i.left+u+2*o,l),0,1,FlexChartCore._CSS_LABEL,FlexChartCore._CSS_LEGEND)},t.prototype._getFunnelLegendName=function(t){var e,i=this._chart;return i._xlabels&&i._xlabels.length&&t<i._xlabels.length?e=i._xlabels[t]:i._xvals&&i._xvals.length&&t<i._xvals.length&&(e=i._xvals[t],i._xDataType===wijmo_1.DataType.Date&&(e=FlexChartCore._fromOADate(e))),null==e&&(e=this.name),e.toString()},t.prototype._drawLegendItem=function(e,i,n,r,s,o){e.strokeWidth=1;var a=t._LEGEND_ITEM_MARGIN,h=null,l=null;null===h&&(h=this._chart._getColorLight(this._chart.series.indexOf(this))),null===l&&(l=this._chart._getColor(this._chart.series.indexOf(this))),e.fill=h,e.stroke=l;var _=i.top+.5*i.height,u=t._LEGEND_ITEM_WIDTH,c=t._LEGEND_ITEM_HEIGHT;switch(n){case ChartType.Area:case ChartType.SplineArea:e.drawRect(i.left+a,_-.5*c,u,c,null,s);break;case ChartType.Bar:case ChartType.Column:e.drawRect(i.left+a,_-.5*c,u,c,null,o||s);break;case ChartType.Scatter:case ChartType.Bubble:var p=.3*u,d=.3*c;this.symbolMarker==Marker.Box?e.drawRect(i.left+a+.5*u-p,_-d,2*p,2*d,null,o||s):e.drawEllipse(i.left+.5*u+a,_,p,d,null,o||s);break;case ChartType.Line:case ChartType.Spline:e.drawLine(i.left+a,_,i.left+u+a,_,null,s);break;case ChartType.LineSymbols:case ChartType.SplineSymbols:p=.3*u,d=.3*c;this.symbolMarker==Marker.Box?e.drawRect(i.left+a+.5*u-p,_-d,2*p,2*d,null,o||s):e.drawEllipse(i.left+.5*u+a,_,p,d,null,o||s),e.drawLine(i.left+a,_,i.left+u+a,_,null,s);break;case ChartType.Candlestick:case ChartType.HighLowOpenClose:e.drawLine(i.left+a,_,i.left+u+a,_,null,o||s)}this._name&&FlexChartCore._renderText(e,r,new wijmo_1.Point(i.left+c+2*a,_),0,1,FlexChartCore._CSS_LABEL,FlexChartCore._CSS_LEGEND)},t.prototype._cvCollectionChanged=function(t,e){this._clearValues(),this._invalidate()},t.prototype._cvCurrentChanged=function(t,e){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},t.prototype._bindValues=function(t,e,i){var n,r,s;if(void 0===i&&(i=!1),null!=t){var o=t.length;n=new Array(t.length);for(var a=e?new wijmo_1.Binding(e):null,h=0;h<o;h++){s=null;var l=t[h];null!=a&&(l=a.getValue(l)),wijmo_1.isArray(l)&&l.length>0&&(s=l,l=l[0]),wijmo_1.isNumber(l)?(n[h]=l,r=wijmo_1.DataType.Number):wijmo_1.isDate(l)?(n[h]=l.valueOf(),r=wijmo_1.DataType.Date):i&&l&&(n[h]=h,r=wijmo_1.DataType.Number),wijmo_1.isArray(s)&&s.length>0&&(n[h]=s)}}var _=new DataArray;return _.values=n,_.dataType=r,_},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._indexToPoint=function(t){if(t>=0&&t<this._values.length){var e=this._values[t],i=this._xvalues?this._xvalues[t]:t;return new wijmo_1.Point(i,e)}return null},t.prototype._getSymbolFill=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.fill),!e&&this.style&&(e=this.style.fill),!e&&this.chart&&(e=this.chart._getColorLight(t)),e},t.prototype._getSymbolStroke=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.stroke),!e&&this.style&&(e=this.style.stroke),!e&&this.chart&&(e=this.chart._getColor(t)),e},t.prototype._getAltSymbolStroke=function(t){var e=null;return this.altStyle&&(e=this.altStyle.stroke),e},t.prototype._getAltSymbolFill=function(t){var e=null;return this.altStyle&&(e=this.altStyle.fill),e},t.prototype._renderLabels=function(t,e,i,n){this._plotter&&this._plotter._renderLabels(t,this,e,i,n)},t._LEGEND_ITEM_WIDTH=10,t._LEGEND_ITEM_HEIGHT=10,t._LEGEND_ITEM_MARGIN=4,t._DEFAULT_SYM_SIZE=10,t}();exports.SeriesBase=SeriesBase;var Series=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=wijmo_1.asEnum(t,ChartType,!0))!=this._chartType&&(this._chartType=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(SeriesBase);exports.Series=Series;var FlexPie=function(t){function e(e,i){var n=t.call(this,e,null,!0)||this;n._areas=[],n._keywords=new _KeyWords,n._startAngle=0,n._innerRadius=0,n._offset=0,n._reversed=!1,n._isAnimated=!1,n._selectedItemPosition=Position.None,n._selectedItemOffset=0,n._pieGroups=[],n._rotationAngles=[],n._centers=[new wijmo_1.Point],n._selectedOffset=new wijmo_1.Point,n._selectedIndex=-1,n._angles=[],n._colRowLens=[],n._titles=void 0,n._values=[],n._labels=[],n._pels=[],n._sum=0,n._sums=[],n._bindingSeparator=",",n.applyTemplate("wj-control wj-flexchart wj-flexpie",null,null),n._currentRenderEngine=new _SvgRenderEngine(n.hostElement),n._legend=new Legend(n),n._tooltip=new ChartTooltip,n._tooltip.content="<b>{name}</b><br/>{value}",n._tooltip.showDelay=0,n._lbl=new PieDataLabel,n._lbl._chart=n;var r=n;return n.hostElement.addEventListener("mousemove",function(t){var e=r._tooltip;if(e.content&&!r.isTouching){var i=r.hitTest(t);if(i.distance<=e.threshold){var n=r._getLabelContent(i,r.tooltip.content);r._showToolTip(n,new wijmo_1.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}),n.hostElement.addEventListener("click",function(t){var e=!0;if(r.selectionMode==SelectionMode.Point){var i=r.hitTest(t),n=FlexChartBase._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(n=r.tooltip.threshold),i.distance<=n?(i.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=Position.None&&(e=!1),i.pointIndex!=r._selectionIndex&&r._select(i.pointIndex,!0)):r._selectedIndex>=0&&r._select(null)}if(e&&r.isTouching){var s=r._tooltip;if(s.content)if((i=r.hitTest(t)).distance<=s.threshold){var o=r._getLabelContent(i,r.tooltip.content);r._showToolTip(o,new wijmo_1.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}),n.hostElement.addEventListener("mouseleave",function(t){r._hideToolTip()}),n.initialize(i),n.refresh(),n}return __extends(e,t),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=wijmo_1.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){t!=this._bindingName&&(this._bindingName=wijmo_1.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){t!=this._startAngle&&(this._startAngle=wijmo_1.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){t!=this._offset&&(this._offset=wijmo_1.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){t!=this._innerRadius&&(this._innerRadius=wijmo_1.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(t){t!=this._reversed&&(this._reversed=wijmo_1.asBoolean(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(t){(t=wijmo_1.asEnum(t,Position,!0))!=this._selectedItemPosition&&(this._selectedItemPosition=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(t){t!=this._selectedItemOffset&&(this._selectedItemOffset=wijmo_1.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){t!=this._isAnimated&&(this._isAnimated=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=t,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t!=this._selectedIndex){var e=wijmo_1.asNumber(t,!0);this._select(e,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titles",{get:function(){return this._titles},set:function(t){t!==this._titles&&(this._titles=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype._getLabelsForLegend=function(){return this._labels},e.prototype.hitTest=function(t,e){var i=this._toControl(t,e),n=new HitTestInfo(this,i),r=null;if(FlexChartBase._contains(this._rectHeader,i))n._chartElement=ChartElement.Header;else if(FlexChartBase._contains(this._rectFooter,i))n._chartElement=ChartElement.Footer;else if(FlexChartBase._contains(this._rectLegend,i))n._chartElement=ChartElement.Legend,null!==(r=this.legend._hitTest(i))&&r>=0&&r<this._areas.length&&n._setData(null,r);else if(FlexChartBase._contains(this._rectChart,i)){for(var s,o=this._areas.length,a=NaN,h=0;h<o;h++){var l=i.clone(),_=this._areas[h],u=this._rotationAngles[_.gi];if(0!=u){var c=this._centers[_.gi],p=c.x,d=c.y,f=-p+l.x,g=-d+l.y,m=Math.sqrt(f*f+g*g),y=Math.atan2(g,f)-u*Math.PI/180;l.x=p+m*Math.cos(y),l.y=d+m*Math.sin(y)}h==this._selectedIndex&&(l.x-=this._selectedOffset.x,l.y-=this._selectedOffset.y);var b=this._areas[h];if(b.contains(l)&&(n._setDataGroup(_.gi,b.tag),n._dist=0,h!=this._selectedIndex))break;var v=b.distance(l);void 0!==v&&(isNaN(a)||v<a)&&(a=v,s=b)}0!==n._dist&&null!=s&&(n._setDataGroup(s.gi,s.tag),n._dist=a),n._chartElement=ChartElement.ChartArea}else n._chartElement=ChartElement.None;return n},e.prototype._performBind=function(){if(this._initData(),this._cv){this._selectionIndex=this._cv.currentPosition;var t=this._cv.items;if(t){for(var e=t.length,i=this._getBindings(),n=0;n<i.length;n++)this._values[n]=[],this._sums[n]=0;for(var r=0;r<e;r++){var s=t[r];for(n=0;n<i.length;n++)this._sums[n]+=Math.abs(this._getBindData(s,this._values[n],0==n?this._labels:null,i[n],this.bindingName))}}}},e.prototype._getBindings=function(){var t=[],e=this.binding;if(e){var i=this._bindingSeparator;i&&(t=e.split(i))}return t},e.prototype._initData=function(){this._sum=0,this._sums=[],this._values=[],this._labels=[]},e.prototype._getBindData=function(t,e,i,n,r){var s,o=0,a=n?new wijmo_1.Binding(n):null;a&&(s=a.getValue(t));o=0;wijmo_1.isNumber(s)?o=wijmo_1.asNumber(s):s&&(o=parseFloat(s.toString())),!isNaN(o)&&isFinite(o)?e.push(o):(o=0,e.push(o));var h=r?new wijmo_1.Binding(r):null;if(i)if(h&&t){var l=h.getValue(t);l&&(l=l.toString()),i.push(l)}else i.push(o.toString());return o},e.prototype._render=function(e,i){void 0===i&&(i=!0),this._selectionAnimationID&&clearInterval(this._selectionAnimationID),this.onRendering(new RenderEventArgs(e)),t.prototype._render.call(this,e,i)},e.prototype._prepareRender=function(){this._areas=[]},e.prototype._renderChart=function(t,i,n){var r=this._rectChart.clone(),s=(new wijmo_1.Size(r.width,r.height),i.width),o=i.height,a=this._parseMargin(this.plotMargin),h=this.dataLabel,l=h.content&&h.position==PieLabelPosition.Outside,_=l?(wijmo_1.isNumber(h.offset)?h.offset:0)+24:0;isNaN(a.left)&&(a.left=l?_:e._MARGIN),isNaN(a.right)&&(a.right=l?_:e._MARGIN),isNaN(a.top)&&(a.top=l?_:e._MARGIN),isNaN(a.bottom)&&(a.bottom=l?_:e._MARGIN),i.top+=a.top;o=i.height-(a.top+a.bottom);i.height=o>0?o:24,i.left+=a.left;s=i.width-(a.left+a.right);i.width=s>0?s:24;var u=this._getBindings(),c=this._layout(i,u.length);this._angles=[],this._pels=[],this._pieGroups=[],this._rotationAngles=[];var p=this.titles;void 0===p&&u.length>1&&(p=u);for(var d=0;d<u.length;d++){var f=c[d];p&&d<p.length&&p[d]&&FlexChartBase._renderText(t,p[d],new wijmo_1.Point(f.left+.5*f.width,f.top),1,2,e._CSS_GROUP_TITLE);var g=t.startGroup("wj-slice-group",null,!0);this._pieGroups.push(g),this._renderData(t,f,d,g),t.endGroup(),this._rotationAngles.push(0)}this._highlightCurrent(),this.dataLabel.content&&this.dataLabel.position!=PieLabelPosition.None&&this._renderLabels(t),this.onRendered(new RenderEventArgs(t))},e.prototype._layout=function(t,e){for(var i=0,n=e,r=1,s=e>1?20:0,o=1;o<=e;o++){var a=Math.floor((e+(o-1))/o),h=Math.floor(t.width/o),l=Math.floor(t.height/a);(l-=s)<h&&(h=l),h>i&&(i=h,n=o,r=a)}for(var _=[],u=.5*(t.width-i*n),c=.5*(t.height-(i+s)*r),p=0;p<r;p++)for(var d=0;d<n;d++)_.push(new wijmo_1.Rect(t.left+i*d+8+u,t.top+(i+s)*p+8+c+s,i-16,i-16));return _},e.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new wijmo_1.Size,s=new wijmo_1.Size(i,n),o=this._getLabelsForLegend(),a=o.length,h=0,l=0;this._colRowLens=[];for(var _=0;_<a;_++){var u=this._measureLegendItem(t,o[_]);e?(l+u.height>n&&(r.height=n,this._colRowLens.push(h),h=0,l=0),h<u.width&&(h=u.width),l+=u.height):(h+u.width>i&&(r.width=i,this._colRowLens.push(l),l=0,h=0),l<u.height&&(l=u.height),h+=u.width)}return e?(r.height<l&&(r.height=l),this._colRowLens.push(h),r.width=this._colRowLens.reduce(function(t,e){return t+e},0),r.width>s.width/2&&(r.width=s.width/2)):(r.width<h&&(r.width=h),this._colRowLens.push(l),r.height=this._colRowLens.reduce(function(t,e){return t+e},0),r.height>s.height/2&&(r.height=s.height/2)),r},e.prototype._renderLegend=function(t,e,i,n,r,s){for(var o=this._rectLegend,a=this._getLabelsForLegend(),h=a.length,l=0,_=e.clone(),u=0;u<h;u++){var c=this._measureLegendItem(t,a[u]);n?_.y+c.height>o.top+o.height+1&&(_.x+=this._colRowLens[l],l++,_.y=e.y):_.x+c.width>o.left+o.width+1&&(_.y+=this._colRowLens[l],l++,_.x=e.x);var p=new wijmo_1.Rect(_.x,_.y,c.width,c.height);this._drawLegendItem(t,p,u,a[u]),i.push(p),n?_.y+=c.height:_.x+=c.width}},e.prototype._renderData=function(t,e,i,n){var r=this._sums[i],s=this.startAngle+180,o=this.innerRadius,a=this.offset;if(r>0){var h=s*Math.PI/180,l=e.left+.5*e.width,_=e.top+.5*e.height,u=Math.min(.5*e.width,.5*e.height);this._centers[i]=new wijmo_1.Point(l,_);var c=Math.max(a,this.selectedItemOffset);c>0&&(a*=u/=1+c),this._radius=u;var p=o*u;this._renderPie(t,i,u,p,h,a)}},e.prototype._renderPie=function(t,e,i,n,r,s){this._renderSlices(t,this._values[e],this._sums[e],e,i,n,r,2*Math.PI,s)},e.prototype._getCenter=function(){return this._centers[0]},e.prototype._renderSlices=function(t,e,i,n,r,s,o,a,h){for(var l,_,u,c=e.length,p=0,d=o,f=1==this.reversed,g=this._centers[n],m=0;m<c;m++)e[m]>0&&p++;var y=1===p?360:359.9/360;for(m=0;m<c;m++){_=g.x,u=g.y,l=t.startGroup("wj-slice"),t.fill=this._getColorLight(m),t.stroke=this._getColor(m);var b=Math.abs(e[m]),v=Math.abs(b-i)<1e-10?a:a*b/i;v=Math.min(v,a*y);var x=f?d-.5*v:d+.5*v;h>0&&v<a&&(_+=h*Math.cos(x),u+=h*Math.sin(x)),this._renderSlice(t,_,u,x,n,m,r,s,d,v,a),f?d-=v:d+=v,t.endGroup(),this._pels.push(l)}},e.prototype._renderSlice=function(t,e,i,n,r,s,o,a,h,l,_){var u=this,c=!!this.reversed;if(this._angles.push(n),this.itemFormatter){var p=new HitTestInfo(this,new wijmo_1.Point(e+o*Math.cos(n),i+o*Math.sin(n)),ChartElement.SeriesSymbol);p._setData(null,s),this.itemFormatter(t,p,function(){u._drawSlice(t,r,s,c,e,i,o,a,h,l)})}else this._drawSlice(t,r,s,c,e,i,o,a,h,l)},e.prototype._getSelectedItemOffset=function(t,e){var i=0,n=0,r=0;return t==this._selectedIndex&&this.selectedItemOffset>0&&(r=this.selectedItemOffset),r>0&&(i=Math.cos(e)*r*this._radius,n=Math.sin(e)*r*this._radius),{x:i,y:n}},e.prototype._renderLabels=function(t){var e=this._areas.length,i=this.dataLabel,n=i.position,r="wj-data-label",s=this._rotationAngles,o=i.connectingLine,a=i.offset?i.offset:0;t.stroke="null",t.fill="transparent",t.strokeWidth=1,t.startGroup("wj-data-labels");for(var h=0;h<e;h++){var l=this._areas[h];if(l){var _=l.radius,u=l.langle+s[l.gi],c=1,p=1;n==PieLabelPosition.Center||n===PieLabelPosition.Radial||n===PieLabelPosition.Circular?_*=.5*(1+(l.innerRadius||0)/l.radius):((u=_Math.clampAngle(u))<=-170||u>=170?(c=2,p=1):u>=-100&&u<=-80?(c=1,p=2):u>=-10&&u<=10?(c=0,p=1):u>=80&&u<=100?(c=1,p=0):-180<u&&u<-90?(c=2,p=2):-90<=u&&u<0?(c=0,p=2):0<u&&u<90?(c=0,p=0):90<u&&u<180&&(c=2,p=0),n==PieLabelPosition.Inside&&(c=2-c,p=2-p)),u*=Math.PI/180;var d=this._getSelectedItemOffset(h,u),f=d.x,g=d.y,m=_;n==PieLabelPosition.Outside?m+=a:n==PieLabelPosition.Inside&&(m-=a);var y=l.center.x,b=l.center.y,v=this._centers[l.gi],x=y-v.x,w=b-v.y;if(0!=this._rotationAngles[l.gi]){var S=Math.sqrt(x*x+w*w),P=Math.atan2(w,x)+this._rotationAngles[l.gi]*Math.PI/180;y=v.x+S*Math.cos(P),b=v.y+S*Math.sin(P)}var C=new wijmo_1.Point(y+f+m*Math.cos(u),b+g+m*Math.sin(u));i.border&&n!=PieLabelPosition.Center&&(0==c?C.x+=2:2==c&&(C.x-=2),0==p?C.y+=2:2==p&&(C.y-=2));var M=new HitTestInfo(this,C);M._setDataGroup(l.gi,l.tag);var T=this._getLabelContent(M,i.content),j=new DataLabelRenderEventArgs(t,M,C,T);if(i.onRendering&&(i.onRendering(j)?(T=j.text,C=j.point):T=null),T){var A,L=180*Math.atan2(b-C.y,y-C.x)/Math.PI;if(L=(L+360)%360,n===PieLabelPosition.Radial||n===PieLabelPosition.Circular?(n===PieLabelPosition.Radial?L>90&&L<270&&(L+=180):(L>180&&L<360&&(L+=180),L-=90),(A=FlexChartBase._renderRotatedText(t,T,C,c,p,C,L,r).getBBox()).left=A.x,A.top=A.y):A=FlexChartBase._renderText(t,T,C,c,p,r),i.border&&t.drawRect(A.left-2,A.top-2,A.width+4,A.height+4,"wj-data-label-border"),o){var N=new wijmo_1.Point(y+f+_*Math.cos(u),b+g+_*Math.sin(u));t.drawLine(C.x,C.y,N.x,N.y,"wj-data-label-line")}}}}t.endGroup()},e.prototype._drawSlice=function(t,e,i,n,r,s,o,a,h,l){var _;n?a>0?(0!=l&&t.drawDonutSegment(r,s,o,a,h-l,l),(_=new _DonutSegment(new wijmo_1.Point(r,s),o,a,h-l,l,this.startAngle)).tag=i,this._areas.push(_)):(0!=l&&t.drawPieSegment(r,s,o,h-l,l),(_=new _PieSegment(new wijmo_1.Point(r,s),o,h-l,l,this.startAngle)).tag=i,this._areas.push(_)):(a>0?(0!=l&&t.drawDonutSegment(r,s,o,a,h,l),(_=new _DonutSegment(new wijmo_1.Point(r,s),o,a,h,l,this.startAngle)).tag=i,this._areas.push(_)):(0!=l&&t.drawPieSegment(r,s,o,h,l),(_=new _PieSegment(new wijmo_1.Point(r,s),o,h,l,this.startAngle)).tag=i,this._areas.push(_)),h+=l),_&&(_.gi=e)},e.prototype._measureLegendItem=function(t,e){var i=new wijmo_1.Size;if(i.width=Series._LEGEND_ITEM_WIDTH,i.height=Series._LEGEND_ITEM_HEIGHT,e){var n=t.measureString(e,FlexChartBase._CSS_LABEL,FlexChartBase._CSS_LEGEND);i.width+=n.width,i.height<n.height&&(i.height=n.height)}return i.width+=3*Series._LEGEND_ITEM_MARGIN,i.height+=2*Series._LEGEND_ITEM_MARGIN,i},e.prototype._drawLegendItem=function(t,e,i,n){t.strokeWidth=1;var r=Series._LEGEND_ITEM_MARGIN,s=null,o=null;null===s&&(s=this._getColorLight(i)),null===o&&(o=this._getColor(i)),t.fill=s,t.stroke=o;var a=e.top+.5*e.height,h=Series._LEGEND_ITEM_WIDTH,l=Series._LEGEND_ITEM_HEIGHT;t.drawRect(e.left+r,a-.5*l,h,l,null),null!=n&&FlexChartBase._renderText(t,n.toString(),new wijmo_1.Point(e.left+l+2*r,a),0,1,FlexChartBase._CSS_LABEL)},e.prototype._getLabelContent=function(t,e){return wijmo_1.isString(e)?this._keywords.replace(e,t):wijmo_1.isFunction(e)?e(t):null},e.prototype._select=function(t,e){if(void 0===e&&(e=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=t,this.selectionMode==SelectionMode.Point){var i=this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(t),this._notifyCurrentChanged=!0)}null==t?(this._selectedIndex=-1,this.invalidate()):this.isAnimated&&this.selectedItemPosition!=Position.None||!(this.selectedItemOffset>0||this.selectedItemPosition!=Position.None)?this._highlight(!0,this._selectionIndex,e):(this._selectedIndex=t,this.invalidate()),this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=SelectionMode.None){var t=-1,e=this._cv;e&&(t=e.currentPosition),this._highlight(!0,t)}},e.prototype._highlight=function(t,e,i){if(void 0===i&&(i=!1),this.selectionMode==SelectionMode.Point&&void 0!==e&&null!==e&&e>=0)if(t){for(var n=[],r=0;r<this._pieGroups.length;r++){if(c=this._pels[e+r*this._values[0].length]){c.parentNode.appendChild(c);var s=this._find(c,["ellipse"]);this._highlightItems(this._find(c,["path","ellipse"]),FlexChartBase._CSS_SELECTION,t)}var o=this._angles[e+r*this._values[0].length];if(this.selectedItemPosition!=Position.None&&0!=o){var a=0;this.selectedItemPosition==Position.Left?a=180:this.selectedItemPosition==Position.Top?a=-90:this.selectedItemPosition==Position.Bottom&&(a=90);var h=a*Math.PI/180-o;h*=180/Math.PI,i&&this.isAnimated?n.push(h):(this._rotationAngles[r]=h,this._pieGroups[r].transform.baseVal.getItem(0).setRotate(h,this._centers[r].x,this._centers[r].y))}var l=this.selectedItemOffset;if(l>0&&s&&0==s.length){var _=this._selectedOffset.x=Math.cos(o)*l*this._radius,u=this._selectedOffset.y=Math.sin(o)*l*this._radius;c&&c.setAttribute("transform","translate("+_.toFixed()+","+u.toFixed()+")")}this._selectedIndex=e}n.length>0&&this._animateSelectionAngle(n,.5)}else{for(r=0;r<this._pieGroups.length;r++){var c;(c=this._pels[e+r*this._values[0].length])&&(c.parentNode.insertBefore(c,c.parentNode.childNodes.item(e)),c.removeAttribute("transform"),this._highlightItems(this._find(c,["path","ellipse"]),FlexChartBase._CSS_SELECTION,t))}this._selectedIndex==e&&(this._selectedIndex=-1)}},e.prototype._animateSelectionAngle=function(t,e){var i=this,n=i._pieGroups;i._selectionAnimationID&&clearInterval(this._selectionAnimationID),this._selectionAnimationID=wijmo_1.animate(function(e){if(n==i._pieGroups){for(var r=0;r<n.length;r++){var s=_Math.clampAngle(i._rotationAngles[r]),o=_Math.clampAngle(t[r])-s,a=s;i._rotationAngles[r]=s=a+o*e,n[r].transform.baseVal.getItem(0).setRotate(s,i._centers[r].x,i._centers[r].y)}1==e&&clearInterval(i._selectionAnimationID),e>.99&&(i.selectedItemOffset>0||i.selectedItemPosition!=Position.None)&&i.invalidate()}},1e3*e)},e.prototype._getHitTestItem=function(t){var e=null,i=null;return(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(i=e[t]),i},e.prototype._getHitTestValue=function(t,e){return void 0==e&&(e=0),this._values[e][t]},e.prototype._getHitTestLabel=function(t){return this._labels[t]},e._MARGIN=4,e._CSS_GROUP_TITLE="wj-label",e}(FlexChartBase);exports.FlexPie=FlexPie;var _Math=function(){function t(){}return t.clampAngle=function(t,e){void 0===e&&(e=0);var i=(t+180)%360-180;return i<-180+(e<0?e+360:e)&&(i+=360),i},t}(),_PieSegment=function(){function t(t,e,i,n,r){void 0===r&&(r=0),this._isFull=!1,this._center=t,this._radius=e,this._originAngle=i,this._originSweep=n,n>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*n*180/Math.PI,this._angle=_Math.clampAngle(180*i/Math.PI+this._sweep),this._radius2=e*e,this._startAngle=r}return t.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y;if(e*e+i*i<=this._radius2){var n=180*Math.atan2(i,e)/Math.PI,r=_Math.clampAngle(this._angle,this._startAngle)-_Math.clampAngle(n,this._startAngle);if(this._isFull||Math.abs(r)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i,r=180*Math.atan2(i,e)/Math.PI,s=_Math.clampAngle(this._angle,this._startAngle)-_Math.clampAngle(r,this._startAngle);return this._isFull||Math.abs(s)<=this._sweep?Math.sqrt(n)-this._radius:void 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),t}();exports._PieSegment=_PieSegment;var _DonutSegment=function(){function t(t,e,i,n,r,s){void 0===s&&(s=0),this._isFull=!1,this._center=t,this._radius=e,this._iradius=i,this._originAngle=n,this._originSweep=r,r>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*r*180/Math.PI,this._angle=_Math.clampAngle(180*n/Math.PI+this._sweep),this._radius2=e*e,this._iradius2=i*i,this._startAngle=s}return t.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i;if(n>=this._iradius2&&n<=this._radius2){var r=180*Math.atan2(i,e)/Math.PI,s=_Math.clampAngle(this._angle,this._startAngle)-_Math.clampAngle(r,this._startAngle);if(this._isFull||Math.abs(s)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),t}();exports._DonutSegment=_DonutSegment;var ChartType,Stacking,_BasePlotter=function(){function t(){this._DEFAULT_WIDTH=2,this._DEFAULT_SYM_SIZE=10,this.clipping=!0}return t.prototype.clear=function(){this.seriesCount=0,this.seriesIndex=0},t.prototype._renderLabels=function(t,e,i,n,r){var s=i.length,o=n.dataLabel,a=o.border,h=o.offset,l=o.connectingLine;void 0===h&&(h=l?16:0),a&&(h-=2);for(var _=0;_<s;_++){var u=i[_],c=wijmo_1.asType(u.tag,_DataPoint,!0);c&&!u.ignoreLabel&&this._renderLabel(t,u,c,n,o,e,h,r)}},t.prototype._renderLabel=function(t,e,i,n,r,s,o,a){var h=null==r.position?LabelPosition.Top:r.position,l=r.border,_=r.connectingLine,u=new HitTestInfo(n,p);u._setDataPoint(i);var c=n._getLabelContent(u,r.content),p=this._getLabelPoint(s,i);if(this._getPointAndPosition(p,h,e,n),n._plotRect.contains(p)){var d=new DataLabelRenderEventArgs(t,u,p,c);if(r.onRendering&&(r.onRendering(d)?(c=d.text,p=d.point):c=null),c){var f=this._renderLabelAndBorder(t,c,h,o,p,_,2,l);if(f){var g=new _RectArea(f);g.tag=i,a.push(g)}}}},t.prototype._getPointAndPosition=function(t,e,i,n){if(i instanceof _RectArea){var r=i;n._isRotated()?t.y=r.rect.top+.5*r.rect.height:t.x=r.rect.left+.5*r.rect.width}},t.prototype._getLabelPoint=function(t,e){var i=t._getAxisX(),n=t._getAxisY();return new wijmo_1.Point(i.convert(e.dataX),n.convert(e.dataY))},t.prototype._renderLabelAndBorder=function(t,e,i,n,r,s,o,a){var h,l="wj-data-label",_="wj-data-label-line",u=FlexChartCore._CSS_DATA_LABELS;switch(i){case LabelPosition.Top:s&&t.drawLine(r.x,r.y,r.x,r.y-n,_),r.y-=o+n,h=FlexChartCore._renderText(t,e,r,1,2,l,u);break;case LabelPosition.Bottom:s&&t.drawLine(r.x,r.y,r.x,r.y+n,_),r.y+=o+n,h=FlexChartCore._renderText(t,e,r,1,0,l,u);break;case LabelPosition.Left:s&&t.drawLine(r.x,r.y,r.x-n,r.y,_),r.x-=o+n,h=FlexChartCore._renderText(t,e,r,2,1,l,u);break;case LabelPosition.Right:s&&t.drawLine(r.x,r.y,r.x+n,r.y,_),r.x+=o+n,h=FlexChartCore._renderText(t,e,r,0,1,l,u);break;case LabelPosition.Center:h=FlexChartCore._renderText(t,e,r,1,1,l,u)}return a&&h&&t.drawRect(h.left-o,h.top-o,h.width+2*o,h.height+2*o,"wj-data-label-border"),h},t.prototype.getOption=function(t,e){var i=this.chart._options;if(e&&(i=i?i[e]:null),i&&!wijmo_1.isUndefined(i[t])&&null!==i[t])return i[t]},t.prototype.getNumOption=function(t,e){var i=this.chart._options;if(e&&(i=i?i[e]:null),i&&i[t])return wijmo_1.asNumber(i[t],!0)},t.prototype.getItemFormatter=function(t){if(t instanceof SeriesBase){var e=t;return e.itemFormatter?e.itemFormatter:this.chart.itemFormatter}return this.chart.itemFormatter},t.cloneStyle=function(t,e){if(!t)return t;var i={};for(var n in t)e&&e.indexOf(n)>=0||(i[n]=t[n]);return i},t.prototype.isValid=function(t,e,i,n){return _DataInfo.isValid(t)&&_DataInfo.isValid(e)&&FlexChartCore._contains(this.chart._plotRect,new wijmo_1.Point(t,e))},t.prototype.load=function(){},t.prototype.unload=function(){},t}();exports._BasePlotter=_BasePlotter,function(t){t[t.Column=0]="Column",t[t.Bar=1]="Bar",t[t.Scatter=2]="Scatter",t[t.Line=3]="Line",t[t.LineSymbols=4]="LineSymbols",t[t.Area=5]="Area",t[t.Bubble=6]="Bubble",t[t.Candlestick=7]="Candlestick",t[t.HighLowOpenClose=8]="HighLowOpenClose",t[t.Spline=9]="Spline",t[t.SplineSymbols=10]="SplineSymbols",t[t.SplineArea=11]="SplineArea",t[t.Funnel=12]="Funnel"}(ChartType=exports.ChartType||(exports.ChartType={})),function(t){t[t.None=0]="None",t[t.Stacked=1]="Stacked",t[t.Stacked100pc=2]="Stacked100pc"}(Stacking=exports.Stacking||(exports.Stacking={}));var FlexChartCore=function(t){function e(i,n){var r=t.call(this,i,null,!0)||this;r._series=new wijmo_1.ObservableArray,r._axes=new AxisCollection,r._pareas=new PlotAreaCollection,r._interpolateNulls=!1,r._legendToggle=!1,r._symbolSize=10,r._dataInfo=new _DataInfo,r.__barPlotter=null,r.__linePlotter=null,r.__areaPlotter=null,r.__bubblePlotter=null,r.__financePlotter=null,r.__funnelPlotter=null,r._plotters=[],r._rotated=!1,r._stacking=Stacking.None,r._xlabels=[],r._xvals=[],r._lblAreas=[],r._colRowLens=[],r._bindingSeparator=",",r.seriesVisibilityChanged=new wijmo_1.Event,r.applyTemplate("wj-control wj-flexchart",null,null);var s=r;return s._series.collectionChanged.addHandler(function(){for(var t=s._series,e=0;e<t.length;e++){var i=wijmo_1.tryCast(t[e],SeriesBase);if(!i)throw"chartSeries array must contain SeriesBase objects.";i._chart=s,i.axisX&&null==i.axisX._chart&&(i.axisX._chart=s,s.axes.push(i.axisX)),i.axisY&&null==i.axisY._chart&&(i.axisY._chart=s,s.axes.push(i.axisY))}s.invalidate()}),r._currentRenderEngine=new _SvgRenderEngine(r.hostElement),r._hitTester=new _HitTester(r),r._legend=new Legend(r),r._tooltip=new ChartTooltip,r._tooltip.showDelay=0,r._lbl=new DataLabel,r._lbl._chart=r,r._initAxes(),s._axes.collectionChanged.addHandler(function(){for(var t=s._axes,e=0;e<t.length;e++){var i=wijmo_1.tryCast(t[e],Axis);if(!i)throw"axes array must contain Axis objects.";i._chart=s}s.invalidate()}),s._pareas.collectionChanged.addHandler(function(){for(var t=s._pareas,e=0;e<t.length;e++){var i=wijmo_1.tryCast(t[e],PlotArea);if(!i)throw"plotAreas array must contain PlotArea objects.";i._chart=s}s.invalidate()}),r._keywords=new _KeyWords,r.hostElement.addEventListener("click",function(t){var e=s._tooltip;e.content&&s.isTouching&&s._updateTooltip(e,t)}),r.hostElement.addEventListener("mousemove",function(t){var e=s._tooltip;e.content&&!s.isTouching&&s._updateTooltip(e,t)}),r.hostElement.addEventListener("mouseleave",function(t){s._hideToolTip()}),r.hostElement.addEventListener("click",function(t){if(s.selectionMode!=SelectionMode.None){var i=s._hitTestData(t),n=e._SELECTION_THRESHOLD;s.tooltip&&s.tooltip.threshold&&(n=s.tooltip.threshold),i.distance<=n&&i.series?s._select(i.series,i.pointIndex):s.selectionMode==SelectionMode.Series&&(i=s.hitTest(t)).chartElement==ChartElement.Legend&&i.series?s._select(i.series,null):s._select(null,null)}!0===s.legendToggle&&(i=s.hitTest(t)).chartElement==ChartElement.Legend&&i.series&&(i.series.visibility==SeriesVisibility.Legend?i.series.visibility=SeriesVisibility.Visible:i.series.visibility==SeriesVisibility.Visible&&(i.series.visibility=SeriesVisibility.Legend),s.focus())}),r.initialize(n),r}return __extends(e,t),e.prototype._initAxes=function(){this._axisX=new Axis(Position.Bottom),this._axisY=new Axis(Position.Left),this._axisX.majorGrid=!1,this._axisX.name="axisX",this._axisY.majorGrid=!0,this._axisY.majorTickMarks=TickMark.None,this._axisY.name="axisY",this._axisX._chart=this,this._axisY._chart=this,this._axes.push(this._axisX),this._axes.push(this._axisY)},Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){var e=this._axisX=wijmo_1.asType(t,Axis);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!1),void 0===e.name&&(e.name="axisX"),void 0==e.position&&(e.position=Position.Bottom),e._axisType=AxisType.X,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){var e=this._axisY=wijmo_1.asType(t,Axis);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!0),void 0===e.name&&(e.name="axisY"),e.majorTickMarks=TickMark.None,void 0==e.position&&(e.position=Position.Left),e._axisType=AxisType.Y,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=wijmo_1.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingX",{get:function(){return this._bindingX},set:function(t){t!=this._bindingX&&(this._bindingX=wijmo_1.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=wijmo_1.asNumber(t,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=wijmo_1.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(t){t!=this._legendToggle&&(this._legendToggle=wijmo_1.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=wijmo_1.asType(t,DataLabel),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){t!=this._selection&&(this._selection=wijmo_1.asType(t,SeriesBase,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onSeriesVisibilityChanged=function(t){this.seriesVisibilityChanged.raise(this,t)},e.prototype.hitTest=function(t,i){var n=this._toControl(t,i),r=new HitTestInfo(this,n),s=null;if(e._contains(this._rectHeader,n))r._chartElement=ChartElement.Header;else if(e._contains(this._rectFooter,n))r._chartElement=ChartElement.Footer;else if(e._contains(this._rectLegend,n))r._chartElement=ChartElement.Legend,null!==(s=this.legend._hitTest(n))&&s>=0&&s<this.series.length&&(this._getChartType()===ChartType.Bar?r._setData(this.series[this.series.length-1-s]):r._setData(this.series[s]));else if(e._contains(this._rectChart,n)){var o=this._hitTestLabels(n);if(o)r._chartElement=ChartElement.DataLabel,r._dist=0,r._setDataPoint(o.tag);else{for(var a=this._hitTester.hitTest(n),h=null,l=null,_=this.series.length-1;_>=0;_--)if(this.series[_].hitTest!==Series.prototype.hitTest){var u=this.series[_].hitTest(t);if(u&&((!h||u.distance<h.distance)&&(h=u,l=_),0===u.distance))break}a&&a.area?h&&h.distance<a.distance?r=h:h&&h.distance==a.distance&&l>a.area.tag.seriesIndex?r=h:(r._setDataPoint(a.area.tag),r._dist=a.distance):h&&(r=h);var c=!1;this.axes.some(function(t){if(e._contains(t._axrect,n))return t.axisType===AxisType.X?r._chartElement=ChartElement.AxisX:r._chartElement=ChartElement.AxisY,c=!0,!0}),c||(e._contains(this._plotRect,n)?r._chartElement=ChartElement.PlotArea:e._contains(this._rectChart,n)&&(r._chartElement=ChartElement.ChartArea))}}else r._chartElement=ChartElement.None;return r},e.prototype.pointToData=function(t,e){return wijmo_1.isNumber(t)&&wijmo_1.isNumber(e)&&(t=new wijmo_1.Point(t,e)),t instanceof MouseEvent?(t=new wijmo_1.Point(t.pageX,t.pageY),t=this._toControl(t)):t=t.clone(),t.x=this.axisX.convertBack(t.x),t.y=this.axisY.convertBack(t.y),t},e.prototype.dataToPoint=function(t,e){wijmo_1.isNumber(t)&&wijmo_1.isNumber(e)&&(t=new wijmo_1.Point(t,e)),wijmo_1.asType(t,wijmo_1.Point);var i=t.clone();return i.x=this.axisX.convert(i.x),i.y=this.axisY.convert(i.y),i},e.prototype._copy=function(t,e){if("series"==t){this.series.clear();for(var i=wijmo_1.asArray(e),n=0;n<i.length;n++){var r=this._createSeries();wijmo_1.copy(r,i[n]),this.series.push(r)}return!0}return!1},e.prototype._createSeries=function(){return new Series},e.prototype._clearCachedValues=function(){for(var t=0;t<this._series.length;t++){var e=this._series[t];null==e.itemsSource&&e._clearValues()}},e.prototype._performBind=function(){if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv){var t=this._cv.items;if(t){for(var e=t.length,i=this.bindingX?new wijmo_1.Binding(this.bindingX):null,n=0;n<e;n++){var r=t[n];if(i){var s=i.getValue(r);wijmo_1.isNumber(s)?(this._xvals.push(wijmo_1.asNumber(s)),this._xDataType=wijmo_1.DataType.Number):wijmo_1.isDate(s)&&(this._xvals.push(wijmo_1.asDate(s).valueOf()),this._xDataType=wijmo_1.DataType.Date),this._xlabels.push(s)}}this._xvals.length==e?this._xlabels.splice(0):this._xvals.splice(0)}}},e.prototype._hitTestSeries=function(t,e){var i=this._toControl(t),n=new HitTestInfo(this,i),r=this._hitTester.hitTestSeries(i,e);return r&&r.area&&(n._setDataPoint(r.area.tag),n._chartElement=ChartElement.PlotArea,n._dist=r.distance),n},e.prototype._hitTestData=function(t){var e=this._toControl(t),i=new HitTestInfo(this,e),n=this._hitTester.hitTest(e,!0);return n&&n.area&&(i._setDataPoint(n.area.tag),i._dist=n.distance),i},e.prototype._hitTestLabels=function(t){for(var e=null,i=this._lblAreas.length,n=0;n<i;n++)if(this._lblAreas[n].contains(t)){e=this._lblAreas[n];break}return e},e._dist2=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},e._dist=function(t,i,n){return Math.sqrt(e._distToSegmentSquared(t,i,n))},e._distToSegmentSquared=function(t,i,n){var r=e._dist2(i,n);if(0==r)return e._dist2(t,i);var s=((t.x-i.x)*(n.x-i.x)+(t.y-i.y)*(n.y-i.y))/r;return s<0?e._dist2(t,i):s>1?e._dist2(t,n):e._dist2(t,new wijmo_1.Point(i.x+s*(n.x-i.x),i.y+s*(n.y-i.y)))},e.prototype._isRotated=function(){return this._getChartType()==ChartType.Bar?!this._rotated:this._rotated},e.prototype._getChartType=function(){return null},e.prototype._prepareRender=function(){this._hitTester.clear()},e.prototype._renderChart=function(t,i,n){var r=this._rectChart.clone(),s=new wijmo_1.Size(r.width,r.height);i.width,i.height;(m=this._getPlotter(null)).stacking=this._stacking,this._curPlotter!=m&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=m),m.load();var o=this._isRotated();this._dataInfo.analyse(this._series,o,m.stacking,this._xvals.length>0?this._xvals:null,this.axisX._getLogBase()>0,this.axisY._getLogBase()>0);var a=m.adjustLimits(this._dataInfo,i.clone());if(o){var h=this._dataInfo.getDataTypeX();h||(h=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),a.left,a.right),this.axisY._updateActualLimits(h,a.top,a.bottom,this._xlabels,this._xvals)}else{var l=this._dataInfo.getDataTypeX();l||(l=this._xDataType),this.axisX._updateActualLimits(l,a.left,a.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),a.top,a.bottom)}var _=this._getAxes();if(this._updateAuxAxes(_,o),this._layout(i,s,t),t.startGroup(e._CSS_PLOT_AREA),t.fill="transparent",t.stroke=null,this.plotAreas.length>0)for(var u=0;u<this.plotAreas.length;u++){this.plotAreas[u]._render(t)}else{var c=this._plotRect;t.drawRect(c.left,c.top,c.width,c.height)}t.endGroup();var p=this._series.length;this._clearPlotters();var d={};for(u=0;u<p;u++){var f=this._series[u];if(((w=f.visibility)==SeriesVisibility.Visible||w==SeriesVisibility.Plot)&&f.getValues(0)){var g=f._getAxisY(),m=this._getPlotter(f);if(!g||g==this.axisY||m instanceof _BarPlotter)m.seriesCount++;else{var y=g._uniqueId;d[y]?d[y].count+=1:d[y]={count:1,index:0}}}}if(this.onRendering(new RenderEventArgs(t)),this._getChartType()!==ChartType.Funnel)for(u=0;u<_.length;u++){var b=_[u];x=b.axisType==AxisType.X?t.startGroup(e._CSS_AXIS_X,this._chartRectId):t.startGroup(e._CSS_AXIS_Y,this._chartRectId),b._hostElement=n?x:b._hostElement,b._render(t),t.endGroup()}t.startGroup("wj-series-group"),this._plotrectId="plotRect"+(1e6*Math.random()).toFixed(),t.addClipRect(this._plotRect,this._plotrectId);for(u=0;u<p;u++){var v=this._series[u];v._pointIndexes=[];m=this._getPlotter(v);v._plotter=m;var x=t.startGroup(v.cssClass,m.clipping?this._plotrectId:null);v._hostElement=n?x:v._hostElement;var w=v.visibility,S=v.axisX,P=v.axisY;if(S||(S=this.axisX),P||(P=this.axisY),w==SeriesVisibility.Visible||w==SeriesVisibility.Plot){var C,M,T=d[P._uniqueId];T?(C=T.index,M=T.count,T.index++,v.onRendering(t,C,M)||m.plotSeries(t,S,P,v,this,C,M)):(C=m.seriesIndex,M=m.seriesCount,m.seriesIndex++,v.onRendering(t,C,M)||m.plotSeries(t,S,P,v,this,C,M)),v.onRendered(t)}t.endGroup()}t.endGroup(),this._lblAreas=[],this.dataLabel.content&&this.dataLabel.position!=LabelPosition.None&&this._renderLabels(t),this._highlightCurrent(),this.onRendered(new RenderEventArgs(t))},e.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new wijmo_1.Size,s=this.series,o=s.length,a=0,h=0;this._colRowLens=[];for(var l=0;l<o;l++){var _=wijmo_1.tryCast(s[l],SeriesBase),u=_.visibility;if(_.name&&u!=SeriesVisibility.Hidden&&u!=SeriesVisibility.Plot)for(var c=_.legendItemLength(),p=0;p<c;p++){var d=_.measureLegendItem(t,p);e?(a+d.height>n&&(r.height=n,this._colRowLens.push(h),h=0,a=0),h<d.width&&(h=d.width),a+=d.height):(h+d.width>i&&(r.width=i,this._colRowLens.push(a),a=0,h=0),a<d.height&&(a=d.height),h+=d.width)}}return e?(r.height<a&&(r.height=a),this._colRowLens.push(h),r.width=this._colRowLens.reduce(function(t,e){return t+e},0),r.width>i/2&&(r.width=i/2)):(r.width<h&&(r.width=h),this._colRowLens.push(a),r.height=this._colRowLens.reduce(function(t,e){return t+e},0),r.height>n/2&&(r.height=n/2)),r},e.prototype._renderLegend=function(t,e,i,n,r,s){var o,a=this.series,h=a.length,l=e.clone(),_=0;if(this._getChartType()===ChartType.Bar)for(var u=h-1;u>=0;u--)o=wijmo_1.tryCast(a[u],SeriesBase),_=this._renderLegendElements(t,o,e,l,i,n,r,s,_);else for(u=0;u<h;u++)o=wijmo_1.tryCast(a[u],SeriesBase),_=this._renderLegendElements(t,o,e,l,i,n,r,s,_)},e.prototype._renderLegendElements=function(t,e,i,n,r,s,o,a,h){var l=this._rectLegend,_=h;if(!e)return _;var u=e.visibility;if(!e.name||u==SeriesVisibility.Hidden||u==SeriesVisibility.Plot)return e._legendElement=null,r.push(null),_;var c=e.legendItemLength(),p=t.startGroup(e.cssClass);u==SeriesVisibility.Legend?(p.setAttribute("opacity","0.5"),e._legendElement=p):u==SeriesVisibility.Visible?e._legendElement=p:e._legendElement=null;for(var d=0;d<c;d++){var f=e.measureLegendItem(t,d);s?n.y+f.height>l.top+l.height+1&&(n.x+=this._colRowLens[_],_++,n.y=i.y):n.x+f.width>l.left+l.width+1&&(n.y+=this._colRowLens[_],_++,n.x=i.x);var g=new wijmo_1.Rect(n.x,n.y,f.width,f.height);u!=SeriesVisibility.Legend&&u!=SeriesVisibility.Visible||e.drawLegendItem(t,g,d),r.push(g),s?n.y+=f.height:n.x+=f.width}return t.endGroup(),_},e.prototype._renderLabels=function(t){var i=this.series,n=i.length;t.stroke="null",t.fill="transparent",t.strokeWidth=1;var r=e._CSS_DATA_LABELS;t.startGroup(r);for(var s=0;s<n;s++){var o=i[s],a=this._hitTester._map[s];a&&o._renderLabels(t,a,this,this._lblAreas)}t.endGroup()},e.prototype._getAxes=function(){for(var t=[this.axisX,this.axisY],e=this.series.length,i=0;i<e;i++){var n=this.series[i],r=n.axisX;r&&-1===t.indexOf(r)&&t.push(r);var s=n.axisY;s&&-1===t.indexOf(s)&&t.push(s)}return t},e.prototype._clearPlotters=function(){for(var t=this._plotters.length,e=0;e<t;e++)this._plotters[e].clear()},e.prototype._initPlotter=function(t){t.chart=this,t.dataInfo=this._dataInfo,t.hitTester=this._hitTester,this._plotters.push(t)},Object.defineProperty(e.prototype,"_barPlotter",{get:function(){return null===this.__barPlotter&&(this.__barPlotter=new _BarPlotter,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_linePlotter",{get:function(){return null===this.__linePlotter&&(this.__linePlotter=new _LinePlotter,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_areaPlotter",{get:function(){return null===this.__areaPlotter&&(this.__areaPlotter=new _AreaPlotter,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_bubblePlotter",{get:function(){return null===this.__bubblePlotter&&(this.__bubblePlotter=new _BubblePlotter,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_financePlotter",{get:function(){return null===this.__financePlotter&&(this.__financePlotter=new _FinancePlotter,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_funnelPlotter",{get:function(){return null===this.__funnelPlotter&&(this.__funnelPlotter=new _FunnelPlotter,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),e.prototype._getPlotter=function(t){var e,i=this._getChartType(),n=!1;if(t){var r=t._getChartType();null!==r&&void 0!==r&&r!=i&&(i=r,n=!0)}switch(i){case ChartType.Column:this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case ChartType.Bar:this._barPlotter.rotated=!this._rotated,this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case ChartType.Line:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,e=this._linePlotter;break;case ChartType.Scatter:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!1,this._linePlotter.isSpline=!1,e=this._linePlotter;break;case ChartType.LineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,e=this._linePlotter;break;case ChartType.Area:this._areaPlotter.isSpline=!1,e=this._areaPlotter;break;case ChartType.Bubble:e=this._bubblePlotter;break;case ChartType.Candlestick:(s=this._financePlotter).isCandle=!0,s.isEqui=!1,s.isArms=!1,s.isVolume=!1,e=s;break;case ChartType.HighLowOpenClose:var s;(s=this._financePlotter).isCandle=!1,s.isEqui=!1,s.isArms=!1,s.isVolume=!1,e=s;break;case ChartType.Spline:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,e=this._linePlotter;break;case ChartType.SplineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,e=this._linePlotter;break;case ChartType.SplineArea:this._areaPlotter.isSpline=!0,e=this._areaPlotter;break;case ChartType.Funnel:e=this._funnelPlotter;break;default:throw"Invalid chart type."}return e.rotated=this._rotated,i==ChartType.Bar&&(e.rotated=!e.rotated),n&&(e.rotated=this._isRotated()),e},e.prototype._layout=function(t,e,i){this.plotAreas.length>0?this._layoutMultiple(t,e,i):this._layoutSingle(t,e,i)},e.prototype._layoutSingle=function(t,e,i){for(var n=t.width,r=t.height,s=new wijmo_1.Size(n,.75*r),o=new wijmo_1.Size(r,.75*n),a=0,h=0,l=n,_=r,u=0,c=0,p=n,d=r,f=this._getAxes(),g=0;g<f.length;g++){var m=(C=f[g]).origin,y=C._getPosition();if(C.axisType==AxisType.X){(w=C._getHeight(i,n))>s.height&&(w=s.height),C._desiredSize=new wijmo_1.Size(s.width,w);var b=C._hasOrigin=wijmo_1.isNumber(m)&&m>this.axisY._getMinNum()&&m<this.axisY._getMaxNum(),v=Math.min(.25*n,C._annoSize.width);if(y==Position.Bottom)if(a=Math.max(a,.5*v),l=Math.min(l,n-.5*v),b){var x=this._convertY(m,c,d);d-=Math.max(0,x+w-d)}else d-=w;else if(y==Position.Top)if(a=Math.max(a,.5*v),l=Math.min(l,n-.5*v),b){x=this._convertY(m,c,d);c+=Math.max(0,c-(x-w))}else c+=w}else if(C.axisType==AxisType.Y){var w;(w=C._getHeight(i,r))>o.height&&(w=o.height),C._desiredSize=new wijmo_1.Size(o.width,w);b=C._hasOrigin=wijmo_1.isNumber(m)&&m>this.axisX._getMinNum()&&m<this.axisX._getMaxNum();if(y==Position.Left)if(C._actualAngle<0?_=Math.min(_,r-C._annoSize.height):C._actualAngle>0?h=Math.max(h,C._annoSize.height):(h=Math.max(h,C._annoSize.height),_=Math.min(_,r-C._annoSize.height)),b){var S=this._convertX(m,u,p);u+=Math.max(0,u-(S-w))}else u+=w;else if(y==Position.Right)if(C._actualAngle>0?_=Math.min(_,r-C._annoSize.height):C._actualAngle<0?h=Math.max(h,C._annoSize.height):(h=Math.max(h,C._annoSize.height),_=Math.min(_,r-C._annoSize.height)),b){S=this._convertX(m,u,p);p-=Math.max(0,S+w-p)}else p-=w}}var P=this._parseMargin(this.plotMargin);a=u=isNaN(P.left)?Math.max(a,u)+t.left:P.left,l=p=isNaN(P.right)?Math.min(l,p)+t.left:e.width-P.right,h=c=isNaN(P.top)?Math.max(h,c)+t.top:P.top,_=d=isNaN(P.bottom)?Math.min(_,d)+t.top:e.height-P.bottom,n=Math.max(1,l-a),r=Math.max(1,_-h),this._plotRect=new wijmo_1.Rect(a,h,n,r),_<=h&&(d=c+1),i.stroke=null;for(g=0;g<f.length;g++){var C;m=(C=f[g]).origin,y=C._getPosition();if(C.axisType==AxisType.X){var M;if(C._hasOrigin){x=this._convertY(m,this._plotRect.top,this._plotRect.bottom);y==Position.Bottom?(M=new wijmo_1.Rect(a,x,n,C._desiredSize.height),d+=Math.max(0,M.bottom-this._plotRect.bottom)):y==Position.Top?(M=new wijmo_1.Rect(a,x-C._desiredSize.height,n,C._desiredSize.height),c-=Math.max(0,this._plotRect.top-M.top)):M=new wijmo_1.Rect(a,x,n,1)}else y==Position.Bottom?(M=new wijmo_1.Rect(a,d,n,C._desiredSize.height),d+=C._desiredSize.height):y==Position.Top?(M=new wijmo_1.Rect(a,c-C._desiredSize.height,n,C._desiredSize.height),c-=C._desiredSize.height):M=new wijmo_1.Rect(a,c,n,1);C._layout(M,this._plotRect)}else if(C.axisType==AxisType.Y){var T;if(C._hasOrigin){S=this._convertX(m,this._plotRect.left,this._plotRect.right);y==Position.Left?(T=new wijmo_1.Rect(S-C._desiredSize.height,h,r,C._desiredSize.height),u-=C._desiredSize.height):y==Position.Right?(T=new wijmo_1.Rect(S,h,r,C._desiredSize.height),p+=C._desiredSize.height):T=new wijmo_1.Rect(S,h,r,1)}else y==Position.Left?(T=new wijmo_1.Rect(u-C._desiredSize.height,h,r,C._desiredSize.height),u-=C._desiredSize.height):y==Position.Right?(T=new wijmo_1.Rect(p,h,r,C._desiredSize.height),p+=C._desiredSize.height):T=new wijmo_1.Rect(u,h,r,1);C._layout(T,this._plotRect)}}},e.prototype._layoutMultiple=function(t,e,i){for(var n=t.width,r=t.height,s=[],o=[],a=this._getAxes(),h=a.length,l=0;l<h;l++){if((P=a[l])._plotrect=null,P.axisType==AxisType.X){for(var _=P.plotArea?P.plotArea.column:0;s.length<=_;)s.push(new _AreaDef);s[_].axes.push(P)}else if(P.axisType==AxisType.Y){for(var u=P.plotArea?P.plotArea.row:0;o.length<=u;)o.push(new _AreaDef);o[u].axes.push(P)}}for(var c=s.length,p=o.length,d=new wijmo_1.Size(n,.3*r),f=new wijmo_1.Size(r,.3*n),g=0,m=0,y=n,b=r,v=0;v<c;v++){(L=s[v]).right=n,L.bottom=r;for(l=0;l<L.axes.length;l++){var x=(P=L.axes[l])._getHeight(i,P.axisType==AxisType.X?n:r);x>d.height&&(x=d.height);var w=new wijmo_1.Size(d.width,x);P._desiredSize=w,0==v&&(L.left=Math.max(L.left,.5*P._annoSize.width)),v==c-1&&(L.right=Math.min(L.right,n-.5*P._annoSize.width)),(R=P._getPosition())==Position.Bottom?L.bottom-=w.height:R==Position.Top&&(L.top+=w.height)}}for(var S=0;S<p;S++){(L=o[S]).right=n,L.bottom=r;for(l=0;l<L.axes.length;l++){var P=L.axes[l],C=new wijmo_1.Size(f.width,P._getHeight(i,P.axisType==AxisType.X?n:r));C.height>f.height&&(C.height=f.height),P._desiredSize=C,0==S&&(L.top=Math.max(L.top,.5*P._annoSize.width)),S==p-1&&(L.bottom=Math.min(L.bottom,r-.5*P._annoSize.width)),(R=P._getPosition())==Position.Left?L.left+=C.height:R==Position.Right&&(L.right-=C.height)}}var M=0,T=0,j=n,A=r;for(v=0;v<c;v++){var L=s[v];M=Math.max(M,L.left),T=Math.max(T,L.top),j=Math.min(j,L.right),A=Math.min(A,L.bottom)}for(S=0;S<p;S++){L=o[S];M=Math.max(M,L.left),T=Math.max(T,L.top),j=Math.min(j,L.right),A=Math.min(A,L.bottom)}M=g=Math.max(g,M),j=y=Math.min(y,j),T=m=Math.max(m,T),A=b=Math.min(b,A),this._plotRect=new wijmo_1.Rect(g,m,y-g,b-m);var N=this._plotRect.clone(),I=g,k=this.plotAreas._calculateWidths(this._plotRect.width,c);for(v=0;v<c;v++){A=b,T=m;L=s[v];var E=k[v];for(l=0;l<L.axes.length;l++){var D,R=(P=L.axes[l])._getPosition(),O=new wijmo_1.Rect(I,N.top,E,N.height);R==Position.Bottom?(D=new wijmo_1.Rect(I,A,E,P._desiredSize.height),A+=P._desiredSize.height):R==Position.Top&&(D=new wijmo_1.Rect(I,T-P._desiredSize.height,E,P._desiredSize.height),T-=P._desiredSize.height),P._layout(D,O)}for(l=0;l<this.plotAreas.length;l++){(Y=this.plotAreas[l]).column==v&&Y._setPlotX(I,E)}I+=E}var F=m,V=this.plotAreas._calculateHeights(this._plotRect.height,p);for(S=0;S<p;S++){M=g,j=y;L=o[S];var B=V[S];for(l=0;l<L.axes.length;l++){var X;R=(P=L.axes[l])._getPosition(),O=new wijmo_1.Rect(N.left,F,N.width,B);P._plotrect?(O.left=P._plotrect.left,O.width=P._plotrect.width):k&&k.length>0&&(O.width=k[0]),R==Position.Left?(X=new wijmo_1.Rect(M-P._desiredSize.height,F,B,P._desiredSize.height),M-=P._desiredSize.height):R==Position.Right&&(X=new wijmo_1.Rect(j,F,B,P._desiredSize.height),j+=P._desiredSize.height),P._layout(X,O)}for(l=0;l<this.plotAreas.length;l++){var Y;(Y=this.plotAreas[l]).row==S&&Y._setPlotY(F,B)}F+=B}},e.prototype._convertX=function(t,e,i){var n=this.axisX;return n.reversed?i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},e.prototype._convertY=function(t,e,i){var n=this.axisY;return n.reversed?e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},e.prototype._getLabelContent=function(t,e){return wijmo_1.isString(e)?this._keywords.replace(e,t):wijmo_1.isFunction(e)?e(t):null},e.prototype._select=function(t,e){var i=!1;if(t==this._selection&&e==this._selectionIndex||(i=!0),this._selection&&this._highlight(this._selection,!1,this._selectionIndex),this._selection=t,this._selectionIndex=e,this._selection&&this._highlight(this._selection,!0,this._selectionIndex),this.selectionMode==SelectionMode.Point){var n=t?t.collectionView:this._cv;n&&(this._notifyCurrentChanged=!1,n.moveCurrentToPosition(t?e:-1),this._notifyCurrentChanged=!0)}i&&this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=SelectionMode.None){var t=this._selection,e=-1;if(t){var i=t.collectionView;i||(i=this._cv),i&&(e=i.currentPosition),this._highlight(t,!0,e)}}},e.prototype._highlight=function(t,i,n){if(t=wijmo_1.asType(t,SeriesBase,!0),this.selectionMode==SelectionMode.Series){var r=this.series.indexOf(t),s=t.hostElement;i?s.parentNode.appendChild(s):s.parentNode.insertBefore(s,s.parentNode.childNodes.item(r));var o=this._find(s,["rect","ellipse","polyline","polygon","line","path"]);this._highlightItems(o,e._CSS_SELECTION,i),t.legendElement&&this._highlightItems(this._find(t.legendElement,["rect","ellipse","line"]),e._CSS_SELECTION,i)}else if(this.selectionMode==SelectionMode.Point){r=this.series.indexOf(t),s=t.hostElement;if(i){s.parentNode.appendChild(s);var a=t.getPlotElement(n);if(a)if(a instanceof SVGElement){"g"!=a.nodeName&&this._highlightItems([a],e._CSS_SELECTION,i);o=this._find(a,["line","rect","ellipse","path","polygon"]);this._highlightItems(o,e._CSS_SELECTION,i)}else Array.isArray(a)&&this._highlightItems(a,e._CSS_SELECTION,i)}else{s.parentNode.insertBefore(s,s.parentNode.childNodes.item(r));o=this._find(s,["rect","ellipse","line","path","polygon"]);this._highlightItems(o,e._CSS_SELECTION,i)}}},e.prototype._updateTooltip=function(t,e){var i,n=this.hitTest(e);if(n.distance<=t.threshold){var r=t.content;if(n.series&&n.chartElement==ChartElement.PlotArea){var s=n.series.tooltipContent;(s||""===s)&&(r=s)}i=this._getLabelContent(n,r)}i?this._showToolTip(i,new wijmo_1.Rect(e.clientX,e.clientY,5,5)):this._hideToolTip()},e.prototype._updateAuxAxes=function(t,e){for(var i=2;i<t.length;i++){var n=t[i];n._chart=this;for(var r,s,o=[],a=0;a<this.series.length;a++){var h=this.series[a];h.axisX!=n&&h.axisY!=n||o.push(h)}for(a=0;a<o.length;a++){var l=o[a].getDataRect()||o[a]._getDataRect();l&&(n.axisType==AxisType.X&&!e||n.axisType==AxisType.Y&&e?((void 0===r||l.left<r)&&(r=l.left),(void 0===s||l.right>s)&&(s=l.right)):((void 0===r||l.top<r)&&(r=l.top),(void 0===s||l.bottom>s)&&(s=l.bottom)))}var _=o[0].getDataType(0);null==_&&(_=wijmo_1.DataType.Number),t[i]._updateActualLimits(_,r,s)}},e._CSS_AXIS_X="wj-axis-x",e._CSS_AXIS_Y="wj-axis-y",e._CSS_LINE="wj-line",e._CSS_GRIDLINE="wj-gridline",e._CSS_TICK="wj-tick",e._CSS_GRIDLINE_MINOR="wj-gridline-minor",e._CSS_TICK_MINOR="wj-tick-minor",e._CSS_DATA_LABELS="wj-data-labels",e}(FlexChartBase);exports.FlexChartCore=FlexChartCore;var _AreaDef=function(){function t(){this._axes=new Array,this.left=0,this.right=0,this.top=0,this.bottom=0}return Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),t}(),_DataInfo=function(){function t(){this.stackAbs={},this._xvals=null}return t.prototype.analyse=function(e,i,n,r,s,o){var a=this;this.minY=NaN,this.maxY=NaN,this.minX=NaN,this.maxX=NaN,this.minXp=NaN,this.minYp=NaN,this.dx=0;var h={},l={},_={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=r,null!=r)for(var u=r.length,c=0;c<u;c++){var p=r[c];if((isNaN(this.minX)||this.minX>p)&&(this.minX=p),(isNaN(this.maxX)||this.maxX<p)&&(this.maxX=p),p>0&&(isNaN(this.minXp)||this.minXp>p)&&(this.minXp=p),c>0){var d=Math.abs(p-r[c-1]);!isNaN(d)&&(d<this.dx||0==this.dx)&&(this.dx=d)}}for(c=0;c<e.length;c++){var f=e[c],g=f._getChartType(),m=void 0!==f.chartType,y=f.visibility;if(y!=SeriesVisibility.Hidden&&y!=SeriesVisibility.Legend){var b,v=f.getDataRect();v&&(!isNaN(this.minX)&&this.minX<v.left&&(b=v.right,v.left=this.minX,v.width=b-this.minX),!isNaN(this.maxX)&&this.maxX>v.right&&(v.width=this.maxX-v.left),!isNaN(this.minY)&&this.minY<v.top&&(b=v.bottom,v.top=this.minY,v.height=b-this.minY),!isNaN(this.maxY)&&this.maxY>v.bottom&&(v.height=this.maxY-v.top));var x=null;if(i?f._isCustomAxisY()||(x=f.getValues(1)):f._isCustomAxisX()||(x=f.getValues(1)),x){this.dataTypeX||(this.dataTypeX=f.getDataType(1));for(var w=0;w<x.length;w++){var S=x[w];if(t.isValid(S)&&((isNaN(this.minX)||this.minX>S)&&(this.minX=S),(isNaN(this.maxX)||this.maxX<S)&&(this.maxX=S),w>0&&(!g||g==ChartType.Column||g==ChartType.Bar))){d=Math.abs(S-x[w-1]);!isNaN(d)&&d>0&&(d<this.dx||0==this.dx)&&(this.dx=d)}}}var P=null,C=!1;if(i?(C=f._isCustomAxisX(),P=f.getValues(0)):(C=f._isCustomAxisY(),P=f.getValues(0)),P&&(this.dataTypeY||C||(this.dataTypeY=f.getDataType(0)),isNaN(this.minX)?this.minX=0:x||r||(this.minX=Math.min(this.minX,0)),isNaN(this.maxX)?this.maxX=P.length-1:x||r||(this.maxX=Math.max(this.maxX,P.length-1)),!C))for(w=0;w<P.length;w++){S=P[w],p=x?wijmo_1.asNumber(x[w],!0):r?wijmo_1.asNumber(r[w],!0):w;wijmo_1.isArray(S)?S.forEach(function(t){a._parseYVal(t,p,m,_,h,l)}):this._parseYVal(S,p,m,_,h,l)}var M=f.getDataRect(new wijmo_1.Rect(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY),v);M&&(this.minX=M.left,this.maxX=M.right,this.minY=M.top,this.maxY=M.bottom)}}if(n==Stacking.Stacked){for(var T in h)h[T]>this.maxY&&(this.maxY=h[T]);for(var T in l)l[T]<this.minY&&(this.minY=l[T])}else if(n==Stacking.Stacked100pc)for(var T in this.minY=0,this.maxY=1,_){var j=_[T];if(isFinite(j)&&0!=j){var A=h[T],L=l[T];isFinite(A)&&(A=Math.min(A/j,this.maxY)),isFinite(L)&&(L=Math.max(L/j,this.minY))}}this.stackAbs=_,s&&(i?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp),o&&(i?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},t.prototype._parseYVal=function(e,i,n,r,s,o){t.isValid(e)&&(null!=e&&(isNaN(this.minY)||this.minY>e)&&(this.minY=e),null!=e&&(isNaN(this.maxY)||this.maxY<e)&&(this.maxY=e),e>0&&(isNaN(this.minYp)||this.minYp>e)&&(this.minYp=e),n||(e>0?isNaN(s[i])?s[i]=e:s[i]+=e:isNaN(o[i])?o[i]=e:o[i]+=e,isNaN(r[i])?r[i]=Math.abs(e):r[i]+=Math.abs(e)))},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinXp=function(){return this.minXp},t.prototype.getMinYp=function(){return this.minYp},t.prototype.getDeltaX=function(){return this.dx},t.prototype.getDataTypeX=function(){return this.dataTypeX},t.prototype.getDataTypeY=function(){return this.dataTypeY},t.prototype.getStackedAbsSum=function(t){var e=this.stackAbs[t];return isFinite(e)?e:0},t.prototype.getXVals=function(){return this._xvals},t.isValid=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,n=0;n<i;n++)if(!isFinite(t[n]))return!1;return!0},t}();exports._DataInfo=_DataInfo;var LineMarkerLines,LineMarkerInteraction,LineMarkerAlignment,LineMarkers=function(){function t(){this._moveMarker=function(t){var e=t.currentTarget,i=this._markers,n=e.getAttribute("data-markerIndex");null!=n&&i[n].forEach(function(e){e._moveMarker(t)})},this._markers=[],this._bindMoveMarker=this._moveMarker.bind(this)}return t.prototype.attach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,s=n.getAttribute("data-markerIndex");null!=s?(i=r[s])&&wijmo_1.isArray(i)?i.push(t):(r[s]=[t],this._bindMoveEvent(n)):(e=r.length,i=[t],r.push(i),n.setAttribute("data-markerIndex",e),this._bindMoveEvent(n))},t.prototype.detach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,s=n.getAttribute("data-markerIndex");null!=s&&((e=(i=r[s]).indexOf(t))>-1&&i.splice(e,1),0===i.length&&((e=r.indexOf(i))>-1&&(r[e]=void 0),this._unbindMoveEvent(n)))},t.prototype._unbindMoveEvent=function(t){var e=this._bindMoveMarker;t.removeEventListener("mousemove",e),"ontouchstart"in window&&t.removeEventListener("touchmove",e)},t.prototype._bindMoveEvent=function(t){var e=this._bindMoveMarker;t.addEventListener("mousemove",e),"ontouchstart"in window&&t.addEventListener("touchmove",e)},t}(),lineMarkers=new LineMarkers;!function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal",t[t.Both=3]="Both"}(LineMarkerLines=exports.LineMarkerLines||(exports.LineMarkerLines={})),function(t){t[t.None=0]="None",t[t.Move=1]="Move",t[t.Drag=2]="Drag"}(LineMarkerInteraction=exports.LineMarkerInteraction||(exports.LineMarkerInteraction={})),function(t){t[t.Auto=2]="Auto",t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Bottom=4]="Bottom",t[t.Top=6]="Top"}(LineMarkerAlignment=exports.LineMarkerAlignment||(exports.LineMarkerAlignment={}));var LineMarker=function(){function t(t,e){this._wrapperMousedown=null,this._wrapperMouseup=null,this.positionChanged=new wijmo_1.Event;this._chart=t,t.rendered.addHandler(this._initialize,this),this._resetDefaultValue(),wijmo_1.copy(this,e),this._initialize()}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){t!==this._isVisible&&(this._isVisible=wijmo_1.asBoolean(t),this._marker&&this._toggleVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(t){t!==this._seriesIndex&&(this._seriesIndex=wijmo_1.asNumber(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(t){if(t!==this._horizontalPosition){if(this._horizontalPosition=wijmo_1.asNumber(t,!0),this._horizontalPosition<0||this._horizontalPosition>1)throw"horizontalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){var t=this._targetPoint.x-this._plotRect.left;return this._chart.axisX.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t=this._targetPoint.y-this._plotRect.top;return this._chart.axisY.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!==this._content&&(this._content=wijmo_1.asFunction(t),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(t){if(t!==this._verticalPosition){if(this._verticalPosition=wijmo_1.asNumber(t,!0),this._verticalPosition<0||this._verticalPosition>1)throw"verticalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(t){t!==this._alignment&&(this._alignment=t,this._marker&&this._updatePositionByAlignment())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lines",{get:function(){return this._lines},set:function(t){(t=wijmo_1.asEnum(t,LineMarkerLines))!=this._lines&&(this._lines=t,this._marker&&this._resetLinesVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interaction",{get:function(){return this._interaction},set:function(t){(t=wijmo_1.asEnum(t,LineMarkerInteraction))!=this._interaction&&(this._marker&&this._detach(),this._interaction=t,this._marker&&this._attach(),this._toggleElesDraggableClass(this._interaction==LineMarkerInteraction.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){t!=this._dragThreshold&&(this._dragThreshold=wijmo_1.asNumber(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragContent",{get:function(){return this._dragContent},set:function(e){e!==this._dragContent&&(this._dragContent=wijmo_1.asBoolean(e)),wijmo_1.toggleClass(this._dragEle,t._CSS_LINE_DRAGGABLE,this._interaction===LineMarkerInteraction.Drag&&this._dragContent&&this._lines!==LineMarkerLines.None)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragLines",{get:function(){return this._dragLines},set:function(t){t!=this._dragLines&&(this._dragLines=wijmo_1.asBoolean(t))},enumerable:!0,configurable:!0}),t.prototype.onPositionChanged=function(t){this.positionChanged.raise(this,t)},t.prototype.remove=function(){var t=this._chart;this._marker&&(t.rendered.removeHandler(this._initialize,this),this._detach(),this._removeMarker(),this._wrapperMoveMarker=null,this._wrapperMousedown=null,this._wrapperMouseup=null)},t.prototype._attach=function(){var e=this._chart.hostElement;this._interaction!==LineMarkerInteraction.None?wijmo_1.addClass(e,t._CSS_TOUCH_DISABLED):wijmo_1.removeClass(e,t._CSS_TOUCH_DISABLED),lineMarkers.attach(this),this._attachDrag()},t.prototype._attachDrag=function(){this._interaction===LineMarkerInteraction.Drag&&(this._wrapperMousedown||(this._wrapperMousedown=this._onMousedown.bind(this)),this._wrapperMouseup||(this._wrapperMouseup=this._onMouseup.bind(this)),this._toggleDragEventAttach(!0))},t.prototype._detach=function(){wijmo_1.removeClass(this._chart.hostElement,t._CSS_TOUCH_DISABLED),lineMarkers.detach(this),this._detachDrag()},t.prototype._detachDrag=function(){this._interaction===LineMarkerInteraction.Drag&&this._toggleDragEventAttach(!1)},t.prototype._toggleDragEventAttach=function(t){var e=this._chart.hostElement,i=t?"addEventListener":"removeEventListener";e[i]("mousedown",this._wrapperMousedown),document[i]("mouseup",this._wrapperMouseup),"ontouchstart"in window&&e[i]("touchstart",this._wrapperMousedown),"ontouchend"in window&&document[i]("touchend",this._wrapperMouseup)},t.prototype._onMousedown=function(e){var i,n,r,s,o,a=this._getEventPoint(e);this._interaction===LineMarkerInteraction.Drag&&(s=!(0===(i=wijmo_1.getElementRect(this._hLine)).width||0===i.height),o=!(0===(n=wijmo_1.getElementRect(this._vLine)).width||0===n.height),r=wijmo_1.getElementRect(this._markerContent),this._dragContent&&this._pointInRect(a,r)?(this._capturedEle=this._markerContent,this._contentDragStartPoint=new wijmo_1.Point(a.x,a.y),this._mouseDownCrossPoint=new wijmo_1.Point(this._targetPoint.x,this._targetPoint.y)):s&&(Math.abs(i.top-a.y)<=this._dragThreshold||Math.abs(a.y-i.top-i.height)<=this._dragThreshold||a.y>=i.top&&a.y<=i.top+i.height)?(this._capturedEle=this._hLine,this._contentDragStartPoint=void 0,wijmo_1.addClass(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)):o&&(Math.abs(n.left-a.x)<=this._dragThreshold||Math.abs(a.x-n.left-n.width)<=this._dragThreshold||a.x>=n.left&&a.x<=n.left+n.width)&&(this._capturedEle=this._vLine,this._contentDragStartPoint=void 0,wijmo_1.addClass(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)),e.preventDefault())},t.prototype._onMouseup=function(e){var i=this._alignment===LineMarkerAlignment.Auto&&this._capturedEle===this._markerContent&&this._lines!==LineMarkerLines.None;this._capturedEle=void 0,this._contentDragStartPoint=void 0,this._mouseDownCrossPoint=void 0,i&&(this._updatePositionByAlignment(),this._updatePositionByAlignment()),wijmo_1.removeClass(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)},t.prototype._moveMarker=function(t){var e,i,n,r,s,o,a=this._chart,h=this._getEventPoint(t),l=this._plotRect,_=this._interaction===LineMarkerInteraction.Drag,u=this._lines===LineMarkerLines.Horizontal,c=this._lines===LineMarkerLines.Vertical,p=this._seriesIndex,d=wijmo_1.getElementRect(a.hostElement);if(l&&this._isVisible&&this._interaction!==LineMarkerInteraction.None&&(this._interaction!==LineMarkerInteraction.Drag||this._capturedEle&&this._lines!==LineMarkerLines.None)){if(_&&(this._contentDragStartPoint?(h.x=u?this._targetPoint.x:this._mouseDownCrossPoint.x+h.x-this._contentDragStartPoint.x,h.y=c?this._targetPoint.y:this._mouseDownCrossPoint.y+h.y-this._contentDragStartPoint.y):u||!this._dragLines&&this._capturedEle===this._hLine?h.x=this._targetPoint.x:(c||!this._dragLines&&this._capturedEle===this._vLine)&&(h.y=this._targetPoint.y)),_&&this._lines===LineMarkerLines.Horizontal||!this._dragLines&&this._capturedEle===this._hLine){if(h.y<=l.top||h.y>=l.top+l.height)return}else if(_&&this._lines===LineMarkerLines.Vertical||!this._dragLines&&this._capturedEle===this._vLine){if(h.x<=l.left||h.x>=l.left+l.width)return}else if(h.x<=l.left||h.y<=l.top||h.x>=l.left+l.width||h.y>=l.top+l.height)return;if(null!=p&&p>=0&&p<a.series.length){if(null==(i=(e=a.series[p]).hitTest(new wijmo_1.Point(h.x,NaN)))||null==i.x||null==i.y)return;n=e.axisX||a.axisX,r=e._getAxisY(),s=wijmo_1.isDate(i.x)?FlexChartCore._toOADate(i.x):i.x,s=wijmo_1.isString(s)?i.pointIndex:s,o=wijmo_1.isDate(i.y)?FlexChartCore._toOADate(i.y):i.y;var f=this._getElementPaddingValuee(a.hostElement,"padding-left"),g=this._getElementPaddingValuee(a.hostElement,"padding-top");h.x=n.convert(s)+f+d.left,h.y=r.convert(o)+g+d.top}this._updateMarkerPosition(h),t.preventDefault()}},t.prototype._getElementPaddingValuee=function(t,e){return+window.getComputedStyle(t,null).getPropertyValue(e).replace("px","")},t.prototype._show=function(t){(t||this._marker).style.display="block"},t.prototype._hide=function(t){(t||this._marker).style.display="none"},t.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},t.prototype._resetDefaultValue=function(){this._isVisible=!0,this._alignment=LineMarkerAlignment.Auto,this._lines=LineMarkerLines.None,this._interaction=LineMarkerInteraction.None,this._horizontalPosition=null,this._verticalPosition=null,this._content=null,this._seriesIndex=null,this._dragThreshold=15,this._dragContent=!1,this._dragLines=!1,this._targetPoint=new wijmo_1.Point},t.prototype._initialize=function(){var t,e=this._chart.hostElement.querySelector("."+FlexChartCore._CSS_PLOT_AREA);this._plot=e,this._marker||this._createMarker(),e&&(this._plotRect=wijmo_1.getElementRect(e),t=e.getBBox(),this._plotRect.width=t.width,this._plotRect.height=t.height,this._updateMarkerSize(),this._updateLinesSize()),this._updateMarkerPosition(),this._wrapperMoveMarker=this._moveMarker.bind(this),this._attach()},t.prototype._createMarker=function(){var e,i;e=document.createElement("div"),wijmo_1.addClass(e,t._CSS_MARKER),(i=this._getContainer()).appendChild(e),this._markerContainer=i,this._marker=e,this._createChildren()},t.prototype._removeMarker=function(){var t=this._markerContainer;t.removeChild(this._marker),this._content=null,this._hLine=null,this._vLine=null,t.hasChildNodes()||(this._chart.hostElement.removeChild(this._markerContainer),this._markerContainer=null),this._marker=null},t.prototype._getContainer=function(){var e=this._chart.hostElement.querySelector(t._CSS_MARKER_CONTAINER);return e||(e=this._createContainer()),e},t.prototype._createContainer=function(){var e=document.createElement("div"),i=this._chart.hostElement;return wijmo_1.addClass(e,t._CSS_MARKER_CONTAINER),i.insertBefore(e,i.firstChild),e},t.prototype._createChildren=function(){var e,i,n,r,s=this._marker;(r=document.createElement("div")).style.position="absolute",r.style.height="100%",r.style.width="100%",s.appendChild(r),this._dragEle=r,e=document.createElement("div"),wijmo_1.addClass(e,t._CSS_MARKER_CONTENT),s.appendChild(e),this._markerContent=e,i=document.createElement("div"),wijmo_1.addClass(i,t._CSS_MARKER_HLINE),s.appendChild(i),this._hLine=i,n=document.createElement("div"),wijmo_1.addClass(n,t._CSS_MARKER_VLINE),s.appendChild(n),this._vLine=n,this._toggleElesDraggableClass(this._interaction===LineMarkerInteraction.Drag),this._resetLinesVisibility()},t.prototype._toggleElesDraggableClass=function(e){wijmo_1.toggleClass(this._hLine,t._CSS_LINE_DRAGGABLE,e),wijmo_1.toggleClass(this._vLine,t._CSS_LINE_DRAGGABLE,e),wijmo_1.toggleClass(this._dragEle,t._CSS_LINE_DRAGGABLE,e&&this._dragContent&&this._lines!==LineMarkerLines.None)},t.prototype._updateMarkerSize=function(){var t=this._plotRect,e=this._chart.hostElement,i=window.getComputedStyle(e,null),n=wijmo_1.getElementRect(e);this._marker&&(this._marker.style.marginTop=t.top-n.top-(parseFloat(i.getPropertyValue("padding-top"))||0)+"px",this._marker.style.marginLeft=t.left-n.left-(parseFloat(i.getPropertyValue("padding-left"))||0)+"px")},t.prototype._updateLinesSize=function(){var t=this._plotRect;this._hLine&&this._vLine&&(this._hLine.style.width=t.width+"px",this._vLine.style.height=t.height+"px")},t.prototype._resetLinesVisibility=function(){this._hLine&&this._vLine&&(this._hide(this._hLine),this._hide(this._vLine),this._lines!==LineMarkerLines.Horizontal&&this._lines!==LineMarkerLines.Both||this._show(this._hLine),this._lines!==LineMarkerLines.Vertical&&this._lines!==LineMarkerLines.Both||this._show(this._vLine))},t.prototype._updateMarkerPosition=function(t){var e,i,n=this._plotRect,r=this._targetPoint,s=!1;this._interaction,LineMarkerInteraction.Drag;this._plot&&(e=n.left+n.width*(this._horizontalPosition||0),i=n.top+n.height*(this._verticalPosition||0),null==this._horizontalPosition&&t&&(e=t.x),null==this._verticalPosition&&t&&(i=t.y),e===r.x&&i===r.y||(s=!0),r.x=e,r.y=i,this._toggleVisibility(),this._content&&this._updateContent(),s&&this._raisePositionChanged(e,i),this._updatePositionByAlignment(!!t))},t.prototype._updateContent=function(){var t,e=this._chart,i=this._targetPoint,n=e.hitTest(i);t=this._content.call(null,n,i),this._markerContent.innerHTML=t||""},t.prototype._raisePositionChanged=function(t,e){this._plotRect;this.onPositionChanged(new wijmo_1.Point(t,e))},t.prototype._updatePositionByAlignment=function(t){var e=this._alignment,i=this._targetPoint,n=this._marker,r=0,s=0,o=n.clientWidth,a=n.clientHeight,h=this._plotRect;this._plot&&(!this._capturedEle||this._capturedEle&&this._capturedEle!==this._markerContent?(e===LineMarkerAlignment.Auto?(i.x+o+12>h.left+h.width&&i.x-o>=0&&(s=o),r=a,i.y-a<h.top&&(r=0)):(1==(1&e)&&(s=o),2==(2&e)&&(r=a)),this._interaction===LineMarkerInteraction.Move&&0===r&&0===s&&null==this.verticalPosition&&(s=-12)):(parseInt(this._hLine.style.top)>0&&(r=a),parseInt(this._vLine.style.left)>0&&(s=o)),n.style.left=i.x-s-h.left+"px",n.style.top=i.y-r-h.top+"px",this._hLine.style.top=r+"px",this._hLine.style.left=h.left-i.x+s+"px",this._vLine.style.top=h.top-i.y+r+"px",this._vLine.style.left=s+"px")},t.prototype._getEventPoint=function(t){return t instanceof MouseEvent?new wijmo_1.Point(t.pageX,t.pageY):new wijmo_1.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},t.prototype._pointInRect=function(t,e){return!(!t||!e)&&(t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height)},t._CSS_MARKER="wj-chart-linemarker",t._CSS_MARKER_HLINE="wj-chart-linemarker-hline",t._CSS_MARKER_VLINE="wj-chart-linemarker-vline",t._CSS_MARKER_CONTENT="wj-chart-linemarker-content",t._CSS_MARKER_CONTAINER="wj-chart-linemarker-container",t._CSS_LINE_DRAGGABLE="wj-chart-linemarker-draggable",t._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled",t}();exports.LineMarker=LineMarker;var FlexChart=function(t){function e(e,i){var n=t.call(this,e,null)||this;return n._chartType=ChartType.Column,n.initialize(i),n}return __extends(e,t),e.prototype._getChartType=function(){return this._chartType},Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=wijmo_1.asEnum(t,ChartType))!=this._chartType&&(this._chartType=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotated",{get:function(){return this._rotated},set:function(t){t!=this._rotated&&(this._rotated=wijmo_1.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stacking",{get:function(){return this._stacking},set:function(t){(t=wijmo_1.asEnum(t,Stacking))!=this._stacking&&(this._stacking=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(t){t!=this._options&&(this._options=t,this.invalidate())},enumerable:!0,configurable:!0}),e}(FlexChartCore);exports.FlexChart=FlexChart;var _AreaPlotter=function(t){function e(){var e=t.call(this)||this;return e.stacking=Stacking.None,e.isSpline=!1,e.stackPos={},e.stackNeg={},e}return __extends(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;for(var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY(),o=0;o<this.chart.series.length;o++){var a=this.chart.series[o];if(this._isRange(a)){var h=a._getChartType();if(!h||h==ChartType.Area)for(var l=a._getBindingValues(1),_=0;_<l.length;_++)l[_]>s?s=l[_]:l[_]<n&&(n=l[_])}}if(this.isSpline){var u=.1*(s-n);this.chart.axisY._getLogBase()||(n-=u),s+=u}return this.rotated?new wijmo_1.Rect(n,i,s-n,r-i):new wijmo_1.Rect(i,n,r-i,s-n)},e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.plotSeries=function(t,e,i,n,r,s,o,a){var h=n;if(this._isRange(h))this.plotSeriesRanged(t,e,i,n,r,s,o,a);else{var l=[],_=this.chart.series.indexOf(n),u=n.getValues(0),c=n.getValues(1);if(u){var p=u.length;if(p){c||(c=this.dataInfo.getXVals());var d=!0;c?c.length<p&&(p=c.length):(d=!1,c=new Array(p));var f=new Array,g=new Array,m=new Array,y=new Array,b=this.stacking!=Stacking.None&&!h._isCustomAxisY(),v=this.stacking==Stacking.Stacked100pc&&!h._isCustomAxisY();void 0!==h._getChartType()&&(b=v=!1);for(var x=this.rotated,w=!1,S=h.interpolateNulls,P=null,C=null,M=this.chart._plotRect,T=0;T<p;T++){var j=d?c[T]:T,A=u[T];if((null===P||j>P)&&(P=j),(null===C||j<C)&&(C=j),_DataInfo.isValid(j,A)){var L=x?i.convert(j):e.convert(j);if(b){if(v)A/=this.dataInfo.getStackedAbsSum(j);var N=0;A>=0?(N=isNaN(this.stackPos[j])?0:this.stackPos[j],A=this.stackPos[j]=N+A):(N=isNaN(this.stackNeg[j])?0:this.stackNeg[j],A=this.stackNeg[j]=N+A),x?(N<e.actualMin&&(N=e.actualMin),m.push(e.convert(N)),y.push(L)):(m.push(L),N<i.actualMin&&(N=i.actualMin),y.push(i.convert(N)))}if(x){var I=e.convert(A);if(isNaN(L)||isNaN(I))w=!0,b||!0===S||(f.push(void 0),g.push(void 0));else if(f.push(I),g.push(L),FlexChartCore._contains(M,new wijmo_1.Point(I,L)))(k=new _CircleArea(new wijmo_1.Point(I,L),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(_,T,A,j),this.hitTester.add(k,_)}else{var k;I=i.convert(A);if(isNaN(L)||isNaN(I))w=!0,b||!0===S||(f.push(void 0),g.push(void 0));else if(f.push(L),g.push(I),FlexChartCore._contains(M,new wijmo_1.Point(L,I)))(k=new _CircleArea(new wijmo_1.Point(L,I),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(_,T,j,A),this.hitTester.add(k,_)}}else w=!0,b||!0===S||(f.push(void 0),g.push(void 0))}a&&f.forEach(function(t,e){null!=t&&l.push(new wijmo_1.Point(t,g[e]))});var E=this._DEFAULT_WIDTH,D=r._getColorLight(_),R=r._getColor(_),O=_BasePlotter.cloneStyle(n.style,["fill"]),F=_BasePlotter.cloneStyle(n.style,["stroke"]);if(!b&&!0!==S&&w){var V=[],B=[];for(T=0;T<p;T++)if(void 0===f[T]){if(V.length>1){if(this.isSpline)V=(X=this._convertToSpline(V,B)).xs,B=X.ys;t.stroke=R,t.strokeWidth=E,t.fill="none",t.drawLines(V,B,null,O),this.hitTester.add(new _LinesArea(V,B),_),x?(V.push(e.convert(e.actualMin),e.convert(e.actualMin)),B.push(i.convert(i.actualMax),i.convert(i.actualMin))):(V.push(V[V.length-1],V[0]),B.push(i.convert(i.actualMin),i.convert(i.actualMin))),t.fill=D,t.stroke="none",t.drawPolygon(V,B,null,F)}V=[],B=[]}else V.push(f[T]),B.push(g[T]);if(V.length>1){if(this.isSpline)V=(X=this._convertToSpline(V,B)).xs,B=X.ys;t.stroke=R,t.strokeWidth=E,t.fill="none",t.drawLines(V,B,null,O),this.hitTester.add(new _LinesArea(V,B),_),x?(V.push(e.convert(e.actualMin),e.convert(e.actualMin)),B.push(i.convert(i.actualMax),i.convert(i.actualMin))):(V.push(V[V.length-1],V[0]),B.push(i.convert(i.actualMin),i.convert(i.actualMin))),t.fill=D,t.stroke="none",t.drawPolygon(V,B,null,F)}}else{var X;if(this.isSpline)f=(X=this._convertToSpline(f,g)).xs,g=X.ys;if(b){if(this.isSpline){var Y=this._convertToSpline(m,y);m=Y.xs,y=Y.ys}f=f.concat(m.reverse()),g=g.concat(y.reverse())}else x?(f.push(e.convert(e.actualMin),e.convert(e.actualMin)),g[0]>g[g.length-1]?g.push(i.convert(P),i.convert(C)):g.push(i.convert(C),i.convert(P))):(f[0]>f[f.length-1]?f.push(e.convert(C),e.convert(P)):f.push(e.convert(P),e.convert(C)),g.push(i.convert(i.actualMin),i.convert(i.actualMin)));t.fill=D,t.stroke="none",t.drawPolygon(f,g,null,F),b?(f=f.slice(0,f.length-m.length),g=g.slice(0,g.length-y.length)):(f=f.slice(0,f.length-2),g=g.slice(0,g.length-2)),t.stroke=R,t.strokeWidth=E,t.fill="none",t.drawLines(f,g,null,O),this.hitTester.add(new _LinesArea(f,g),_)}this._drawSymbols(t,n,_),a&&l&&l.length&&a(l)}}}},e.prototype._isRange=function(t){var e=this.chart?this.chart._bindingSeparator:",",i=null==t.binding?null:t.binding.split(e);return null!=i&&2==i.length},e.prototype.plotSeriesRanged=function(t,e,i,n,r,s,o,a){var h=[],l=this.chart.series.indexOf(n),_=n,u=n.getValues(0),c=n.getValues(1),p=_._getBindingValues(1);if(u){var d=u.length;if(d){c||(c=this.dataInfo.getXVals());var f=!0;c?c.length<d&&(d=c.length):(f=!1,c=new Array(d));for(var g=new Array,m=new Array,y=new Array,b=this.rotated,v=!1,x=_.interpolateNulls,w=this.chart._plotRect,S=0;S<d;S++){var P=f?c[S]:S,C=u[S],M=p[S];if(_DataInfo.isValid(P,C,M)){var T=b?i.convert(P):e.convert(P);if(b){var j=e.convert(C),A=e.convert(M);if(isNaN(T)||isNaN(j))v=!0,!0!==x&&(g.push(void 0),m.push(void 0),y.push(void 0));else{if(g.push(j),m.push(T),y.push(A),FlexChartCore._contains(w,new wijmo_1.Point(j,T)))(L=new _CircleArea(new wijmo_1.Point(j,T),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,S,C,P),this.hitTester.add(L,l);if(FlexChartCore._contains(w,new wijmo_1.Point(A,T)))(L=new _CircleArea(new wijmo_1.Point(A,T),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,S,M,P),this.hitTester.add(L,l)}}else{j=i.convert(C),A=i.convert(M);if(isNaN(T)||isNaN(j))v=!0,!0!==x&&(g.push(void 0),m.push(void 0),y.push(void 0));else{var L;if(g.push(T),m.push(j),y.push(A),FlexChartCore._contains(w,new wijmo_1.Point(T,j)))(L=new _CircleArea(new wijmo_1.Point(T,j),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,S,P,C),this.hitTester.add(L,l);if(FlexChartCore._contains(w,new wijmo_1.Point(T,A)))(L=new _CircleArea(new wijmo_1.Point(T,A),this._DEFAULT_SYM_SIZE)).tag=new _DataPoint(l,S,P,M),this.hitTester.add(L,l)}}}else v=!0,!0!==x&&(g.push(void 0),m.push(void 0),y.push(void 0))}a&&g.forEach(function(t,e){null!=t&&h.push(new wijmo_1.Point(t,m[e]))});var N=this._DEFAULT_WIDTH,I=r._getColorLight(l),k=r._getColor(l),E=_BasePlotter.cloneStyle(n.style,["fill"]),D=_BasePlotter.cloneStyle(n.style,["stroke"]);if(!0!==x&&v){var R=[],O=[],F=[];for(S=0;S<d;S++)if(void 0===g[S]){if(R.length>1){var V=b?F.slice(0).reverse():R.slice(0).reverse(),B=b?O.slice(0).reverse():F.slice(0).reverse();this._drawRangedArea(t,R,O,V,B,I,k,N,D,E),this.hitTester.add(new _LinesArea(R,O),l),this.hitTester.add(new _LinesArea(V,B),l)}R=[],O=[],F=[]}else R.push(g[S]),O.push(m[S]),F.push(y[S]);if(R.length>1){V=b?F.slice(0).reverse():R.slice(0).reverse(),B=b?O.slice(0).reverse():F.slice(0).reverse();this._drawRangedArea(t,R,O,V,B,I,k,N,D,E),this.hitTester.add(new _LinesArea(R,O),l),this.hitTester.add(new _LinesArea(V,B),l)}}else{var X=b?y.slice(0).reverse():g.slice(0).reverse(),Y=b?m.slice(0).reverse():y.slice(0).reverse();this._drawRangedArea(t,g,m,X,Y,I,k,N,D,E),this.hitTester.add(new _LinesArea(g,m),l),this.hitTester.add(new _LinesArea(X,Y),l)}this._drawSymbols(t,n,l),a&&h&&h.length&&a(h)}}},e.prototype._drawRangedArea=function(t,e,i,n,r,s,o,a,h,l){if(this.isSpline){var _=this._convertToSpline(e,i),u=this._convertToSpline(n,r);e=_.xs,i=_.ys,n=u.xs,r=u.ys}e=e.concat(n),i=i.concat(r),t.fill=s,t.stroke="none",t.drawPolygon(e,i,null,h),e=e.slice(0,e.length-n.length),i=i.slice(0,i.length-r.length),t.stroke=o,t.strokeWidth=a,t.fill="none",t.drawLines(e,i,null,l),t.drawLines(n,r,null,l)},e.prototype._convertToSpline=function(t,e){if(t&&e){var i=new _Spline(t,e).calculate();return{xs:i.xs,ys:i.ys}}return{xs:t,ys:e}},e.prototype._drawSymbols=function(t,e,i){var n=this.getItemFormatter(e);if(null!=n)for(var r=this.hitTester._map[i],s=0;s<r.length;s++){var o=wijmo_1.tryCast(r[s],_CircleArea);if(o){var a=o.tag;t.startGroup();var h=new HitTestInfo(this.chart,o.center,ChartElement.SeriesSymbol);h._setDataPoint(a),n(t,h,function(){}),t.endGroup()}}},e}(_BasePlotter);exports._AreaPlotter=_AreaPlotter;var _BarPlotter=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.origin=0,e.width=.7,e.isVolume=!1,e._volHelper=null,e.stackPosMap={},e.stackNegMap={},e.stacking=Stacking.None,e}return __extends(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNegMap[this.chart.axisY._uniqueId]={},this.stackPosMap[this.chart.axisY._uniqueId]={},this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,i,n,r,s,o,a,h,l=null,_=null;for(o=0;o<this.chart.series.length;o++){if(s=(e=this.chart.series[o]).getDataType(1)||e.chart._xDataType,i=e._getAxisX(),(n=null===(n=e._getChartType())||wijmo_1.isUndefined(n)?this.chart._getChartType():n)===ChartType.Column){var u=this.chart?this.chart._bindingSeparator:",",c=e.binding.split(u).length-1;r=e._getBindingValues(c)}else r=n===ChartType.Candlestick?e._getBindingValues(4):null;var p;if(s===wijmo_1.DataType.Date)for(a=[],h=[],o=0;o<e._getLength();o++)p=e._getItem(o)[e.bindingX].valueOf(),a.push(p),h.push({value:p,text:wijmo_1.Globalize.format(new Date(p),i.format||"d")});else a=this.dataInfo.getXVals();if(l=this.dataInfo.getMinX(),_=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new _VolumeHelper(r,a,l,_,s),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),h&&h.length>0&&(this._itemsSource=i.itemsSource=h);break}}}},e.prototype.unload=function(){var e;t.prototype.unload.call(this);for(var i=0;i<this.chart.series.length;i++)(e=this.chart.series[i]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),s=t.getMaxY(),o=t.getDeltaX();o<=0&&(o=1),!this.isVolume||this.chart._getChartType()!==ChartType.Column&&this.chart._getChartType()!==ChartType.Candlestick?this.unload():this.load();for(var a=0;a<this.chart.series.length;a++){var h=this.chart.series[a],l=h._getChartType();if((l=null===l||wijmo_1.isUndefined(l)?this.chart._getChartType():l)===ChartType.Column||l===ChartType.Bar)if(this._isRange(h))h._getBindingValues(1).forEach(function(t){t<r?r=t:t>s&&(s=t)})}return this.rotated?(this.chart.axisY._getLogBase()||t.getDataTypeY()===wijmo_1.DataType.Date||(this.origin>s?s=this.origin:this.origin<r&&(r=this.origin)),new wijmo_1.Rect(r,i-.5*o,s-r,n-i+o)):(this.chart.axisY._getLogBase()||t.getDataTypeY()===wijmo_1.DataType.Date||(this.origin>s?s=this.origin:this.origin<r&&(r=this.origin)),new wijmo_1.Rect(i-.5*o,r,n-i+o,s-r))},e.prototype._isRange=function(t){var e=this.chart?this.chart._bindingSeparator:",",i=(null==t.binding?"":t.binding.split(e)).length-1;return this.isVolume?2===i:1===i},e.prototype.plotSeries=function(t,e,i,n,r,s,o,a){var h=[],l=this.chart.series.indexOf(n),_=wijmo_1.asType(n,SeriesBase),u=this.chart._options,c=this.width,p=0;if(s=s||0,o=o||1,u&&u.groupWidth){var d=u.groupWidth;if(wijmo_1.isNumber(d)){var f=wijmo_1.asNumber(d);isFinite(f)&&f>0&&(p=f,c=1)}else if(wijmo_1.isString(d)){var g=wijmo_1.asString(d);if(g&&g.indexOf("%")>=0){g=g.replace("%","");f=parseFloat(g);isFinite(f)&&(f<0?f=0:f>100&&(f=100),p=0,c=f/100)}else{f=parseFloat(g);isFinite(f)&&f>0&&(p=f,c=1)}}}var m=c/o,y=_._getAxisY()._uniqueId,b=this.stackNegMap[y],v=this.stackPosMap[y],x=n.getValues(0),w=n.getValues(1),S=this._isRange(_),P=_._bindValues(null==_._cv?null==this.chart.collectionView?null:this.chart.collectionView.items:_._cv.items,_._getBinding(1)).values;if(x){if(w||(w=this.dataInfo.getXVals()),w){var C=this.dataInfo.getDeltaX();C>0&&(c*=C,m*=C)}var M=_._getSymbolFill(l),T=_._getAltSymbolFill(l)||M,j=_._getSymbolStroke(l),A=_._getAltSymbolStroke(l)||j,L=x.length;null!=w&&(L=Math.min(L,w.length));var N,I,k=this.origin,E=0,D=this.stacking!=Stacking.None,R=this.stacking==Stacking.Stacked100pc;void 0!==_._getChartType()&&(D=R=!1);var O=this.getItemFormatter(n);if(this.rotated){k<e.actualMin?k=e.actualMin:k>e.actualMax&&(k=e.actualMax),_._isCustomAxisY()&&(D=R=!1);Y=e.convert(k);var F=i.actualMin,V=i.actualMax;for(H=0;H<L;H++){q=w?w[H]:H,K=x[H],W=Y;if(this._getSymbolOrigin&&(W=i.convert(this._getSymbolOrigin(k,H))),S&&P&&P.length){Z=P[H];_DataInfo.isValid(Z)&&(W=e.convert(Z))}if(this._getSymbolStyles)M=(U=this._getSymbolStyles(H))&&U.fill?U.fill:M,T=U&&U.fill?U.fill:T,j=U&&U.stroke?U.fill:j,A=U&&U.stroke?U.fill:A;if(N=K>0?M:T,I=K>0?j:A,t.fill=N,t.stroke=I,_DataInfo.isValid(q)&&_DataInfo.isValid(K))if(D){$=q+.5*c;if((J=q-.5*c)<F&&$<F||J>V&&$>V)continue;if(J=i.convert(Math.max(J,F)),$=i.convert(Math.min($,V)),R)K/=this.dataInfo.getStackedAbsSum(q);tt=0;K>0?(tt=isNaN(v[q])?0:v[q],rt=e.convert(tt),Q=e.convert(tt+K),v[q]=tt+K):(tt=isNaN(b[q])?0:b[q],rt=e.convert(tt),Q=e.convert(tt+K),b[q]=tt+K),a&&h.push(new wijmo_1.Point(Q,i.convert(q)));et=new wijmo_1.Rect(Math.min(rt,Q),Math.min(J,$),Math.abs(Q-rt),Math.abs($-J));if(p>0){(at=1-p/et.height)<0&&(at=0);var B=et.top+.5*et.height;et.top+=(B-et.top)*at,et.height=Math.min(p,et.height)}nt=new _RectArea(et);this.drawSymbol(t,et,n,H,new wijmo_1.Point(Q,et.top+.5*et.height),O),n._setPointIndex(H,E),E++,nt.tag=new _DataPoint(l,H,tt+K,q),this.hitTester.add(nt,l)}else{$=q-.5*c+(s+1)*m;if((J=q-.5*c+s*m)<F&&$<F||J>V&&$>V)continue;J=i.convert(Math.max(J,F)),$=i.convert(Math.min($,V));var X=e.convert(K);et=new wijmo_1.Rect(Math.min(X,W),Math.min(J,$),Math.abs(W-X),Math.abs($-J));if(a&&h.push(new wijmo_1.Point(X,(J+$)/2)),p>0){(at=1-(ot=p/o)/et.height)<0&&(at=0);B=i.convert(q);et.top+=(B-et.top)*at,et.height=Math.min(ot,et.height)}nt=new _RectArea(et);this.drawSymbol(t,et,n,H,new wijmo_1.Point(X,et.top+.5*et.height),O),n._setPointIndex(H,E),E++,nt.tag=new _DataPoint(l,H,K,q),this.hitTester.add(nt,l)}}}else{k<i.actualMin?k=i.actualMin:k>i.actualMax&&(k=i.actualMax);var Y=i.convert(k),z=e.actualMin,G=e.actualMax;_._isCustomAxisY()&&(D=R=!1);for(var H=0;H<L;H++){var U,W=Y,q=w?w[H]:H,K=x[H];if(this._getSymbolOrigin&&(W=i.convert(this._getSymbolOrigin(k,H,L))),S&&P&&P.length){var Z=P[H];_DataInfo.isValid(Z)&&(W=i.convert(Z))}if(this._getSymbolStyles)M=(U=this._getSymbolStyles(H,L))&&U.fill?U.fill:M,T=U&&U.fill?U.fill:T,j=U&&U.stroke?U.stroke:j,A=U&&U.stroke?U.stroke:A;if(N=K>0?M:T,I=K>0?j:A,t.fill=N,t.stroke=I,_DataInfo.isValid(q)&&_DataInfo.isValid(K))if(D){var J,$,Q=q+.5*c;if((rt=q-.5*c)<z&&Q<z||rt>G&&Q>G)continue;if(rt=e.convert(rt),Q=e.convert(Q),!_DataInfo.isValid(rt)||!_DataInfo.isValid(Q))continue;if(R)K/=this.dataInfo.getStackedAbsSum(q);var tt=0;K>0?(tt=isNaN(v[q])?0:v[q],J=i.convert(Math.max(tt,i.actualMin)),$=i.convert(Math.max(tt+K,i.actualMin)),v[q]=tt+K):(tt=isNaN(b[q])?0:b[q],J=i.convert(tt),$=i.convert(tt+K),b[q]=tt+K),a&&h.push(new wijmo_1.Point(e.convert(q),$));var et=new wijmo_1.Rect(Math.min(rt,Q),Math.min(J,$),Math.abs(Q-rt),Math.abs($-J));if(p>0){(at=1-p/et.width)<0&&(at=0);var it=et.left+.5*et.width;et.left+=(it-et.left)*at,et.width=Math.min(p,et.width)}var nt=new _RectArea(et);this.drawSymbol(t,et,n,H,new wijmo_1.Point(et.left+.5*et.width,$),O),n._setPointIndex(H,E),E++,nt.tag=new _DataPoint(l,H,q,tt+K),this.hitTester.add(nt,l)}else{var rt,Q=q-.5*c+(s+1)*m;if((rt=q-.5*c+s*m)<z&&Q<z||rt>G&&Q>G)continue;if(rt=e.convert(rt),Q=e.convert(Q),!_DataInfo.isValid(rt)||!_DataInfo.isValid(Q))continue;var st=i.convert(K),et=new wijmo_1.Rect(Math.min(rt,Q),Math.min(st,W),Math.abs(Q-rt),Math.abs(W-st));if(a&&h.push(new wijmo_1.Point((rt+Q)/2,st)),p>0){var ot,at;(at=1-(ot=p/o)/et.width)<0&&(at=0);it=e.convert(q);et.left+=(it-et.left)*at,et.width=Math.min(ot,et.width)}var nt=new _RectArea(et);this.drawSymbol(t,et,n,H,new wijmo_1.Point(et.left+.5*et.width,st),O),n._setPointIndex(H,E),E++,nt.tag=new _DataPoint(l,H,q,K),this.hitTester.add(nt,l)}}}a&&h&&h.length&&a(h)}},e.prototype.drawSymbol=function(t,e,i,n,r,s){var o=this;if(s){t.startGroup();var a=new HitTestInfo(this.chart,r,ChartElement.SeriesSymbol);a._setData(i,n),s(t,a,function(){o.drawDefaultSymbol(t,e,i)}),t.endGroup()}else this.drawDefaultSymbol(t,e,i)},e.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)},e}(_BasePlotter);exports._BarPlotter=_BarPlotter;var _FunnelPlotter=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stacking=Stacking.None,e}return __extends(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();return new wijmo_1.Rect(i,n,r-i,s-n)},e.prototype.plotSeries=function(t,e,i,n,r,s,o,a){var h=this.chart.series.indexOf(n);if(!(h>0)){var l,_,u,c,p,d=wijmo_1.asType(n,SeriesBase),f=this.chart._options,g=n.getValues(0),m=n.getValues(1),y=this.chart._plotRect,b=f&&f.funnel&&null!=f.funnel.neckWidth?f.funnel.neckWidth:.2,v=f&&f.funnel&&null!=f.funnel.neckHeight?f.funnel.neckHeight:0,x=b*y.width,w=0,S=0,P=0,C=0,M=y.left,T=y.top,j=y.width,A=y.height;if(g){this.rotated&&(T+=y.height),x=x||1,m||(m=this.dataInfo.getXVals());var L=g.length;for(null!=m&&(L=Math.min(L,m.length)),w=0;w<L;w++)S+=g[w];var N,I,k,E=0;if(f&&f.funnel&&"rectangle"===f.funnel.type)for(v=A/L,b=j,w=0;w<L;w++){var D=m?m[w]:w,R=g[w],O=d._getSymbolFill(w),F=d._getAltSymbolFill(w)||O,V=d._getSymbolStroke(w),B=d._getAltSymbolStroke(w)||V;if(this._getSymbolStyles)O=(z=this._getSymbolStyles(w,L))&&z.fill?z.fill:O,F=z&&z.fill?z.fill:F,V=z&&z.stroke?z.stroke:V,B=z&&z.stroke?z.stroke:B;if(N=R>0?O:F,I=R>0?V:B,t.fill=N,t.stroke=I,_DataInfo.isValid(D)&&_DataInfo.isValid(R)){k||(k=j/R);var X=k*R;M+=(b-X)/2,this.rotated&&(T-=v),t.drawRect(M,T,X,v),Y=new _FunnelSegment(new wijmo_1.Point(M,T),X,v,X,v),this.rotated||(T+=v),b=X,Y.tag=new _DataPoint(h,w,D,R),this.hitTester.add(Y,h),n._setPointIndex(w,E),E++}}else for(P=y.left+y.width*(1-b)/2,C=y.top+y.height*(this.rotated?v:1-v),_=(1-b)*y.width/2/(y.height*(1-v)),!isNaN(_)&&isFinite(_)||(j=x,M=P,T=C),l=y.width*b*y.height+y.width*(1-b)/2*y.height*(1-v),w=0;w<L;w++){D=m?m[w]:w,R=g[w];var Y,z,G=[],H=[];O=d._getSymbolFill(w),F=d._getAltSymbolFill(w)||O,V=d._getSymbolStroke(w),B=d._getAltSymbolStroke(w)||V;if(this._getSymbolStyles)O=(z=this._getSymbolStyles(w,L))&&z.fill?z.fill:O,F=z&&z.fill?z.fill:F,V=z&&z.stroke?z.stroke:V,B=z&&z.stroke?z.stroke:B;if(N=R>0?O:F,I=R>0?V:B,t.fill=N,t.stroke=I,_DataInfo.isValid(D)&&_DataInfo.isValid(R)){var U=l*R/S;j>x?(c=this._getTrapezoidOffsetY(j,U,_),this.rotated?T-c>C?(G=[M,M+(u=_*c),M+j-u,M+j],H=[T,T-c,T-c,T],Y=new _FunnelSegment(new wijmo_1.Point(M,T-c),j,c,j-2*u,0,!0),j-=2*u,M+=u,T-=c):(u=_*(c=T-C),p=(U-=this._getTrapezoidArea(j,_,c))/x,G.push(M,M+u,M+u,M+u+x,M+u+x,M+j),H.push(T,T-c,T-c-p,T-c-p,T-c,T),Y=new _FunnelSegment(new wijmo_1.Point(M,T-c-p),j,c+p,x,p,!0),j=x,M+=u,T=T-c-p):T+c<C?(G=[M,M+(u=_*c),M+j-u,M+j],H=[T,T+c,T+c,T],Y=new _FunnelSegment(new wijmo_1.Point(M,T),j,c,j-2*u,0),j-=2*u,M+=u,T+=c):(u=_*(c=C-T),p=(U-=this._getTrapezoidArea(j,_,c))/x,G.push(M,M+u,M+u,M+u+x,M+u+x,M+j),H.push(T,T+c,T+c+p,T+c+p,T+c,T),Y=new _FunnelSegment(new wijmo_1.Point(M,T),j,c+p,x,p),j=x,M+=u,T=T+c+p),t.drawPolygon(G,H)):(p=U/x,this.rotated&&(T-=p),t.drawRect(M,T,j,p),Y=new _FunnelSegment(new wijmo_1.Point(M,T),x,p,x,p),this.rotated||(T+=p)),Y.tag=new _DataPoint(h,w,D,R),this.hitTester.add(Y,h),n._setPointIndex(w,E),E++}}}}},e.prototype._getTrapezoidArea=function(t,e,i){var n=i*e;return n*i+(t-2*n)*i},e.prototype._getTrapezoidOffsetY=function(t,e,i){var n=Math.pow(t/2/i,2)-e/i;return t/2/i-Math.sqrt(n>=0?n:0)},e.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)},e.prototype._getPointAndPosition=function(t,e,i,n){var r=i;t.x=r.center.x,t.y=r.center.y,e=null==e?LabelPosition.Center:e},e}(_BasePlotter);exports._FunnelPlotter=_FunnelPlotter;var _FunnelSegment=function(){function t(t,e,i,n,r,s){void 0===s&&(s=!1),this._startPoint=t,this._width=e,this._height=i,this._neckWidth=n,this._neckHeight=r,this._center=new wijmo_1.Point(this._startPoint.x+e/2,this._startPoint.y+i/2),this._offsetX=(e-n)/2,this._offsetY=i-r,this._rotated=s}return t.prototype.contains=function(t){var e=this._startPoint,i=this._offsetX,n=this._offsetY;if(this._rotated){if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y<e.y+this._neckHeight)return!1;if(t.x<this._center.x)return(e.y+this._height-t.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(e.y+this._height-t.y)/(e.x+this._width-t.x)<n/i}}else if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y>e.y+n)return!1;if(t.x<this._center.x)return(t.y-e.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(t.y-e.y)/(e.x+this._width-t.x)<n/i}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=this._startPoint,i=this._width,n=this._height,r=this._offsetX,s=this._offsetY;if(this._rotated){if(t.y>e.y+n)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y+n-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y+n-t.y,2)):t.y-e.y-n;if(t.y<e.y)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):e.y-t.y;if(!(t.y<e.y+n-s))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y-n,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-n+s/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-n+s-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-n-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-n+s/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-n+s-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}else{if(t.y<e.y)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y-t.y,2)):e.y-t.y;if(t.y>e.y+n)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):t.y-e.y-n;if(!(t.y>e.y+s))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-s/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-s-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-s/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-s-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t}();exports._FunnelSegment=_FunnelSegment;var _FinancePlotter=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCandle=!0,e.isArms=!1,e.isEqui=!1,e.isVolume=!1,e._volHelper=null,e._symWidth=.7,e}return __extends(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,i,n,r,s,o,a,h,l=null,_=null;for(o=0;o<this.chart.series.length;o++){var u;if(s=(e=this.chart.series[o]).getDataType(1)||e.chart._xDataType,i=e._getAxisX(),r=(n=null===(n=e._getChartType())||wijmo_1.isUndefined(n)?this.chart._getChartType():n)===ChartType.Column?e._getBindingValues(1):n===ChartType.Candlestick?e._getBindingValues(4):null,s===wijmo_1.DataType.Date)for(a=[],h=[],o=0;o<e._getLength();o++)u=e._getItem(o)[e.bindingX].valueOf(),a.push(u),h.push({value:u,text:wijmo_1.Globalize.format(new Date(u),i.format||"d")});else a=this.dataInfo.getXVals();if(l=this.dataInfo.getMinX(),_=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new _VolumeHelper(r,a,l,_,s),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),h&&h.length>0&&(this._itemsSource=i.itemsSource=h);break}}}},e.prototype.unload=function(){var e;t.prototype.unload.call(this);for(var i=0;i<this.chart.series.length;i++)(e=this.chart.series[i]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.parseSymbolWidth=function(t){if(this._isPixel=void 0,t)if(wijmo_1.isNumber(t)){var e=wijmo_1.asNumber(t);isFinite(e)&&e>0&&(this._symWidth=e,this._isPixel=!0)}else if(wijmo_1.isString(t)){var i=wijmo_1.asString(t);if(i&&i.indexOf("%")>=0){i=i.replace("%","");var n=parseFloat(i);isFinite(n)&&(n<0?n=0:n>100&&(n=100),this._symWidth=n/100,this._isPixel=!1)}else{n=parseFloat(t);isFinite(n)&&n>0&&(this._symWidth=n,this._isPixel=!0)}}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY(),o=t.getDeltaX(),a=this.chart._xDataType;o<=0&&(o=1);var h=this.chart.series,l=h.length,_=0;this.parseSymbolWidth(this.symbolWidth),!this.isVolume||this.chart._getChartType()!==ChartType.Column&&this.chart._getChartType()!==ChartType.Candlestick?this.unload():this.load();for(var u=0;u<l;u++){var c=h[u];if(!c._isCustomAxisY()){var p=c._getBinding(1),d=c._getBinding(2),f=c._getBinding(3),g=c._getLength();if(g){var m=c._getSymbolSize();m>_&&(_=m);for(var y=0;y<g;y++){var b=c._getItem(y);if(b)[p?b[p]:null,d?b[d]:null,f?b[f]:null].forEach(function(t){_DataInfo.isValid(t)&&null!==t&&((isNaN(n)||t<n)&&(n=t),(isNaN(s)||t>s)&&(s=t))})}}}}var v=r-i,x=this.chart._plotRect;if(x&&x.width&&!this.isVolume){isNaN(m)&&(m=c._getSymbolSize()),m+=2;var w=x.width/(x.width-m)*v;i-=.5*(w-v),v=w}return!(a===wijmo_1.DataType.Date&&this.isVolume||a===wijmo_1.DataType.Number)||this.chart._getChartType()!==ChartType.Column&&this.chart._getChartType()!==ChartType.Candlestick?this.chart._isRotated()?new wijmo_1.Rect(n,i,s-n,v):new wijmo_1.Rect(i,n,v,s-n):new wijmo_1.Rect(i-.5*o,n,r-i+o,s-n)},e.prototype.plotSeries=function(t,e,i,n,r,s,o,a){var h=this,l=wijmo_1.asType(n,SeriesBase),_=this.chart.series.indexOf(n),u=n.getValues(0),c=n.getValues(1),p=this._symWidth,d=this.chart._isRotated();if(u){if(c||(c=this.dataInfo.getXVals()),c){var f=this.dataInfo.getDeltaX();f>0&&!1===this._isPixel&&(p*=f)}var g=u.length,m=!0;c?g=Math.min(g,c.length):(m=!1,c=new Array(g));var y=this._DEFAULT_WIDTH,b=l._getSymbolFill(_),v=l._getAltSymbolFill(_)||"transparent",x=l._getSymbolStroke(_),w=l._getAltSymbolStroke(_)||x,S=void 0===this._isPixel?l._getSymbolSize():p;t.stroke=x,t.strokeWidth=y,t.fill=b;for(var P,C,M=l._getBinding(1),T=l._getBinding(2),j=l._getBinding(3),A=d?i.actualMin:e.actualMin,L=d?i.actualMax:e.actualMax,N=0,I=null,k=null,E=this.getItemFormatter(n),D=0;D<g;D++)if(I=l._getItem(D)){var R=m?c[D]:D;if(_DataInfo.isValid(R)&&A<=R&&R<=L){var O=u[D],F=M?I[M]:null,V=T?I[T]:null,B=j?I[j]:null;if(t.startGroup(),this.isEqui&&null!==k?k[j]!==I[j]&&(P=k[j]<I[j]?v:b,C=k[j]<I[j]?w:x):(P=V<B?v:b,C=V<B?w:x),t.fill=P,t.stroke=C,E){var X=new HitTestInfo(this.chart,new wijmo_1.Point(e.convert(R),i.convert(O)),ChartElement.SeriesSymbol);X._setData(l,D),E(t,X,function(){h._drawSymbol(t,e,i,_,D,P,S,R,O,F,V,B)})}else this._drawSymbol(t,e,i,_,D,P,S,R,O,F,V,B);t.endGroup(),n._setPointIndex(D,N),N++}k=I}}},e.prototype._drawSymbol=function(t,e,i,n,r,s,o,a,h,l,_,u){var c,p=new _DataPoint(n,r,a,h),d=null,f=null,g=null,m=null,y=this.chart._isRotated();if(y){var b=i;i=e,e=b}if(!1===this._isPixel&&(g=e.convert(a-.5*o))>(m=e.convert(a+.5*o))){var v=g;g=m,m=v}a=e.convert(a),!1!==this._isPixel&&(g=a-.5*o,m=a+.5*o),this.isCandle?(_DataInfo.isValid(_)&&_DataInfo.isValid(u)&&(_=i.convert(_),u=i.convert(u),f=(d=Math.min(_,u))+Math.abs(_-u),y?(t.drawRect(d,g,f-d||1,m-g||1),c=new _RectArea(new wijmo_1.Rect(d,g,f-d||1,m-g||1))):(t.drawRect(g,d,m-g||1,f-d||1),c=new _RectArea(new wijmo_1.Rect(g,d,m-g||1,f-d||1))),c.tag=p,this.hitTester.add(c,n)),_DataInfo.isValid(h)&&(h=i.convert(h),null!==d&&(y?(t.drawLine(f,a,h,a),c.rect.width=c.rect.width+h):(t.drawLine(a,d,a,h),c.rect.top=h,c.rect.height=c.rect.height+h))),_DataInfo.isValid(l)&&(l=i.convert(l),null!==f&&(y?(t.drawLine(d,a,l,a),c.rect.left=l,c.rect.width=c.rect.width+l):(t.drawLine(a,f,a,l),c.rect.height=c.rect.height+l)))):this.isEqui?_DataInfo.isValid(h)&&_DataInfo.isValid(l)&&(h=i.convert(h),l=i.convert(l),f=(d=Math.min(h,l))+Math.abs(h-l),t.drawRect(g,d,m-g||1,f-d||1),(c=new _RectArea(new wijmo_1.Rect(g,d,m-g||1,f-d||1))).tag=p,this.hitTester.add(c,n)):this.isArms?(_DataInfo.isValid(_)&&_DataInfo.isValid(u)&&(_=i.convert(_),u=i.convert(u),f=(d=Math.min(_,u))+Math.abs(_-u),t.drawRect(g,d,m-g||1,f-d||1)),_DataInfo.isValid(h)&&null!==d&&(h=i.convert(h),t.drawLine(a,d,a,h)),_DataInfo.isValid(l)&&null!==f&&(l=i.convert(l),t.drawLine(a,f,a,l)),_DataInfo.isValid(h)&&_DataInfo.isValid(l)&&(t.fill="transparent",f=(d=Math.min(h,l))+Math.abs(h-l),t.drawRect(g,d,m-g||1,f-d||1),(c=new _RectArea(new wijmo_1.Rect(g,d,m-g||1,f-d||1))).tag=p,this.hitTester.add(c,n))):(_DataInfo.isValid(h)&&_DataInfo.isValid(l)&&(h=i.convert(h),l=i.convert(l),f=(d=Math.min(h,l))+Math.abs(h-l),y?(t.drawLine(l,a,h,a),c=new _RectArea(new wijmo_1.Rect(d,g,f-d||1,m-g||1))):(t.drawLine(a,l,a,h),c=new _RectArea(new wijmo_1.Rect(g,d,m-g||1,f-d||1))),c.tag=p,this.hitTester.add(c,n)),_DataInfo.isValid(_)&&(_=i.convert(_),y?t.drawLine(_,g,_,a):t.drawLine(g,_,a,_)),_DataInfo.isValid(u)&&(u=i.convert(u),y?t.drawLine(u,a,u,m):t.drawLine(a,u,m,u)))},e}(_BasePlotter);exports._FinancePlotter=_FinancePlotter;var _LinePlotter=function(t){function e(){var e=t.call(this)||this;return e.hasSymbols=!1,e.hasLines=!0,e.isSpline=!1,e.stacking=Stacking.None,e.stackPos={},e.stackNeg={},e.clipping=!1,e}return __extends(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();if(this.isSpline&&!this.chart.axisY._getLogBase()){var o=.1*(s-n);n-=o,s+=o}return this.rotated?new wijmo_1.Rect(n,i,s-n,r-i):new wijmo_1.Rect(i,n,r-i,s-n)},e.prototype.plotSeries=function(t,e,i,n,r,s,o,a){var h=[],l=wijmo_1.asType(n,SeriesBase),_=this.chart.series.indexOf(n),u=n.getValues(0),c=n.getValues(1);if(u){c||(c=this.dataInfo.getXVals());var p=_BasePlotter.cloneStyle(n.style,["fill"]),d=u.length,f=!0;c?d=Math.min(d,c.length):(f=!1,c=new Array(d));var g=this._DEFAULT_WIDTH,m=l._getSymbolFill(_),y=l._getAltSymbolFill(_)||m,b=l._getSymbolStroke(_),v=l._getAltSymbolStroke(_)||b,x=l._getSymbolSize();t.stroke=b,t.strokeWidth=g,t.fill=m;var w=new Array,S=new Array,P=new Array,C=this.rotated,M=this.stacking!=Stacking.None&&!l._isCustomAxisY(),T=this.stacking==Stacking.Stacked100pc&&!l._isCustomAxisY();void 0!==l._getChartType()&&(M=T=!1);for(var j=l.interpolateNulls,A=!1,L=this.getItemFormatter(n),N=0;N<d;N++){var I=f?c[N]:N,k=u[N];if(_DataInfo.isValid(I)&&_DataInfo.isValid(k)){if(M){if(T)k/=this.dataInfo.getStackedAbsSum(I);if(k>=0){var E=isNaN(this.stackPos[I])?0:this.stackPos[I];k=this.stackPos[I]=E+k}else{E=isNaN(this.stackNeg[I])?0:this.stackNeg[I];k=this.stackNeg[I]=E+k}}var D;if(C){D=new _DataPoint(_,N,k,I);var R=e.convert(k);k=i.convert(I),I=R}else D=new _DataPoint(_,N,I,k),I=e.convert(I),k=i.convert(k);if(isNaN(I)||isNaN(k))A=!0,!0!==j&&(w.push(void 0),S.push(void 0)),P.push(!0);else{w.push(I),S.push(k),P.push(!1),a&&h.push(new wijmo_1.Point(I,k));var O=new _CircleArea(new wijmo_1.Point(I,k),.5*x);O.tag=D,this.hitTester.add(O,_)}}else A=!0,!0!==j&&(w.push(void 0),S.push(void 0)),P.push(!0)}var F=0;if(this.hasLines)if(t.fill=null,A&&!0!==j){var V=[],B=[];for(N=0;N<d;N++)void 0===w[N]?(V.length>1&&(this._drawLines(t,V,B,null,p,this.chart._plotrectId),this.hitTester.add(new _LinesArea(V,B),_),F++),V=[],B=[]):(V.push(w[N]),B.push(S[N]));V.length>1&&(this._drawLines(t,V,B,null,p,this.chart._plotrectId),this.hitTester.add(new _LinesArea(V,B),_),F++)}else this._drawLines(t,w,S,null,p,this.chart._plotrectId),this.hitTester.add(new _LinesArea(w,S),_),F++;if((this.hasSymbols||L)&&x>0){t.fill=m;var X=0;for(N=0;N<d;N++)if(!j||!P[N]){I=w[X],k=S[X];(!1===this.hasLines||L)&&(t.fill=u[N]>0?m:y,t.stroke=u[N]>0?b:v),this.isValid(I,k,e,i)&&(this._drawSymbol(t,I,k,x,l,N,L),n._setPointIndex(N,F),F++),X++}}a&&h&&h.length&&a(h)}},e.prototype._drawLines=function(t,e,i,n,r,s){this.isSpline?t.drawSplines(e,i,n,r,s):t.drawLines(e,i,n,r,s)},e.prototype._drawSymbol=function(t,e,i,n,r,s,o){var a=this;if(o){t.startGroup();var h=new HitTestInfo(this.chart,new wijmo_1.Point(e,i),ChartElement.SeriesSymbol);h._setData(r,s),o(t,h,function(){a.hasSymbols&&a._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)}),t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)},e.prototype._drawDefaultSymbol=function(t,e,i,n,r,s){r==Marker.Dot?t.drawEllipse(e,i,.5*n,.5*n,null,s):r==Marker.Box&&t.drawRect(e-.5*n,i-.5*n,n,n,null,s)},e}(_BasePlotter);exports._LinePlotter=_LinePlotter;var _BubblePlotter=function(t){function e(){var e=t.call(this)||this;return e._MIN_SIZE=5,e._MAX_SIZE=30,e.hasLines=!1,e.hasSymbols=!0,e.clipping=!0,e}return __extends(e,t),e.prototype.adjustLimits=function(e,i){var n=this.getNumOption("minSize","bubble");this._minSize=n||this._MIN_SIZE;var r=this.getNumOption("maxSize","bubble");this._maxSize=r||this._MAX_SIZE;for(var s=this.chart.series,o=s.length,a=NaN,h=NaN,l=0;l<o;l++){var _=s[l];if(_._getChartType()==ChartType.Bubble||null==_._getChartType()&&_._chart._getChartType()==ChartType.Bubble){var u=_._getBindingValues(1);if(u)for(var c=u.length,p=0;p<c;p++)_DataInfo.isValid(u[p])&&((isNaN(a)||u[p]<a)&&(a=u[p]),(isNaN(h)||u[p]>h)&&(h=u[p]))}}this._minValue=a,this._maxValue=h;var d=t.prototype.adjustLimits.call(this,e,i),f=this.chart.axisX,g=this.chart.axisY;if(!f._isLogAxis()){var m=(i.width-this._maxSize)/d.width;d.left-=.5*this._maxSize/m,d.width+=this._maxSize/m}if(!g._isLogAxis()){var y=(i.height-this._maxSize)/d.height;d.top-=.5*this._maxSize/y,d.height+=this._maxSize/y}return d},e.prototype._drawSymbol=function(t,e,i,n,r,s,o){var a=this;if(null==this._minSize){var h=this.getNumOption("minSize","bubble");this._minSize=h||this._MIN_SIZE}if(null==this._maxSize){var l=this.getNumOption("maxSize","bubble");this._maxSize=l||this._MAX_SIZE}var _=r._getItem(s);if(_){var u=r._getBinding(1);if(u){n=_[u];if(_DataInfo.isValid(n)){null==n&&(n=this._minValue);var c=this._minValue==this._maxValue?1:Math.sqrt((n-this._minValue)/(this._maxValue-this._minValue));if(n=this._minSize+(this._maxSize-this._minSize)*c,o){var p=new HitTestInfo(this.chart,new wijmo_1.Point(e,i),ChartElement.SeriesSymbol);p._setData(r,s),t.startGroup(),o(t,p,function(){a._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)}),t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle);var d=this.hitTester._map[this.chart.series.indexOf(r)];if(null!=d)for(var f=d.length-1;f>=0;f--){var g=d[f];if(g.tag&&g.tag.pointIndex==s){var m=wijmo_1.tryCast(g,_CircleArea);m&&m.setRadius(.5*n)}}}}}},e}(_LinePlotter);exports._BubblePlotter=_BubblePlotter,wijmo_1._registerModule("wijmo.chart",selfModule);