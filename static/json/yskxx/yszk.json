{
    "id": "66601",
    "text": "应收账款分析表",
    "layout": {
        "xtype": "tab"
    },
    "config": {
        // "sql": "SELECT NID, A.DIM_CUSUPPLIERNAME AS SK, FACT_BALANCE AS BALANCE, FACT_A AS ONEYEAR, FACT_B AS TWOYEAR, FACT_C AS THREEYEAR, FACT_D AS FOURYEAR, C.SNAME AS SKXZ,( CASE WHEN ISINSIDE is null then null when ISINSIDE='1' THEN '是' ELSE '否' END) AS SFNB, ( CASE WHEN ISNORMAL is null then null when ISNORMAL='1' THEN '是' ELSE '否' END) AS SFZC, D.SNAME AS FZCFL, E.SNAME AS ZWRZK, FACT_E AS KHSJE, FACT_F AS DNKHSJE, FACT_G AS YQZK, FACT_H AS SZXSSJE FROM ( SELECT NID, DIM_CUSUPPLIER, DIM_COMPANY, DIM_ITEM, FACT_BALANCE, FACT_A, FACT_B, FACT_C, FACT_D, ISNATURE, ISINSIDE, ISNORMAL, SCONTENTA, SCONTENTB, FACT_E, FACT_F, FACT_G, FACT_H,DIM_CUSUPPLIERNAME FROM DW_FACTAGEANALYSIS WHERE DIM_COMPANY=:company AND DIM_PERIOD=:period AND DIM_ITEM='1001' AND ISINSIDE IS NOT NULL) A LEFT JOIN ( SELECT SCODE, SNAME FROM DW_DIMDROPMENU WHERE SPCODE='10') C ON A.ISNATURE=C.SCODE LEFT JOIN ( SELECT SCODE, SNAME FROM DW_DIMDROPMENU WHERE SPCODE='11') D ON A.SCONTENTA=D.SCODE LEFT JOIN ( SELECT SCODE, SNAME FROM DW_DIMDROPMENU WHERE SPCODE='12') E ON A.SCONTENTB=E.SCODE ",
        "sql": " SELECT NID, A.DIM_CUSUPPLIERNAME AS SK, FACT_BALANCE AS BALANCE, FACT_A AS ONEYEAR, FACT_B AS TWOYEAR, FACT_C AS THREEYEAR, FACT_D AS FOURYEAR, C.SNAME AS SKXZ,( CASE WHEN ISINSIDE IS NULL THEN NULL WHEN ISINSIDE='1' THEN '是' ELSE '否' END) AS SFNB, ( CASE WHEN ISNORMAL IS NULL THEN NULL WHEN ISNORMAL='1' THEN '是' ELSE '否' END) AS SFZC, D.SNAME AS FZCFL, E.SNAME AS ZWRZK, FACT_E AS KHSJE, FACT_F AS DNKHSJE, FACT_G AS YQZK, FACT_H AS SZXSSJE FROM ( SELECT NID, DIM_CUSUPPLIER, DIM_COMPANY, DIM_ITEM, FACT_BALANCE, FACT_A, FACT_B, FACT_C, FACT_D, ISNATURE, ISINSIDE, ISNORMAL, SCONTENTA, SCONTENTB, FACT_E, FACT_F, FACT_G, FACT_H, DIM_CUSUPPLIERNAME FROM DW_FACTAGEANALYSIS WHERE DIM_COMPANY=:company AND DIM_PERIOD=:period AND DIM_ITEM='1001' AND ISINSIDE IS NOT NULL AND (FACT_BALANCE<>'0' OR FACT_A<>'0' OR FACT_B<>'0' OR FACT_C<>'0' OR FACT_D<>'0')) A LEFT JOIN ( SELECT SCODE, SNAME FROM DW_DIMDROPMENU WHERE SPCODE='10') C ON A.ISNATURE=C.SCODE LEFT JOIN ( SELECT SCODE, SNAME FROM DW_DIMDROPMENU WHERE SPCODE='11') D ON A.SCONTENTA=D.SCODE LEFT JOIN ( SELECT SCODE, SNAME FROM DW_DIMDROPMENU WHERE SPCODE='12') E ON A.SCONTENTB=E.SCODE ",
        "tableHeads": true,
        "mainDim": "itemperiod",
        "needDims": ["year", "month", "company", "conversion"],
        "random": { "min": 100, "max": 100000 }
    },
    "columns": [
        {
            "id": "sk",
            "type": "string",
            "width": "330",
            "fixed": true,
            "align": "left",
            "text": "客商"
        },
        {
            "id": "balance",
            "type": "decimal",
            "align": "right",
            "width": "120",
            "text": "余额"
        },
        {
            "id": "zq",
            "type": "string",
            "text": "账期",
            "children": [
                {
                    "id": "oneyear",
                    "type": "decimal",
                    "align": "right",
                    "width": "120",
                    "text": "1年以内"
                },
                {
                    "id": "twoyear",
                    "type": "decimal",
                    "align": "right",
                    "width": "120",
                    "text": "1-2年以内"
                },
                {
                    "id": "threeyear",
                    "type": "decimal",
                    "align": "right",
                    "width": "120",
                    "text": "2-3年以内"
                },
                {
                    "id": "fouryear",
                    "type": "decimal",
                    "align": "right",
                    "width": "120",
                    "text": "3年以上"
                }
            ]
        },
        {
            "id": "skxz",
            "type": "string",
            "align": "center",
            "width": "120",
            "text": "客商性质*"
        },
        {
            "id": "sfnb",
            "type": "string",
            "align": "center",
            "width": "120",
            "text": "是否内部*"
        },
        {
            "id": "sfzc",
            "type": "string",
            "align": "center",
            "width": "120",
            "text": "是否正常*"
        },
        {
            "id": "fzcfl",
            "type": "string",
            "width": "160",
            "text": "非正常分类*"
        },
        {
            "id": "zwrzk",
            "type": "string",
            "width": "160",
            "align": "center",
            "text": "债务人情况*"
        },
        {
            "id": "khsje",
            "type": "decimal",
            "width": "130",
            "align": "right",
            "text": "可收回金额*"
        },
        {
            "id": "dnkhsje",
            "type": "decimal",
            "width": "180px",
            "align": "right",
            "text": "其中:当年可收回金额*"
        },
        {
            "id": "yqzk",
            "type": "decimal",
            "width": "120",
            "align": "right",
            "text": "逾期账款"
        },
        {
            "id": "szxssje",
            "type": "decimal",
            "align": "right",
            "width": "180px",
            "text": "已形成实质性损失金额"
        }
    ],
    "rows": [],
    "items": [
        {
            "id": "yszk",
            "text": "应收账款",
            "index": true,
            "isTree": false,
            "name": "1",
            "heights": 100,
            "toolbar": [{
                "id": "1",
                "text": "刷新",
                "xtype": "button",
                "handler": function(data, btn, $this) {
                    $this.closeTab($this);
                }
            }, {
                "id": "2",
                "text": "导出",
                "xtype": "button",
                "handler": function(data, btn, $this) {
                    $this.handleDownload();
                }
            }],
            "queryDataAfter": function(datas, me){
                return datas ;
            },
            "queryDataBefore":function(params, $this){
                return params ;
            }
        }
    ]
}