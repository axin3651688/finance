{
    "id": "0005",
    "text": "应收账款分类汇总",
    "showDims": ["year", "month", "company", "conversion"],
    "changeYearBefore": function(newyear, option) {
        option.closeTabTaget(newyear, option);
    }, //切换年的回调
    "changeMonthBefore": function(newmonth, option) {
        option.closeTabTaget(newmonth, option);
    }, //切换月份的回调
    "changeCompanyBefore": function(newcompany, option) {
        option.closeTabTaget(newcompany, option);
    }, //切换公司之前的回调
    "changeConversionBefore": function(newconversion, option) {
        option.closeTabTaget(newconversion, option);
    },
    "__queryDataAfter": function(data, $vue) { //数据的后置处理
        let me = this;
        if(me.id==="0005"){
            me.items[0].updateView = $vue.updateView;
            me.items[0].$vue = $vue;
            return data;
        }
    },
    "config": {
        // "sql": "WITH TT AS(SELECT DIM_COMPANY, DIM_CUSUPPLIERNAME, ISINSIDE, ISNORMAL, SCONTENTA, SCONTENTB, NVL(SUM(FACT_BALANCE),0) AS YE,(NVL(SUM(FACT_A),0)) AS ONEYEAR, (NVL(SUM(FACT_B),0)) AS TWOYEAR, (NVL(SUM(FACT_C),0)) AS THREEYEAR, (NVL(SUM(FACT_D),0)) AS FOURYEAR, (NVL(SUM(FACT_E),0)) AS WWW1, (NVL(SUM(FACT_F),0)) AS WWW2, (NVL(SUM(FACT_G),0)) AS WWW3, (NVL(SUM(FACT_H),0)) AS WWW4 FROM DW_FACTAGEANALYSIS WHERE DIM_PERIOD=:period AND DIM_COMPANY IN ( SELECT SCODE FROM DW_DIMCOMPANY WHERE ( SCODE =:company OR SPCODE LIKE :company||'%') AND CISDEL='N' AND STYPE IN('1','R')) AND DIM_ITEM='1001' AND ISINSIDE IS NOT NULL GROUP BY DIM_COMPANY, DIM_CUSUPPLIERNAME, ISINSIDE, ISNORMAL, SCONTENTA, SCONTENTB) , TT2 AS (SELECT '1' AS FLAG, SCONTENTB, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT SCONTENTB, COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4 FROM TT WHERE ISINSIDE='0' AND ISNORMAL='0' GROUP BY SCONTENTB) ) , TT3 AS ( SELECT '1' AS FLAG, SCONTENTA, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT SCONTENTA, COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4 FROM TT WHERE ISINSIDE='0' AND ISNORMAL='0' GROUP BY SCONTENTA) ), tt4 as ( SELECT A.XM_1 AS XM1, A.XM_2 AS XM2, a.scode id, NVL(HS,0) HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT G.SCODE, G.SNAME AS XM_1, H.SNAME AS XM_2 FROM ( SELECT SCODE, ( CASE WHEN SCODE LIKE '1104%' THEN '按债务人状况分类' WHEN SCODE LIKE '1105%' THEN '按非正常类型分类' ELSE SNAME END) AS SNAME FROM DW_DIMITEM WHERE DIM_ITEMREPORT=:company AND SPCODE LIKE '11%' AND SCODE NOT IN('11', '1104', '1105')) G INNER JOIN ( SELECT SCODE, SNAME FROM DW_DIMITEM WHERE DIM_ITEMREPORT=:company AND SPCODE LIKE '11%' AND SCODE NOT IN('11', '1104', '1105')) H ON G.SCODE=H.SCODE ) A LEFT JOIN ( SELECT '1101' AS XM_1, '1101' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM TT WHERE ISINSIDE='1') UNION ALL SELECT '1102' AS XM_1, '1102' AS XM2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM TT WHERE ISINSIDE='0' AND ISNORMAL='1' ) UNION ALL SELECT '1103' AS XM_1, '1103' AS XM2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM TT WHERE ISINSIDE='0' AND ISNORMAL='0' ) UNION ALL SELECT '110401' AS XM_1, '110401' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1201') UNION ALL SELECT '110402' AS XM_1, '110402' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1202') UNION ALL SELECT '110403' AS XM_1, '110403' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1203') UNION ALL SELECT '110404' AS XM_1, '110404' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1204') UNION ALL SELECT '110405' AS XM_1, '110405' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1205') UNION ALL SELECT '110501' AS XM_1, '110501' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1101') UNION ALL SELECT '110502' AS XM_1, '110502' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1102') UNION ALL SELECT '110503' AS XM_1, '110503' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1103') UNION ALL SELECT '110504' AS XM_1, '110504' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1104') UNION ALL SELECT '110505' AS XM_1, '110505' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1105') UNION ALL SELECT '110506' AS XM_1, '110506' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1106') UNION ALL SELECT '110507' AS XM, '110507' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1107') ) B ON A.SCODE=B.XM_1 ORDER BY A.SCODE ) select z1.XM1,z1.XM2,z1.id, case when z1.id='1106' then z2.HS else z1.hs end hs, case when z1.id='1106' then z2.YE else z1.ye end ye, case when z1.id='1106' then z2.ONEYEAR else z1.ONEYEAR end ONEYEAR, case when z1.id='1106' then z2.TWOYEAR else z1.TWOYEAR end TWOYEAR, case when z1.id='1106' then z2.THREEYEAR else z1.THREEYEAR end THREEYEAR, case when z1.id='1106' then z2.FOURYEAR else z1.FOURYEAR end FOURYEAR, case when z1.id='1106' then z2.WWW1 else z1.WWW1 end WWW1, case when z1.id='1106' then z2.WWW2 else z1.WWW2 end WWW2, case when z1.id='1106' then z2.WWW3 else z1.WWW3 end WWW3, case when z1.id='1106' then z2.WWW4 else z1.WWW4 end WWW4 from tt4 z1 left join ( SELECT '合计' AS XM1, '合计' AS XM2, '1106' as id, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT sum(hs) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM tt4 where id in ('1101', '1102', '1103') ) ) z2 on z1.id=z2.id and z1.xm1=z2.xm1 and z1.xm2=z2.xm2 order by id ",
        "sql": "WITH TT AS(SELECT DIM_COMPANY, DIM_CUSUPPLIERNAME, ISINSIDE, ISNORMAL, SCONTENTA, SCONTENTB, NVL(SUM(FACT_BALANCE),0) AS YE,(NVL(SUM(FACT_A),0)) AS ONEYEAR, (NVL(SUM(FACT_B),0)) AS TWOYEAR, (NVL(SUM(FACT_C),0)) AS THREEYEAR, (NVL(SUM(FACT_D),0)) AS FOURYEAR, (NVL(SUM(FACT_E),0)) AS WWW1, (NVL(SUM(FACT_F),0)) AS WWW2, (NVL(SUM(FACT_G),0)) AS WWW3, (NVL(SUM(FACT_H),0)) AS WWW4 FROM DW_FACTAGEANALYSIS WHERE DIM_PERIOD=:period AND DIM_COMPANY IN ( SELECT SCODE FROM DW_DIMCOMPANY WHERE ( SCODE =:company OR SPCODE LIKE :company||'%') AND CISDEL='N' AND STYPE IN('1','R')) AND DIM_ITEM='1001' AND ISINSIDE IS NOT NULL GROUP BY DIM_COMPANY, DIM_CUSUPPLIERNAME, ISINSIDE, ISNORMAL, SCONTENTA, SCONTENTB) , TT2 AS (SELECT '1' AS FLAG, SCONTENTB, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT SCONTENTB, COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4 FROM TT WHERE ISINSIDE='0' AND ISNORMAL='0' GROUP BY SCONTENTB) ) , TT3 AS ( SELECT '1' AS FLAG, SCONTENTA, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT SCONTENTA, COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4 FROM TT WHERE ISINSIDE='0' AND ISNORMAL='0' GROUP BY SCONTENTA) ), tt4 as ( SELECT A.XM_1 AS XM1, A.XM_2 AS XM2, a.scode id, NVL(HS,0) HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT G.SCODE, G.SNAME AS XM_1, H.SNAME AS XM_2 FROM ( SELECT SCODE, ( CASE WHEN SCODE LIKE '1104%' THEN '按债务人状况分类' WHEN SCODE LIKE '1105%' THEN '按非正常类型分类' ELSE SNAME END) AS SNAME FROM DW_DIMITEM WHERE DIM_ITEMREPORT='1001' AND SPCODE LIKE '11%' AND SCODE NOT IN('11', '1104', '1105')) G INNER JOIN ( SELECT SCODE, SNAME FROM DW_DIMITEM WHERE DIM_ITEMREPORT='1001' AND SPCODE LIKE '11%' AND SCODE NOT IN('11', '1104', '1105')) H ON G.SCODE=H.SCODE ) A LEFT JOIN ( SELECT '1101' AS XM_1, '1101' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM TT WHERE ISINSIDE='1') UNION ALL SELECT '1102' AS XM_1, '1102' AS XM2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM TT WHERE ISINSIDE='0' AND ISNORMAL='1' ) UNION ALL SELECT '1103' AS XM_1, '1103' AS XM2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT COUNT(DIM_CUSUPPLIERNAME) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM TT WHERE ISINSIDE='0' AND ISNORMAL='0' ) UNION ALL SELECT '110401' AS XM_1, '110401' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1201') UNION ALL SELECT '110402' AS XM_1, '110402' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1202') UNION ALL SELECT '110403' AS XM_1, '110403' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1203') UNION ALL SELECT '110404' AS XM_1, '110404' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1204') UNION ALL SELECT '110405' AS XM_1, '110405' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT2 WHERE SCONTENTB='1205') UNION ALL SELECT '110501' AS XM_1, '110501' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1101') UNION ALL SELECT '110502' AS XM_1, '110502' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1102') UNION ALL SELECT '110503' AS XM_1, '110503' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1103') UNION ALL SELECT '110504' AS XM_1, '110504' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1104') UNION ALL SELECT '110505' AS XM_1, '110505' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1105') UNION ALL SELECT '110506' AS XM_1, '110506' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1106') UNION ALL SELECT '110507' AS XM, '110507' AS XM_2, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT * FROM TT3 WHERE SCONTENTA='1107') ) B ON A.SCODE=B.XM_1 ORDER BY A.SCODE ) select z1.XM1,z1.XM2,z1.id, case when z1.id='1106' then z2.HS else z1.hs end hs, case when z1.id='1106' then z2.YE else z1.ye end ye, case when z1.id='1106' then z2.ONEYEAR else z1.ONEYEAR end ONEYEAR, case when z1.id='1106' then z2.TWOYEAR else z1.TWOYEAR end TWOYEAR, case when z1.id='1106' then z2.THREEYEAR else z1.THREEYEAR end THREEYEAR, case when z1.id='1106' then z2.FOURYEAR else z1.FOURYEAR end FOURYEAR, case when z1.id='1106' then z2.WWW1 else z1.WWW1 end WWW1, case when z1.id='1106' then z2.WWW2 else z1.WWW2 end WWW2, case when z1.id='1106' then z2.WWW3 else z1.WWW3 end WWW3, case when z1.id='1106' then z2.WWW4 else z1.WWW4 end WWW4 from tt4 z1 left join ( SELECT '合计' AS XM1, '合计' AS XM2, '1106' as id, HS, YE, ONEYEAR, TWOYEAR, THREEYEAR, FOURYEAR, WWW1, WWW2, WWW3, WWW4 FROM ( SELECT sum(hs) AS HS, SUM(YE) AS YE, SUM(ONEYEAR) AS ONEYEAR , SUM(TWOYEAR) AS TWOYEAR, SUM(THREEYEAR) AS THREEYEAR, SUM(FOURYEAR) AS FOURYEAR, SUM(WWW1) AS WWW1, SUM(WWW2) AS WWW2, SUM(WWW3) AS WWW3, SUM(WWW4) AS WWW4, '1' AS FLAG FROM tt4 where id in ('1101', '1102', '1103') ) ) z2 on z1.id=z2.id and z1.xm1=z2.xm1 and z1.xm2=z2.xm2 order by id  ",
        "_cube": {
            "subject": "0007",
            "cubeId": 4
        },
        "mainDim": "itemperiod",
        "needDims": ["year", "month", "company", "conversion"],
        "random": {
            "min": 100,
            "max": 100000
        },
        "type": 1

    },
    "showDims": ["company", "year", "month", "conversion"],
    "columns": [{
            "id": "www4",
            "type": "decimal",
            "width": "180px",
            "text": "已形成实质性损失金额"
        },
        {
            "id": "",
            "hidden": true
        },
        {
            "id": "xm1",
            "type": "string",
            "fixed": true,
            "text": "项目"
        },
        {
            "id": "xm2",
            "type": "string",
            "fixed": true,
            "text": "",
            "width": "340px"
        }, {
            "id": "hs",
            "type": "number",
            "text": "户数",
            "align": "center"
        }, {
            "id": "ye",
            "type": "decimal",
            "text": "余额"
        }, {
            "id": "oneyear",
            "type": "decimal",
            "text": "1年以内"
        }, {
            "id": "twoyear",
            "type": "decimal",
            "text": "1-2年以内"
        }, {
            "id": "threeyear",
            "type": "decimal",
            "text": "2-3年以内"
        },
        {
            "id": "fouryear",
            "type": "decimal",
            "text": "3年以上"
        }, {
            "id": "www1",
            "type": "decimal",
            "text": "可回收金额"
        }, {
            "id": "www2",
            "type": "decimal",
            "width": "180px",
            "text": "其中：当年可收回金额"
        }, {
            "id": "www3",
            "type": "decimal",
            "text": "逾期账款"
        }
    ],
    "rows": [],
    "layout": {
        "xtype": "tab"
    },
    "items": [{
        "xtype": "bi-table",
        "id": "yszkflhz",
        "text": "应收账款分类汇总表",
        "toolbar": [{
            "id": "1",
            "text": "刷新",
            "xtype": "button",
            "cellStyle": {
                // "color": "black",
                // "background-color": "#189271"
                // "background-color":"#fff"
            },
            "handler": function(vue, btn) {
                let $vue = vue.item.$vue;
                $vue.closeTabTaget({}, $vue);
                vue.item.updateView("company");
            }
        }, {
            "id": "2",
            "text": "导出",
            "cellStyle": {
                // "color": "black",
                // "background-color": "#189271"
                // "background-color":"#fff"
            },
            "handler": function(vue, btn) {
                vue.handleDownload(vue);
            }
        }],
        "drillProperties": ["hs"], //有钻取，给蓝色

        "cellStyle": function(row) {
            let datas = this.datas;
            let record = [];
            record = datas[row.rowIndex];
            let css = "padding: 4px 0;";
            let center = " text-align: center;";
            let pro = row.column.property; //列id
            if (!pro) {
                return css;
            }
            let textIndent = "";
            let drillProperties = this.drillProperties; //钻取列获取
            if (drillProperties.indexOf(pro) != -1) { //匹配需要下钻的列
                if (record.hs && record.hs != 0 && record.id != '1106') { //有数据时才显示蓝色，并且可以下钻(合计行不能下钻)
                    let drill = "text-decoration: none;color: #428bca;cursor: pointer;"; //可以下钻的科目的颜色的设置
                    css = css + "font-weight:bold;" + textIndent + drill;
                    datas[row.rowIndex].drill = true; //下钻设置
                    return css;
                } else {
                    return css + textIndent;
                }
            } else {
                if (record.xm1 && record.xm1 == "合计" && 　row.columnIndex == 0) {
                    return css + center + textIndent;
                } else {
                    return css + textIndent;
                }

            }
        },
        "onCellClick": function(row, column, cell, event, option) {
            let datas = this.datas;
            let data = datas.filter(function(item) {
                return item.id == row.id;
            });
            row = data[0];
            let cv = column.property + ""; //下钻行的标识
            let listener = row._drill || row.drill;
            if (listener && cv == "hs") {
                let text = row.xm2; //下钻显示的标题
                let id = row.id; //下钻行的标识

                option.commonHandler({
                    "type": "click", //事件类型
                    "way": "addTab", //调用的公共方法
                    "sourceApi": "/cnbi/json/source/tjsp/yszkhzDrill.json", //下钻json的路径
                    "handler": ($vue, params) => { //自定义的回调
                        console.info(params);
                        // let pp = {id:params.xxx,xxx};
                        //  $vue.popop = pp;
                    }
                }, {
                    row: row,
                    column: column,
                    cell: cell,
                    event: event
                }, {
                    id: id,
                    text: text
                });
            }
        },
        "rowSpanAndColSpanHandler": function({
            row,
            column,
            rowIndex,
            columnIndex
        }, option) { //单元格处理 retrun  {rowspan:2,colspan:5}//可选
            if (rowIndex === 0 || rowIndex === 1 || rowIndex === 2 || rowIndex === 15) { //合并单元格
                if (columnIndex === 0) {
                    return [1, 2];
                } else if (columnIndex === 1) {
                    return [0, 0];
                }
            }
            if (columnIndex === 0) {
                if (rowIndex === 3) {
                    return {
                        rowspan: 5,
                        colspan: 1
                    };
                } else if (rowIndex === 8) {
                    return {
                        rowspan: 7,
                        colspan: 1
                    };
                } else {
                    return {
                        rowspan: 0,
                        colspan: 0
                    };
                }
            }
        }
    }]
}