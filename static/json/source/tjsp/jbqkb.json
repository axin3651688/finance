{
    "id": "001408",
    "text": "基本情况表",
    "layout": {
        "xtype": "tab"
    },
    "showDims": ["year","month","company","conversion"],
    "changeCompanyBefore":function(newcompany,option){
        option.closeTabTaget(newcompany,option);
    },
    "changeYearBefore":function(newyear,option){
        option.closeTabTaget(newyear,option);
    },
    "changeMonthBefore":function(newmonth,option){
        debugger
        option.closeTabTaget(newmonth,option);
    },
    "__queryDataAfter":function(data,$vue){//数据的后置处理
        let me = this;
        me.items[0].updateView = $vue.updateView;
        me.items[0].$vue = $vue;
        return data;
    },
    "config": {
        "_sql": "",
        "_cube": {
            "cubeId": 4 ,
            "subject": "0002"
        },
        "mainDim":"itemperiod",
        "needDims":["year","month","company","conversion"],
        "random":{"min":100,"max":100000},
        "type":1 ,
        "generateVar":{//生成变量rows
            "periodCount":2,
            "compareType":"-1&0",
            "reverse":true
        } 
    },
    "columns": [
        {
            "id" : "",
            "type" : "string",
            "text" : "上年同期数",
            "children": [
                {
                    "id" : "dys",
                    "type" : "decimal",
                    "text" : "当月数",
                    "width": "150px"
                },
                {
                    "id" : "snlj",
                    "type" : "decimal",
                    "text" : "上年累计",
                    "width": "150px"
                }
            ]
        },
        {
            "id" : "xm",
            "type" : "string",
            "text" : "项目",
            "width": "320px"
        },
        {
            "id" : "row",
            "type" : "number",
            "text" : "行次",
            "align": "center",
            "width": "60px"
        },
        {
            "id" : "",
            "type" : "string",
            "text" : "本期数",
            "children": [
                {
                    "id" : "bys",
                    "type" : "decimal",
                    "text" : "本月数",
                    "width": "150px"
                },
                {
                    "id" : "bnlj",
                    "type" : "decimal",
                    "text" : "本年累计",
                    "width": "150px"
                }
            ]
        }
    ],
    "rows": [
        { 
            "xm" : "一、人员、工资指示", "row" : 1,"bys" : 0,"bnlj" : 0,"dys" : 0, "snlj" : 0 , "level" : 0
        },
        {
            "xm" : "1、职工人数（不含劳务派遣）（人）", "row" : 2,"bys" : 0,"bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 2
        },
        {
            "xm" : "其中：在岗职工人数（人）", "row" : 3, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 4
        },
        {
            "xm" : "2、从业人员人数", "row" : 4, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 2
        },
        {
            "xm" : "3、职工薪酬（不含劳务派遣）", "row" : 5, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 2
        },
        {
            "xm" : "其中：职工工资总额", "row" : 6, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 4
        },
        {
            "xm" : "福利费用", "row" : 7, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "社会保险费用", "row" : 8, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "二、税收指示", "row" : 9, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 0
        },
        {
            "xm" : "1、应交税金总额", "row" : 10, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 2
        },
        {
            "xm" : "其中：增值税", "row" : 11, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 4
        },
        {
            "xm" : "消费税", "row" : 12, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "企业所得税", "row" : 13, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "关税", "row" : 14, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "个人所得税", "row" : 15, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "2、已交税金总额", "row" : 16, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 2
        },
        {
            "xm" : "其中：增值税", "row" : 17, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 4
        },
        {
            "xm" : "消费税", "row" : 18, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "企业所得税", "row" : 19, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "关税", "row" : 20, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "个人所得税", "row" : 21, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 6
        },
        {
            "xm" : "三、增加值", "row" : 22, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 0
        },
        {
            "xm" : "其中：本期计提折旧额", "row" : 23, "bys" : 0, "bnlj" : 0, "dys" : 0, "snlj" : 0 , "level" : 4
        }
    ],
    "items": [
        {
            "xtype": "bi-table",
            "id" : "jbqkb",
            "stype": "table",
            "text" : "基本情况表",
            "toolbar":[{    
                "id":"1",
                "text":"刷新",
                "xtype":"button",
                "cellStyle":{
                    "color":"black",
                    "background-color":"#189271"
                },
                "handler":function(vue,btn){
                    debugger
                    console.log(vue);
                    let $vue = vue.item.$vue;
                    $vue.closeTabTaget({}, $vue);
                    vue.item.updateView("company");
                }
            },{
                "id":"2",
                "text":"导出",
                "xtype":"button",
                "cellStyle":{
                    "color":"black",
                    "background-color":"#189271"
                },
                "handler":function(vue,btn){
                    debugger
                    console.log(vue);
                    vue.handleDownload(vue);
                }
            }],
            "levelProperties":{xm:"level"},
            "cellStyle":function(row,col){
                debugger
                let pro = row.column.property;
                let textIndent ="";
                let record = row.row ;
                if (!pro) {
                    return css;
                }
                let levelProperties = this.levelProperties;
                let levelPro = levelProperties[pro];
                if (levelPro && record[levelPro]) {
                    let level = record[levelPro] || 1;
                    textIndent = level > 1 ? "text-indent: " + (level - 1) * 20 + "px;" : ";";
                }
                return textIndent ;
            }
        }
    ]
}