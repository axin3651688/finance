

      {
        "id":"0022",
        "text":"下属企业抵押贷款情况表",
        "config":{
            "sql":"SELECT A.DIM_COMPANY, CASE WHEN GROUPING(B.SNAME) =1 THEN '合计' ELSE B.SNAME END AS GSMC, CASE WHEN GROUPING(C.SNAME)=1 AND GROUPING(B.SNAME) =0 THEN A.DIM_COMPANY||'小计' ELSE C.SNAME END AS YHMC, D.SNAME AS RHMC, SUM(NVL(A.FACT_A,0)) AS FACT_A, A.SSTARTDATE,A.SENDDATE, A.FACT_B,A.SREPAYDATE,E.SNAME, CASE WHEN A.STATUS ='1' THEN '新增'WHEN A.STATUS ='-1' THEN '减少' ELSE '不符合条件' END AS STATUS,F.SNAME,A.SNOTE FROM DW_FACTFINANCEDETAIL A LEFT JOIN DW_DIMCOMPANY B ON A.DIM_COMPANY = B.SCODE LEFT JOIN DW_DIMBANK C ON A.DIM_BANK =C.SCODE LEFT JOIN DW_DIMFINANCE D ON A.DIM_FINANCE =D.SCODE LEFT JOIN(SELECT SCODE,SNAME FROM DW_DIMDROPMENU WHERE SPCODE='21') E ON A.DIM_REPAYSOURCE=E.SCODE LEFT JOIN (SELECT SCODE,SNAME FROM DW_DIMDROPMENU WHERE SPCODE='20') F ON A.DIM_GUARANTEE=F.SCODE WHERE CISGUARANTEE ='0' AND :period  BETWEEN SUBSTR(SSTARTDATE,1,6) AND SUBSTR(SENDDATE,1,6)  GROUP BY ROLLUP((A.DIM_COMPANY,B.SNAME),(C.SNAME, D.SNAME,A.SSTARTDATE, A.SENDDATE, A.FACT_B, A.SREPAYDATE, E.SNAME, A.STATUS, F.SNAME, A.SNOTE))  ",
            "cube":{
              "subject":"0007",
              "cubeId":4
            },
            
            "mainDim":"itemperiod",
            "needDims":["year","month","company"],
            "random":{"min":100,"max":100000},
            "type":1
              
         },
        "columns":[
            {
                "id": "snote",
                "type": "string",
                "text": "备注"
              },
              {
                "id": "dim_company",
                "type": "string",
                "text": "公司编码"
              },
              {
                "id": "gsmc",
                "type": "number",
                "text": "公司名称"
              },
               {
                    "id":"yhmc",
                    "type":"string",
                    "text":"机构名称"
                },
                {
                    "id":"rhmc",
                    "type":"string",
                    "text":"融资类型"
                },
                {
                    "id":"fact_a",
                    "type":"number",
                    "text":"金额"
                },
                {
                    "id":"sstrtdate",
                    "type":"string",
                    "text":"起始日期"
            },
              {
                "id": "senddate",
                "type": "string",
                "text": "到期日期*"
              },
              {
                "id": "fact_b",
                "type": "number",
                "text": "利率（%）",
                "unit":"%"
              },
              {
                "id": "srepaydate",
                "type": "string",
                "text": "已还款日期*"
              },
              {
                "id": "ename",
                "type": "string",
                "text": "还款来源"
              },
              {
                "id": "status",
                "type": "string",
                "text": "新增/减少"
              },
              {
                "id": "fname",
                "type": "string",
                "text": "担保方式"
              }
        ],
        "rows":[
      ],
      "layout":{
          "xtype":"tab"
       },
      "items":[
         {
          "xtype": "bi-table",
          "id":"xsqydydkqk",
          "text":"下属企业抵押贷款情况表",
        }
      ]
      }
      
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    











