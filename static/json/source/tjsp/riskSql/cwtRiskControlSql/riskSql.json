{
  "code": 200,
  "sqlList": [
    {
      "id": "001",
      "text": "风险反馈普通表数据",
      "sql": "WITH riskstate AS ( SELECT SISFEEDBACK, NRELATEID， SINSTRUCTSCONTENT, SFEEDBACKSCONTENT FROM RISK_REPORTSTATE WHERE DIM_COMPANY='1001' AND DIM_PERIOD='201904' ) , risklist AS ( SELECT nid, DIM_COMPANY, DIM_PERIOD, DIM_DEPARTMENT , SRISKNAME， NPROBABILITY, NINFLUENCE, NGRADE, SRISKDESCRIPTION, SMEASURES, SPROPOSAL, SRISKTYPE FROM RISK_DISTINGUISH WHERE nid IN ( SELECT NRELATEID FROM riskstate) AND dim_department = '01' ) , datalist AS ( SELECT nid, dim_company, dim_period, dim_department, sriskname, sisfeedback， SINSTRUCTSCONTENT, NPROBABILITY, NINFLUENCE, NGRADE, SRISKDESCRIPTION, SMEASURES, SPROPOSAL, risk_type.sname as SRISKTYPE ,SFEEDBACKSCONTENT FROM risklist LEFT JOIN riskstate ON risklist.nid = riskstate.nrelateid left join (select scode,sname from risk_type) risk_type on risk_type.scode=risklist.SRISKTYPE ) SELECT nid AS scode, sriskname AS riskname, SRISKTYPE as risktype, NPROBABILITY AS riskprobability, NINFLUENCE AS riskdegree, NGRADE AS risklevel, SRISKDESCRIPTION AS riskoverview, SMEASURES AS riskmeasure, SPROPOSAL AS risksuggest, SINSTRUCTSCONTENT AS instruction， SFEEDBACKSCONTENT as riskfeed, ( CASE sisfeedback WHEN '-1' THEN '未反馈' WHEN '1' THEN '已反馈' ELSE '' END ) AS backState, ( CASE sisfeedback WHEN '-1' THEN '0-反馈,3-提醒' WHEN '1' THEN '1-查看,2-退回' ELSE '' END ) AS operation FROM datalist"
    },
    {
      "id": "002",
      "text": "风险追踪普通标数据",
      "sql": "with riskstate as (select SISREPORT, SISINSTRUCTIONS, SISFEEDBACK, SREPORTUSER,SINSTRUCTIONSUSER, SFEEDBACKSUSER, NRELATEID from  RISK_REPORTSTATE where DIM_COMPANY=:company AND DIM_PERIOD=:period ), risklist as (SELECT nid,DIM_COMPANY, DIM_PERIOD, DIM_DEPARTMENT , SRISKNAME FROM RISK_DISTINGUISH  where nid in (select NRELATEID from riskstate) and dim_department = '0101'), datalist as( select nid,dim_company, dim_period, dim_department, sriskname,SISREPORT,SISINSTRUCTIONS, SISFEEDBACK,SREPORTUSER,SINSTRUCTIONSUSER, SFEEDBACKSUSER from risklist  left join riskstate on risklist.nid = riskstate.nrelateid) select nid as scode, sriskname as riskname, (case when  SISFEEDBACK='1' and SISINSTRUCTIONS='1' and SISREPORT='1' then '已反馈' when  SISREPORT='1' and SISINSTRUCTIONS='1' and SISFEEDBACK <> '1'  then '未反馈' when SISREPORT='1' and SISINSTRUCTIONS<>'1' and  SISFEEDBACK <> '1'  then '未批示' when SISREPORT<>'1' and SISINSTRUCTIONS<>'1' and  SISFEEDBACK <> '1'  then '未上报' else null end ) AS riskstate, SREPORTUSER as sb_user,SINSTRUCTIONSUSER as ps_user , SFEEDBACKSUSER as fk_user,'1-查看' as operation from datalist"
    }
  ]
}