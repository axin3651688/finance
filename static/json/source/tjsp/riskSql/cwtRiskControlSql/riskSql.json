{
  "code": 200,
  "sqlList": [
    {
      "id": "001",
      "text": "风险反馈普通表数据",
      "sql": "WITH riskstate AS ( SELECT SISFEEDBACK, NRELATEID， SINSTRUCTSCONTENT, SFEEDBACKSCONTENT FROM RISK_REPORTSTATE WHERE DIM_COMPANY='1001' AND DIM_PERIOD='201905' ) , risklist AS ( SELECT nid, DIM_COMPANY, DIM_PERIOD, DIM_DEPARTMENT , SRISKNAME， NPROBABILITY, NINFLUENCE, NGRADE, SRISKDESCRIPTION, SMEASURES, SPROPOSAL, SRISKTYPE FROM RISK_DISTINGUISH WHERE nid IN ( SELECT NRELATEID FROM riskstate) AND dim_department = '01' ) , datalist AS ( SELECT nid, dim_company, dim_period, dim_department, sriskname, sisfeedback， SINSTRUCTSCONTENT, NPROBABILITY, NINFLUENCE, NGRADE, SRISKDESCRIPTION, SMEASURES, SPROPOSAL, risk_type.sname AS SRISKTYPE , SFEEDBACKSCONTENT FROM risklist LEFT JOIN riskstate ON risklist.nid = riskstate.nrelateid LEFT JOIN ( SELECT scode, sname FROM risk_type) risk_type ON risk_type.scode=risklist.SRISKTYPE ) SELECT nid AS scode, rownum, sriskname AS riskname, SRISKTYPE AS risktype, NPROBABILITY AS riskprobability, NINFLUENCE AS riskdegree, NGRADE AS risklevel, SRISKDESCRIPTION AS riskoverview, SMEASURES AS riskmeasure, SPROPOSAL AS risksuggest, SINSTRUCTSCONTENT AS instruction， SFEEDBACKSCONTENT AS riskfeed, ( CASE sisfeedback WHEN '-1' THEN '未反馈' WHEN '1' THEN '已反馈' ELSE '' END ) AS backState, ( CASE sisfeedback WHEN '-1' THEN '0-反馈,3-提醒' WHEN '1' THEN '1-查看,2-退回' ELSE '' END ) AS operation FROM datalist"
    },
    {
      "id": "002",
      "text": "风险追踪普通标数据",
      "sql": "WITH riskstate AS ( SELECT SISREPORT, SREPORTUSER, SREPORTTIME, SISINSTRUCTIONS, SINSTRUCTIONSUSER, SINSTRUCTIONTIME, SINSTRUCTSCONTENT， SISFEEDBACK, SFEEDBACKSUSER, SFEEDBACKTIME, SFEEDBACKSCONTENT， NRELATEID FROM RISK_REPORTSTATE WHERE DIM_COMPANY='1001' AND DIM_PERIOD='201905' ) , risklist AS ( SELECT nid, DIM_COMPANY, DIM_PERIOD, DIM_DEPARTMENT, SRISKNAME， SMEASURES， SPROPOSAL， SRISKTYPE， NPROBABILITY， NINFLUENCE， NGRADE， SRISKDESCRIPTION FROM RISK_DISTINGUISH WHERE DIM_COMPANY='1001' AND DIM_PERIOD='201905' AND dim_department = '01' ) SELECT A.nid AS scode, rownum, sriskname AS riskname, D.SNAME AS RISKTYPE， F.SNAME AS riskprobability， E.SNAME AS riskdegree， G.SNAME AS risklevel， SRISKDESCRIPTION AS riskoverview, SMEASURES AS riskmeasure， SPROPOSAL AS risksuggest， ( CASE SISREPORT WHEN '-1' THEN '未上报' WHEN '1' THEN '已上报' ELSE '未上报' END ) AS risk_sb, (case when SREPORTUSER is null then '无' else SREPORTUSER end ) SREPORTUSER, (case when SREPORTTIME is null then '无' else SREPORTTIME end ) SREPORTTIME, ( CASE SISINSTRUCTIONS WHEN '-1' THEN '未批示' WHEN '1' THEN '已批示' ELSE '未批示' END ) AS risk_ps, (case when SINSTRUCTIONSUSER is null then '无' else SINSTRUCTIONSUSER end ) SINSTRUCTIONSUSER, (case when SINSTRUCTIONTIME is null then '无' else SINSTRUCTIONTIME end ) SINSTRUCTIONTIME, (case when SINSTRUCTSCONTENT is null then '无' else SINSTRUCTSCONTENT end ) SINSTRUCTSCONTENT, ( CASE sisfeedback WHEN '-1' THEN '未反馈' WHEN '1' THEN '已反馈' ELSE '未反馈' END ) AS risk_fq, (case when SFEEDBACKSUSER is null then '无' else SFEEDBACKSUSER end ) SFEEDBACKSUSER, (case when SFEEDBACKTIME is null then '无' else SFEEDBACKTIME end ) SFEEDBACKTIME, (case when SFEEDBACKSCONTENT is null then '无' else SFEEDBACKSCONTENT end ) SFEEDBACKSCONTENT, '1-查看' AS operation FROM risklist a LEFT JOIN riskstate b ON a.nid = b.nrelateid LEFT JOIN dw_dimcompany c ON a.dim_company=c.scode LEFT JOIN ( SELECT scode, sname FROM risk_type) D ON D.scode=A.SRISKTYPE LEFT JOIN RISK_INFLUENCE_DEGREE E ON E.NID=A.NINFLUENCE LEFT JOIN RISK_PROBABILITY F ON F.NID=A.NPROBABILITY LEFT JOIN RISK_MATRIX G ON A.NGRADE=G.NID"
    }
  ]
}