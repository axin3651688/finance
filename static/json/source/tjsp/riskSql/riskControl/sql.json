{
    "code": 200,
    "sqlList": [{
            "id": "101",
            "text": "风险控制批示",
            "sql": "with t as(select a.nid as id, sriskname fxmc, c.sname fxlx, b.sname fxdj, a.ngrade as nlevel, sriskdescription fxms, sorigin fxly, case when d.sisinstructions='1' then '批示' when d.sisinstructions='-1' then '未批示' when d.sisinstructions='0' then '提醒' when d.sisinstructions='2' then '退回' else d.sisreport end pszt, d.sisinstructions as psztid, screatetime cjsj， smeasures cqcs, sproposal ydjy, nprobability fxgl,d.cstrategy as fxydcl from risk_distinguish a left join risk_influence_degree b on a.ngrade=b.nscore left join risk_type c on a.srisktype=c.scode left join risk_reportstate d on a.nid=d.nrelateid where a.dim_company=:company and a.dim_period=:period and a.dim_department=:departId and d.sisinstructions in('-1','1') order by d.sisinstructions) , t2 as (select a.id, wm_concat(b.sname) as FXYDCLNAME, wm_concat(b.SDESC) as FXYDCLSDESC from (SELECT id, SUBSTR(FXYDCL, INSTR(FXYDCL, ',', 1, LEVEL) + 1, INSTR(FXYDCL, ',', 1, LEVEL + 1) - INSTR(FXYDCL, ',', 1, LEVEL) - 1) FXYDCL,LEVEL FROM (select id ,','||FXYDCL||',' as FXYDCL, LENGTH(FXYDCL) - LENGTH(REPLACE(FXYDCL, ','))+2 CN from t) TT CONNECT BY PRIOR id = id AND LEVEL < CN AND PRIOR DBMS_RANDOM.VALUE IS NOT NULL) a left join RISK_STRATEGY b on a.FXYDCL = b.scode group by a.id) select a.*,b. FXYDCLNAME, b.FXYDCLSDESC from t a left join t2 b on a.id = b.id "
        },
        {
            "id": "102",
            "text": "风险管控弹出框的指定下达人员的sql",
            "sql": "SELECT SCODE, SNAME, SPCODE,b.nid as usernid,b.suser as suser, b.STRUENAME,b.suser||'('||b.STRUENAME||')' username FROM DW_DIMDEPARTMENT a right join(select nid,STRUENAME,suser, SDEPARTMENTID from SYS_USER where COMPANY='1001') b on a.scode=b.SDEPARTMENTID where SCOMCODE='1001' order by scode"
        },
        {
            "id": "103",
            "text": "风险管控汇总批示树表数据",
            "sql": "select a.scode as scode , a.sname as sname,a.spcode as spcode, sstate, c.reportuser,c.reportime, c.SISINSTRUCTIONS, a.nleaf, a.nlevel from(select scode, sname, spcode, connect_by_isleaf as nleaf, level as nlevel from dw_dimcompany start with scode = '1001' connect by prior scode = spcode) a left join (select DIM_COMPANY, case when ncount > 0 then '已批示' else '未批示' end as sstate, case when ncount > 0 then 'Y' else 'N' end as SISINSTRUCTIONS, 'fuq' as reportuser, '201805' as reportime from (select DIM_COMPANY, count (*) as ncount from RISK_REPORTSTATE where NRELATEID in (select nid from risk_distinguish where dim_company = '1001' and substr(screatetime,1,6) <= '201905') and SISINSTRUCTIONS = '1' group by DIM_COMPANY)) c on a.scode = c.dim_company"
        }
    ]
}