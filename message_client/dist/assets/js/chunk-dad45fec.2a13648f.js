(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dad45fec"],{"7fca":function(n,t,e){"use strict";e.r(t);var o=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",{staticClass:"GroupMenu"},[o("relative-pop",{attrs:{showClose:!1}},[o("i",{staticClass:"el-icon-arrow-down el-icon--right"}),o("ul",{attrs:{slot:"pop"},slot:"pop"},[n.loginUserId===n.groupOwnerId?o("li",{staticClass:"pop-list",on:{click:function(t){n.showGroupSettingDialog=!0}}},[o("h3",{staticClass:"pop-list__title"},[o("img",{staticClass:"pop-list__icon",attrs:{src:e("abbe")}}),o("span",{staticClass:"pop-list__text"},[n._v("群主设置")])]),o("p",{staticClass:"pop-list__description"},[n._v("管理员对群主名称等相关设置")])]):n._e(),o("li",{staticClass:"pop-list",on:{click:function(t){n.showGroupQuitDialog=!0}}},[o("h3",{staticClass:"pop-list__title"},[o("img",{staticClass:"pop-list__icon",attrs:{src:e("abbe")}}),o("span",{staticClass:"pop-list__text"},[n._v("退出群组")])]),o("p",{staticClass:"pop-list__description"},[n._v("退出群组将不再接收消息")])])])]),n.showGroupSettingDialog?o("el-dialog",{attrs:{visible:n.showGroupSettingDialog,width:"35%","show-close":!1},on:{"update:visible":function(t){n.showGroupSettingDialog=t}}},[o("div",{staticClass:"dialog-content"},[o("h3",{staticClass:"title"},[n._v("群头像设置")]),o("figure",[o("div",[o("div",{staticClass:"img-box"},[n.imageUrl?o("img",{staticClass:"avatar",attrs:{src:n.imageUrl}}):o("img",{directives:[{name:"avatar",rawName:"v-avatar",value:n.groupInfo.text,expression:"groupInfo.text"}],attrs:{src:n.groupInfo.avatar}})])]),o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":n.handleAvatarSuccess,"before-upload":n.beforeAvatarUpload}},[n._v("\n          上传头像\n        ")])],1)]),o("div",{staticClass:"dialog-content"},[o("h3",{staticClass:"title"},[n._v("群名称设置")]),o("el-input",{ref:"groupName",attrs:{placeholder:"群名称",clearable:""},model:{value:n.groupInfo.text,callback:function(t){n.$set(n.groupInfo,"text",t)},expression:"groupInfo.text"}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:n.clickEditGroup}},[n._v("保 存")]),o("el-button",{attrs:{size:"small"},on:{click:function(t){n.showGroupSettingDialog=!1}}},[n._v("取 消")])],1)]):n._e(),n.showGroupQuitDialog?o("el-dialog",{attrs:{title:"退出群组",visible:n.showGroupQuitDialog,width:"30%","show-close":!1,center:""},on:{"update:visible":function(t){n.showGroupQuitDialog=t}}},[o("div",{staticClass:"dialog-content",staticStyle:{"font-size":"16px","line-height":"30px"}},[o("p",[n._v("是否退出群组")]),o("p",[n._v('"'+n._s(n.groupInfo.text)+'"')])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){return n.quitGroup()}}},[n._v("确 认")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){n.showGroupQuitDialog=!1}}},[n._v("取 消")])],1)]):n._e()],1)},i=[],a=e("cebc"),r=e("2f62"),s=e("c443"),l={name:"GroupMenu",components:{RelativePop:function(){return Promise.resolve().then(e.bind(null,"fd00"))}},data:function(){return{imageUrl:"",showGroupQuitDialog:!1,showGroupSettingDialog:!1,groupInfo:null,groupUsers:null,oldGroupName:"",imgfd:null}},computed:Object(a["a"])({},Object(r["c"])(["user","messageStore"]),{loginUserId:function(){return this.user.user.id},groupId:function(){return this.messageStore.sessionActiveItem.id},groupOwnerId:function(){return this.groupInfo?this.groupInfo.ownerId:null}}),methods:Object(a["a"])({},Object(r["b"])(["ActionSetMessageStore"]),{handleAvatarSuccess:function(n,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(n){console.log(n);var t=new FormData;return t.append("file",n),t.append("userId",this.loginUserId),t.append("size",n.size),this.imgfd=t,this.submitUpload(t),!0},submitUpload:function(n){var t=this;n&&Object(s["g"])(n).then(function(n){console.log("上传群头像res",n),200===n.data.code&&(t.hdUrl=n.data.data.hdUrl)})},clickEditGroup:function(){var n=this.$refs.groupName.value;if(n!==this.groupInfo.text||this.imgfd){var t={id:this.groupId,text:n,type:0,userId:this.loginUserId};this.hdUrl&&(t["avatar"]=this.hdUrl),console.log("params",t),Object(s["f"])(t).then(function(n){console.log("设置群资料",n.data.data),n.data.code}).catch(function(n){console.log("设置群资料",n)})}else this.showGroupSettingDialog=!1},isGroupOwner:function(){return this.loginUserId===this.groupOwnerId},requestGroupInfo:function(){var n=this;this.groupId&&Object(s["l"])(this.groupId).then(function(t){console.log("群id查询群信息:",t.data.data),200===t.data.code&&t.data.data&&(n.groupInfo=t.data.data.info,n.groupUsers=t.data.data.users,n.ActionSetMessageStore({groupInfo:t.data.data}))}).catch(function(n){console.log(n)})},quitGroup:function(){var n=this;if(this.loginUserId===this.groupOwnerId)return this._dissolveGroupConfirm();var t={userId:this.loginUserId,groupId:this.groupId};Object(s["u"])(t).then(function(t){console.log("退出群组res:",t),200===t.data.code?(n.showGroupQuitDialog=!1,n.$message({type:"success",message:"退出群组:"+t.data.msg,showClose:!0})):n.$alert(t.data.msg,"退出群组失败",{confirmButtonText:"确定"})}).catch(function(n){console.log("退出群组:",n)})},dissolveGroup:function(){var n=this,t={senderId:this.loginUserId,groupId:this.groupId};Object(s["e"])(t).then(function(t){console.log("解散群聊：",t.data.data),200===t.data.code?n.$message({type:"success",message:t.data.msg,showClose:!0}):n.$message({type:"error",message:t.data.msg,showClose:!0})}).catch(function(n){console.log(n)})},_dissolveGroupConfirm:function(){var n=this;this.$confirm("你是群组，退出后会解散该群, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.dissolveGroup()}).catch(function(){return!1})}}),created:function(){this.requestGroupInfo()}},c=l,p=(e("f550"),e("2877")),g=Object(p["a"])(c,o,i,!1,null,"5fc50a56",null);t["default"]=g.exports},abbe:function(n,t,e){n.exports=e.p+"assets/img/group_set_icon.3e3ff99e.svg"},b6ae:function(n,t,e){t=n.exports=e("24fb")(!0),t.push([n.i,"[data-v-5fc50a56] .el-scrollbar__wrap{overflow-x:hidden}.off-line img[data-v-5fc50a56]{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.dropdown-wrap[data-v-5fc50a56]{display:inline-block;padding:0 5px;cursor:pointer}.page-title__name-text[data-v-5fc50a56]{display:inline-block;max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-5fc50a56] .RelativePop .pop-wrap{-webkit-box-sizing:border-box;box-sizing:border-box;padding:10px 0;width:240px;top:calc(100% + 10px);left:-40px;border-bottom-right-radius:8px;border-bottom-left-radius:8px;overflow:hidden;-webkit-box-shadow:0 3px 10px rgba(0,0,0,.16);box-shadow:0 3px 10px rgba(0,0,0,.16)}[data-v-5fc50a56] .RelativePop .pop-list{cursor:pointer;padding:10px 20px}[data-v-5fc50a56] .RelativePop .pop-list:hover{background:rgba(219,238,255,.53)}[data-v-5fc50a56] .RelativePop .pop-list__icon{width:18px;height:18px;margin-right:12px}[data-v-5fc50a56] .RelativePop .pop-list__title{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:20px;font-weight:700;font-size:16px;color:#1890ff}[data-v-5fc50a56] .RelativePop .pop-list__description{font-size:12px;line-height:20px;margin-top:5px;color:rgba(0,0,0,.5)}[data-v-5fc50a56] .el-dialog{min-width:300px;border-radius:12px}[data-v-5fc50a56] .el-dialog .el-dialog__header{text-align:left;font-size:16px;font-weight:700}[data-v-5fc50a56] .el-dialog .el-dialog__header .el-dialog__title{color:#1890ff}[data-v-5fc50a56] .el-dialog .dialog-content{margin-bottom:20px}[data-v-5fc50a56] .el-dialog .dialog-content:last-child{margin-bottom:0}[data-v-5fc50a56] .el-dialog .dialog-content .title{font-size:16px;font-weight:700;color:#1890ff;margin-bottom:10px}[data-v-5fc50a56] .el-dialog .dialog-content /deep/ .el-input__inner{background:#f0f0f0;border:none}[data-v-5fc50a56] .el-dialog .dialog-content figure{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}[data-v-5fc50a56] .el-dialog .dialog-content figure .img-box{overflow:hidden;width:60px;height:60px;margin-right:30px;border-radius:50%;background:#ccc;-webkit-box-shadow:0 3px 10px rgba(0,0,0,.2);box-shadow:0 3px 10px rgba(0,0,0,.2)}[data-v-5fc50a56] .el-dialog .dialog-content figure .img-box img{width:100%;height:100%}[data-v-5fc50a56] .el-dialog .dialog-footer .el-button{border:none;color:#fff;background:#a5acaa}[data-v-5fc50a56] .el-dialog .dialog-footer .el-button.el-button--primary{background:#1890ff}[data-v-5fc50a56] .el-dialog .dialog-footer .el-button+.el-button{margin-left:30px}","",{version:3,sources:["z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/styles/_element_ui.scss","z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/styles/index.scss","z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/components/group_menu/GroupMenu.vue","z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/components/group_menu/z:/github/finance/message_client/src/styles/variables.scss"],names:[],mappings:"AAEA,sCACE,iBAAkB,CCCpB,+BAEI,8BAAuB,CAAvB,sBAAuB,CC+R3B,gCACE,oBAAqB,CACrB,aAAc,CACd,cAAe,CAGjB,wCACE,oBAAqB,CACrB,eAAgB,CAChB,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CAGrB,yCAEI,6BAAsB,CAAtB,qBAAsB,CACtB,cAAe,CACf,WAAY,CACZ,qBAAsB,CACtB,UAAW,CACX,8BAA+B,CAC/B,6BAA8B,CAC9B,eAAgB,CAChB,6CAA0C,CAA1C,qCAA0C,CAV9C,yCAcI,cAAe,CACf,iBAAkB,CAftB,+CAkBM,gCCjUoC,CD+S1C,+CAuBI,UAAW,CACX,WAAY,CACZ,iBAAkB,CAzBtB,gDA6BI,mBAAa,CAAb,mBAAa,CAAb,YAAa,CACb,wBAAmB,CAAnB,qBAAmB,CAAnB,kBAAmB,CACnB,gBAAiB,CACjB,eAAiB,CACjB,cAAe,CACf,aClVgB,CDgTpB,sDAsCI,cAAe,CACf,gBAAiB,CACjB,cAAe,CACf,oBCtUgC,CD0UpC,6BACE,eAAgB,CAChB,kBAAmB,CAFrB,gDAKI,eAAgB,CAChB,cAAe,CACf,eAAiB,CAPrB,kEAUM,aCvWc,CD6VpB,6CAeI,kBAAmB,CAfvB,wDAkBM,eAAgB,CAlBtB,oDAsBM,cAAe,CACf,eAAiB,CACjB,aCrXc,CDsXd,kBAAmB,CAzBzB,qEA6BM,kBCxX+B,CDyX/B,WAAY,CA9BlB,oDAkCM,mBAAa,CAAb,mBAAa,CAAb,YAAa,CACb,wBAAmB,CAAnB,qBAAmB,CAAnB,kBAAmB,CAnCzB,6DAsCQ,eAAgB,CAChB,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,iBAAkB,CAClB,eAAmB,CACnB,4CAAyC,CAAzC,oCAAyC,CA5CjD,iEA+CU,UAAW,CACX,WAAY,CAhDtB,uDAwDM,WAAY,CACZ,UAAc,CACd,kBCpZkB,CD0VxB,0EA8DM,kBC3Zc,CD6VpB,kEAkEM,gBAAiB",file:"GroupMenu.vue?vue&type=style&index=0&id=5fc50a56&lang=scss&scoped=true&",sourcesContent:["//覆盖elementUI默认的样式\r\n\r\n/deep/ .el-scrollbar__wrap {\r\n  overflow-x: hidden;\r\n}\r\n","@import 'variables';\r\n@import 'mixins';\r\n@import 'element_ui';\r\n\r\n.off-line {\r\n  img {\r\n    filter: grayscale(100%);\r\n  }\r\n}\r\n",'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import "@ms/index.scss";\n\n.dropdown-wrap {\n  display: inline-block;\n  padding: 0 5px;\n  cursor: pointer;\n}\n\n.page-title__name-text {\n  display: inline-block;\n  max-width: 160px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/deep/ .RelativePop {\n  .pop-wrap {\n    box-sizing: border-box;\n    padding: 10px 0;\n    width: 240px;\n    top: calc(100% + 10px);\n    left: -40px;\n    border-bottom-right-radius: 8px;\n    border-bottom-left-radius: 8px;\n    overflow: hidden;\n    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.16);\n  }\n\n  .pop-list {\n    cursor: pointer;\n    padding: 10px 20px;\n\n    &:hover {\n      background: $colorThemePrimary;\n    }\n  }\n\n  .pop-list__icon {\n    width: 18px;\n    height: 18px;\n    margin-right: 12px;\n  }\n\n  .pop-list__title {\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n    font-weight: bold;\n    font-size: 16px;\n    color: $colorTheme;\n  }\n\n  .pop-list__description {\n    font-size: 12px;\n    line-height: 20px;\n    margin-top: 5px;\n    color: $colorTextBlack5;\n  }\n}\n\n/deep/ .el-dialog {\n  min-width: 300px;\n  border-radius: 12px;\n\n  .el-dialog__header {\n    text-align: left;\n    font-size: 16px;\n    font-weight: bold;\n\n    .el-dialog__title {\n      color: $colorTheme;\n    }\n  }\n\n  .dialog-content {\n    margin-bottom: 20px;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n\n    .title {\n      font-size: 16px;\n      font-weight: bold;\n      color: $colorTheme;\n      margin-bottom: 10px;\n    }\n\n    /deep/ .el-input__inner {\n      background: $colorBgPageGray;\n      border: none;\n    }\n\n    figure {\n      display: flex;\n      align-items: center;\n\n      .img-box {\n        overflow: hidden;\n        width: 60px;\n        height: 60px;\n        margin-right: 30px;\n        border-radius: 50%;\n        background: #cccccc;\n        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);\n\n        img {\n          width: 100%;\n          height: 100%;\n        }\n      }\n    }\n  }\n\n  .dialog-footer {\n    .el-button {\n      border: none;\n      color: #ffffff;\n      background: $colorBgBtnGray;\n    }\n\n    .el-button.el-button--primary {\n      background: $colorTheme;\n    }\n\n    .el-button + .el-button {\n      margin-left: 30px;\n    }\n  }\n\n}\n','@charset "UTF-8";\r\n// 姜海斌抽离出来的变量 start ===============================================>>\r\n// 所有颜色相关的 ***********************\r\n$colorTheme: #1890ff;                         // 页面整体的主题色\r\n$colorThemePrimary: rgba(219,238,255,0.53);   // 页面整体的主题色\r\n$colorBgPageGray: rgba(240,240,240,1);        // 页面灰色背景\r\n$colorBgBtnGray: #A5ACAA;                     // 灰色按钮\r\n$colorBgSideBar: #001529;                    // 消息左边固定边栏背景色\r\n$colorShadowGreen: rgba(8, 69, 81, 0.1);      // 绿色阴影\r\n\r\n$colorText1: #000000;                     // 主要文字颜色，1级黑\r\n$colorText2: rgba(0, 0, 0, 0.7);          // 常规文字颜色，2级黑\r\n$colorText3: rgba(0, 0, 0, 0.6);          // 常规文字颜色，3级黑\r\n$colorText4: rgba(0, 0, 0, 0.5);          // 常规文字颜色，4级黑\r\n$colorText5: rgba(102,102,102,0.4);          // 常规文字颜色，5级黑\r\n$colorTextSessionTitle: rgba(102,102,102,1);    // session 栏，标题颜色\r\n$colorTextSessionContent: rgba(102,102,102,.8);    // session 栏，内容颜色\r\n$colorTextChatContent: rgba(24,50,112,1); // 聊天文字颜色\r\n\r\n$colorTextBlack2: rgba(0, 0, 0, 0.2);\r\n$colorTextBlack3: rgba(0, 0, 0, 0.3);\r\n$colorTextBlack4: rgba(0, 0, 0, 0.4);\r\n$colorTextBlack5: rgba(0, 0, 0, 0.5);\r\n$colorTextBlack6: rgba(0, 0, 0, 0.6);\r\n$colorTextBlack8: rgba(0, 0, 0, 0.8);\r\n$colorTextBlack9: rgba(0, 0, 0, 0.9);\r\n$colorTextBlack0: rgba(0, 0, 0, 1);\r\n\r\n\r\n$colorBorder1: rgba(102,102,102,0.2);     // 边框颜色，1级黑\r\n$colorBorder2: #e5e5e5;                   // 边框颜色，2级黑\r\n$colorBorderLayoutDark: rgba(112,112,112,0.1);; // 整体布局分割区域用的边框\r\n$colorBorderLayoutLight: rgba(153,153,153,0.1); // 整体布局分割区域用的边框\r\n\r\n// 所有字体相关 ***********************\r\n$fontFamilyMain: Microsoft YaHei;         // 图题字体，页面中最主要的字体\r\n\r\n// 所有尺寸（height width）相关 *************\r\n$sizeSideBarWidth: 60px;       // 消息左边固定边栏宽度\r\n$sizeTopBarHeight: 60px;        // 消息顶部栏高度\r\n$sizeNavBarWidth: 220px;        // 右边窗口左边导航栏宽度\r\n$sizeInputHeight: 30px;         // input框高度\r\n\r\n// 姜海斌抽离出来的变量 end <<=================================================\r\n']}])},e6c7:function(n,t,e){var o=e("b6ae");"string"===typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);var i=e("499e").default;i("4c49174f",o,!0,{sourceMap:!0,shadowMode:!1})},f550:function(n,t,e){"use strict";var o=e("e6c7"),i=e.n(o);i.a}}]);